apiVersion: v1
kind: Namespace
metadata:
  name: collector
---
apiVersion: v1
kind: Namespace
metadata:
  name: grafana
---
apiVersion: v1
kind: Namespace
metadata:
  name: jaeger
---
apiVersion: v1
kind: Namespace
metadata:
  name: loki
---
apiVersion: v1
kind: Namespace
metadata:
  name: prometheus
---
apiVersion: v1
kind: Namespace
metadata:
  name: tempo
---
apiVersion: v1
kind: ServiceAccount
metadata:
  labels:
    app.kubernetes.io/component: opentelemetry-collector
    app.kubernetes.io/instance: otel-gateway.otel-kubernetes-collector
    app.kubernetes.io/managed-by: opentelemetry-operator
    app.kubernetes.io/name: otel-collector
    app.kubernetes.io/part-of: opentelemetry
  name: otel-collector
  namespace: collector
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: otel-collector-role
rules:
- apiGroups:
  - '*'
  resources:
  - '*'
  verbs:
  - get
  - list
  - watch
- nonResourceURLs:
  - /metrics
  verbs:
  - get
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: prometheus
rules:
- apiGroups:
  - ""
  resources:
  - nodes
  - nodes/proxy
  - services
  - endpoints
  - pods
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - extensions
  resources:
  - ingresses
  verbs:
  - get
  - list
  - watch
- nonResourceURLs:
  - /metrics
  verbs:
  - get
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: otel-collector-role-binding
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: otel-collector-role
subjects:
- kind: ServiceAccount
  name: otel-collector
  namespace: collector
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: prometheus
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: prometheus
subjects:
- kind: ServiceAccount
  name: default
  namespace: prometheus
---
apiVersion: v1
data:
  demo.json: |-
    {
      "annotations": {
        "list": [
          {
            "builtIn": 1,
            "datasource": {
              "type": "grafana",
              "uid": "-- Grafana --"
            },
            "enable": true,
            "hide": true,
            "iconColor": "rgba(0, 211, 255, 1)",
            "name": "Annotations & Alerts",
            "target": {
              "limit": 100,
              "matchAny": false,
              "tags": [],
              "type": "dashboard"
            },
            "type": "dashboard"
          }
        ]
      },
      "editable": true,
      "fiscalYearStartMonth": 0,
      "graphTooltip": 0,
      "links": [],
      "liveNow": false,
      "panels": [
        {
          "collapsed": false,
          "gridPos": {
            "h": 1,
            "w": 24,
            "x": 0,
            "y": 0
          },
          "id": 14,
          "panels": [],
          "title": "Spanmetrics",
          "type": "row"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "webstore-metrics"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "dtdurationms"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 0,
            "y": 1
          },
          "id": 2,
          "options": {
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "mode": "single",
              "sort": "none"
            }
          },
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "webstore-metrics"
              },
              "editorMode": "code",
              "exemplar": true,
              "expr": "histogram_quantile(0.50, sum(rate(duration_milliseconds_bucket{service_name=\"${service}\"}[$__rate_interval])) by (le))",
              "legendFormat": "quantile50",
              "range": true,
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "webstore-metrics"
              },
              "editorMode": "code",
              "exemplar": false,
              "expr": "histogram_quantile(0.95, sum(rate(duration_milliseconds_bucket{service_name=\"${service}\"}[$__rate_interval])) by (le))",
              "hide": false,
              "legendFormat": "quantile95",
              "range": true,
              "refId": "B"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "webstore-metrics"
              },
              "editorMode": "code",
              "exemplar": false,
              "expr": "histogram_quantile(0.99, sum(rate(duration_milliseconds_bucket{service_name=\"${service}\"}[$__rate_interval])) by (le))",
              "hide": false,
              "legendFormat": "quantile99",
              "range": true,
              "refId": "C"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "webstore-metrics"
              },
              "editorMode": "code",
              "exemplar": false,
              "expr": "histogram_quantile(0.999, sum(rate(duration_milliseconds_bucket{service_name=\"${service}\"}[$__rate_interval])) by (le))",
              "hide": false,
              "legendFormat": "quantile999",
              "range": true,
              "refId": "D"
            }
          ],
          "title": "Latency for ${service}",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "webstore-metrics"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 12,
            "y": 1
          },
          "id": 10,
          "options": {
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "mode": "single",
              "sort": "none"
            }
          },
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "webstore-metrics"
              },
              "editorMode": "code",
              "expr": " sum by (span_name) (rate(calls_total{status_code=\"STATUS_CODE_ERROR\", service_name=\"${service}\"}[$__rate_interval]))",
              "interval": "",
              "legendFormat": "{{ span_name }}",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "Error Rate for ${service} by span name",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "webstore-metrics"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "reqps"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 0,
            "y": 9
          },
          "id": 12,
          "options": {
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "mode": "single",
              "sort": "none"
            }
          },
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "webstore-metrics"
              },
              "editorMode": "code",
              "expr": "sum by (span_name) (rate(duration_milliseconds_count{service_name=\"${service}\"}[$__rate_interval]))",
              "legendFormat": "{{ span_name }}",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "Requests Rate for ${service} by span name",
          "type": "timeseries"
        },
        {
          "collapsed": false,
          "gridPos": {
            "h": 1,
            "w": 24,
            "x": 0,
            "y": 17
          },
          "id": 19,
          "panels": [],
          "title": "Application Logs",
          "type": "row"
        },
        {
          "datasource": {
            "type": "grafana-opensearch-datasource",
            "uid": "P9744FCCEAAFBD98F"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "custom": {
                "align": "auto",
                "cellOptions": {
                  "type": "auto"
                },
                "inspect": false
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 4,
            "x": 0,
            "y": 18
          },
          "id": 20,
          "options": {
            "cellHeight": "sm",
            "footer": {
              "countRows": false,
              "fields": "",
              "reducer": [
                "sum"
              ],
              "show": false
            },
            "showHeader": true
          },
          "pluginVersion": "10.1.2",
          "targets": [
            {
              "alias": "",
              "bucketAggs": [
                {
                  "field": "time",
                  "id": "2",
                  "settings": {
                    "interval": "auto"
                  },
                  "type": "date_histogram"
                }
              ],
              "datasource": {
                "type": "grafana-opensearch-datasource",
                "uid": "P9744FCCEAAFBD98F"
              },
              "format": "table",
              "metrics": [
                {
                  "id": "1",
                  "type": "count"
                }
              ],
              "query": "search source=otel\n| where serviceName=\"${service}\"\n| stats count() by severityText",
              "queryType": "PPL",
              "refId": "A",
              "timeField": "time"
            }
          ],
          "title": "${service} Log entries by Severity",
          "type": "table"
        },
        {
          "datasource": {
            "type": "grafana-opensearch-datasource",
            "uid": "P9744FCCEAAFBD98F"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "custom": {
                "align": "auto",
                "cellOptions": {
                  "type": "auto"
                },
                "inspect": false
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 20,
            "x": 4,
            "y": 18
          },
          "id": 17,
          "options": {
            "cellHeight": "sm",
            "footer": {
              "countRows": false,
              "fields": "",
              "reducer": [
                "sum"
              ],
              "show": false
            },
            "showHeader": true
          },
          "pluginVersion": "10.1.2",
          "targets": [
            {
              "alias": "",
              "bucketAggs": [
                {
                  "field": "time",
                  "id": "2",
                  "settings": {
                    "interval": "auto"
                  },
                  "type": "date_histogram"
                }
              ],
              "datasource": {
                "type": "grafana-opensearch-datasource",
                "uid": "P9744FCCEAAFBD98F"
              },
              "format": "logs",
              "hide": false,
              "metrics": [
                {
                  "id": "1",
                  "type": "count"
                }
              ],
              "query": "search source=otel\n| where serviceName=\"${service}\"",
              "queryType": "PPL",
              "refId": "A",
              "timeField": "time"
            }
          ],
          "title": "${service} Logs",
          "type": "table"
        },
        {
          "collapsed": false,
          "gridPos": {
            "h": 1,
            "w": 24,
            "x": 0,
            "y": 26
          },
          "id": 18,
          "panels": [],
          "title": "Application Metrics",
          "type": "row"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "webstore-metrics"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "percent"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 0,
            "y": 27
          },
          "id": 6,
          "options": {
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "mode": "single",
              "sort": "none"
            }
          },
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "webstore-metrics"
              },
              "editorMode": "code",
              "expr": "rate(process_runtime_cpython_cpu_time_seconds_total{type=~\"system\"}[$__rate_interval])*100",
              "hide": false,
              "interval": "2m",
              "legendFormat": "{{job}} ({{type}})",
              "range": true,
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "webstore-metrics"
              },
              "editorMode": "code",
              "expr": "rate(process_runtime_cpython_cpu_time_seconds_total{type=~\"user\"}[$__rate_interval])*100",
              "hide": false,
              "interval": "2m",
              "legendFormat": "{{job}} ({{type}})",
              "range": true,
              "refId": "B"
            }
          ],
          "title": "Python services (CPU%)",
          "transformations": [
            {
              "id": "renameByRegex",
              "options": {
                "regex": "opentelemetry-demo/(.*)",
                "renamePattern": "$1"
              }
            }
          ],
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "webstore-metrics"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "bytes"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 12,
            "y": 27
          },
          "id": 8,
          "options": {
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "mode": "single",
              "sort": "none"
            }
          },
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "webstore-metrics"
              },
              "editorMode": "code",
              "expr": "process_runtime_cpython_memory_bytes{type=\"rss\"}",
              "legendFormat": "{{job}}",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "Python services (Memory)",
          "transformations": [
            {
              "id": "renameByRegex",
              "options": {
                "regex": "opentelemetry-demo/(.*)",
                "renamePattern": "$1"
              }
            }
          ],
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "webstore-metrics"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "drawStyle": "bars",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 0,
            "y": 35
          },
          "id": 4,
          "options": {
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": false
            },
            "tooltip": {
              "mode": "single",
              "sort": "none"
            }
          },
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "webstore-metrics"
              },
              "editorMode": "code",
              "expr": "rate(app_recommendations_counter_total{recommendation_type=\"catalog\"}[$__rate_interval])",
              "interval": "2m",
              "legendFormat": "recommendations",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "Recommendations Rate",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "webstore-metrics"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 12,
            "y": 35
          },
          "id": 16,
          "options": {
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "mode": "single",
              "sort": "none"
            }
          },
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "webstore-metrics"
              },
              "editorMode": "code",
              "expr": "rate(otel_trace_span_processor_spans{job=\"opentelemetry-demo/quoteservice\"}[2m])*120",
              "interval": "2m",
              "legendFormat": "{{state}}",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "Quote Service batch span processor",
          "type": "timeseries"
        }
      ],
      "refresh": "",
      "revision": 1,
      "schemaVersion": 38,
      "style": "dark",
      "tags": [],
      "templating": {
        "list": [
          {
            "allValue": "",
            "current": {
              "selected": true,
              "text": "adservice",
              "value": "adservice"
            },
            "datasource": {
              "type": "prometheus",
              "uid": "webstore-metrics"
            },
            "definition": "duration_milliseconds_bucket",
            "hide": 0,
            "includeAll": false,
            "multi": false,
            "name": "service",
            "options": [],
            "query": {
              "query": "duration_milliseconds_bucket",
              "refId": "PrometheusVariableQueryEditor-VariableQuery"
            },
            "refresh": 1,
            "regex": "/.*service_name=\\\"([^\\\"]+)\\\".*/",
            "skipUrlSync": false,
            "sort": 1,
            "type": "query"
          }
        ]
      },
      "time": {
        "from": "now-3h",
        "to": "now"
      },
      "timepicker": {},
      "timezone": "",
      "title": "Demo Dashboard",
      "uid": "W2gX2zHVk",
      "version": 1,
      "weekStart": ""
    }
kind: ConfigMap
metadata:
  labels:
    app.kubernetes.io/name: grafana
  name: dashboard-demo-bc9g6bfth2
  namespace: grafana
---
apiVersion: v1
data:
  delivery-metrics.json: |
    {
      "annotations": {
        "list": [
          {
            "builtIn": 1,
            "datasource": {
              "type": "grafana",
              "uid": "-- Grafana --"
            },
            "enable": true,
            "hide": true,
            "iconColor": "rgba(0, 211, 255, 1)",
            "name": "Annotations & Alerts",
            "target": {
              "limit": 100,
              "matchAny": false,
              "tags": [],
              "type": "dashboard"
            },
            "type": "dashboard"
          }
        ]
      },
      "editable": true,
      "fiscalYearStartMonth": 0,
      "graphTooltip": 0,
      "links": [],
      "liveNow": false,
      "panels": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "webstore-metrics"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "yellow",
                    "value": 5
                  },
                  {
                    "color": "dark-red",
                    "value": 7
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 7,
            "w": 3,
            "x": 0,
            "y": 0
          },
          "id": 7,
          "options": {
            "minVizHeight": 200,
            "minVizWidth": 200,
            "orientation": "auto",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "",
              "values": false
            },
            "showThresholdLabels": false,
            "showThresholdMarkers": true,
            "sizing": "auto"
          },
          "pluginVersion": "10.2.3",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "gitprovider-metrics"
              },
              "disableTextWrap": false,
              "editorMode": "builder",
              "expr": "avg by(organization_name) (git_repository_branch_count{organization_name=\"$organization\", repository_name=~\"$repo\"})",
              "fullMetaSearch": false,
              "includeNullMetadata": true,
              "instant": false,
              "key": "Q-12be8e8c-5d52-4ee5-8ea8-7b4a5dfbac4f-0",
              "legendFormat": "{{organization_name}}",
              "range": true,
              "refId": "A",
              "useBackend": false
            }
          ],
          "title": "Average Branch Count",
          "type": "gauge"
        },
        {
          "datasource": {},
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "yellow",
                    "value": 200
                  },
                  {
                    "color": "red",
                    "value": 500
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 7,
            "w": 21,
            "x": 3,
            "y": 0
          },
          "id": 6,
          "options": {
            "minVizHeight": 200,
            "minVizWidth": 200,
            "orientation": "auto",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "",
              "values": false
            },
            "showThresholdLabels": false,
            "showThresholdMarkers": true,
            "sizing": "auto",
            "text": {}
          },
          "pluginVersion": "10.2.3",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "gitprovider-metrics"
              },
              "disableTextWrap": false,
              "editorMode": "builder",
              "expr": "avg by(repository_name) (git_repository_branch_time{organization_name=\"$organization\", repository_name=~\"$repo\"}) / 24",
              "fullMetaSearch": false,
              "includeNullMetadata": true,
              "instant": false,
              "key": "Q-12be8e8c-5d52-4ee5-8ea8-7b4a5dfbac4f-0",
              "legendFormat": "{{repository_name}}",
              "range": true,
              "refId": "A",
              "useBackend": false
            }
          ],
          "title": "Average Branch Age Per Repo In Days",
          "type": "gauge"
        },
        {
          "datasource": {},
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "drawStyle": "line",
                "fillOpacity": 100,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "never",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "normal"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 9,
            "w": 8,
            "x": 0,
            "y": 7
          },
          "id": 8,
          "options": {
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "mode": "single",
              "sort": "none"
            }
          },
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "gitprovider-metrics"
              },
              "disableTextWrap": false,
              "editorMode": "builder",
              "expr": "git_repository_contributor_count{organization_name=\"$organization\", repository_name=~\"$repo\"}",
              "fullMetaSearch": false,
              "includeNullMetadata": true,
              "instant": false,
              "key": "Q-08537169-6de5-41f1-b2d6-693fc148edad-0",
              "legendFormat": "{{organization_name}}/{{repository_name}}",
              "range": true,
              "refId": "A",
              "useBackend": false
            }
          ],
          "title": "Contributor Count",
          "type": "timeseries"
        },
        {
          "datasource": {},
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "drawStyle": "line",
                "fillOpacity": 100,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineStyle": {
                  "fill": "solid"
                },
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "never",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "normal"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 9,
            "w": 8,
            "x": 8,
            "y": 7
          },
          "id": 2,
          "options": {
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "mode": "single",
              "sort": "none"
            }
          },
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "gitprovider-metrics"
              },
              "disableTextWrap": false,
              "editorMode": "builder",
              "expr": "git_repository_branch_count{organization_name=\"$organization\", repository_name=~\"$repo\"}",
              "fullMetaSearch": false,
              "includeNullMetadata": true,
              "instant": false,
              "key": "Q-12be8e8c-5d52-4ee5-8ea8-7b4a5dfbac4f-0",
              "legendFormat": "{{organization_name}}/{{repository_name}}",
              "range": true,
              "refId": "A",
              "useBackend": false
            }
          ],
          "title": "Branch Count",
          "type": "timeseries"
        },
        {
          "datasource": {},
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "drawStyle": "line",
                "fillOpacity": 100,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "never",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "normal"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 9,
            "w": 8,
            "x": 16,
            "y": 7
          },
          "id": 1,
          "options": {
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "mode": "single",
              "sort": "none"
            }
          },
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "gitprovider-metrics"
              },
              "disableTextWrap": false,
              "editorMode": "builder",
              "expr": "git_repository_branch_time{organization_name=\"$organization\", repository_name=~\"$repo\"}",
              "fullMetaSearch": false,
              "includeNullMetadata": true,
              "instant": false,
              "key": "Q-0b7776a7-47df-4758-b3ba-2640342f1db9-0",
              "legendFormat": "{{organization_name}}/{{repository_name}}/{{branch_name}}",
              "range": true,
              "refId": "A",
              "useBackend": false
            }
          ],
          "title": "Branch Age",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "webstore-metrics"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "drawStyle": "line",
                "fillOpacity": 100,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "never",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "normal"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 9,
            "w": 8,
            "x": 0,
            "y": 16
          },
          "id": 9,
          "options": {
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "mode": "single",
              "sort": "none"
            }
          },
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "gitprovider-metrics"
              },
              "disableTextWrap": false,
              "editorMode": "builder",
              "expr": "git_repository_pull_request_open_count{organization_name=\"$organization\", repository_name=~\"$repo\"}",
              "fullMetaSearch": false,
              "includeNullMetadata": true,
              "instant": false,
              "key": "Q-0b7776a7-47df-4758-b3ba-2640342f1db9-0",
              "legendFormat": "{{organization_name}}/{{repository_name}}/{{branch_name}}",
              "range": true,
              "refId": "A",
              "useBackend": false
            }
          ],
          "title": "Open Pull Request Count",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "webstore-metrics"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "drawStyle": "line",
                "fillOpacity": 100,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "never",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "normal"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 9,
            "w": 8,
            "x": 8,
            "y": 16
          },
          "id": 10,
          "options": {
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "mode": "single",
              "sort": "none"
            }
          },
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "gitprovider-metrics"
              },
              "disableTextWrap": false,
              "editorMode": "builder",
              "expr": "git_repository_pull_request_open_time{organization_name=\"$organization\", repository_name=~\"$repo\"}",
              "fullMetaSearch": false,
              "includeNullMetadata": true,
              "instant": false,
              "key": "Q-0b7776a7-47df-4758-b3ba-2640342f1db9-0",
              "legendFormat": "{{organization_name}}/{{repository_name}}/{{branch_name}}",
              "range": true,
              "refId": "A",
              "useBackend": false
            }
          ],
          "title": "Open Pull Request Age",
          "type": "timeseries"
        },
        {
          "datasource": {},
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "drawStyle": "line",
                "fillOpacity": 100,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "never",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "normal"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 9,
            "w": 8,
            "x": 16,
            "y": 16
          },
          "id": 3,
          "options": {
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "mode": "single",
              "sort": "none"
            }
          },
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "gitprovider-metrics"
              },
              "disableTextWrap": false,
              "editorMode": "builder",
              "expr": "git_repository_count{organization_name=\"$organization\"}",
              "fullMetaSearch": false,
              "includeNullMetadata": true,
              "instant": false,
              "key": "Q-02c41670-371f-491d-a64b-bc9b29c20bc3-0",
              "legendFormat": "{{organization_name}}",
              "range": true,
              "refId": "A",
              "useBackend": false
            }
          ],
          "title": "Repo Count",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "webstore-metrics"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "drawStyle": "line",
                "fillOpacity": 100,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "never",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "normal"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 9,
            "w": 8,
            "x": 0,
            "y": 25
          },
          "id": 11,
          "options": {
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "mode": "single",
              "sort": "none"
            }
          },
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "gitprovider-metrics"
              },
              "disableTextWrap": false,
              "editorMode": "builder",
              "expr": "git_repository_pull_request_merged_count{organization_name=\"$organization\", repository_name=~\"$repo\"}",
              "fullMetaSearch": false,
              "includeNullMetadata": true,
              "instant": false,
              "key": "Q-0b7776a7-47df-4758-b3ba-2640342f1db9-0",
              "legendFormat": "{{organization_name}}/{{repository_name}}/{{branch_name}}",
              "range": true,
              "refId": "A",
              "useBackend": false
            }
          ],
          "title": "Merged Pull Request Count",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "webstore-metrics"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "drawStyle": "line",
                "fillOpacity": 100,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "never",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "normal"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 9,
            "w": 8,
            "x": 8,
            "y": 25
          },
          "id": 12,
          "options": {
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "mode": "single",
              "sort": "none"
            }
          },
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "gitprovider-metrics"
              },
              "disableTextWrap": false,
              "editorMode": "builder",
              "expr": "git_repository_pull_request_merged_time{organization_name=\"$organization\", repository_name=~\"$repo\"}",
              "fullMetaSearch": false,
              "includeNullMetadata": true,
              "instant": false,
              "key": "Q-0b7776a7-47df-4758-b3ba-2640342f1db9-0",
              "legendFormat": "{{organization_name}}/{{repository_name}}/{{branch_name}}",
              "range": true,
              "refId": "A",
              "useBackend": false
            }
          ],
          "title": "Merged Pull Request Age",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "webstore-metrics"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "drawStyle": "line",
                "fillOpacity": 100,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "never",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "normal"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 9,
            "w": 8,
            "x": 16,
            "y": 25
          },
          "id": 13,
          "options": {
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "mode": "single",
              "sort": "none"
            }
          },
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "gitprovider-metrics"
              },
              "disableTextWrap": false,
              "editorMode": "builder",
              "expr": "git_repository_pull_request_approved_time{organization_name=\"$organization\", repository_name=~\"$repo\"}",
              "fullMetaSearch": false,
              "includeNullMetadata": true,
              "instant": false,
              "key": "Q-0b7776a7-47df-4758-b3ba-2640342f1db9-0",
              "legendFormat": "{{organization_name}}/{{repository_name}}/{{branch_name}}",
              "range": true,
              "refId": "A",
              "useBackend": false
            }
          ],
          "title": "Approved Pull Request Age",
          "type": "timeseries"
        }
      ],
      "refresh": "5s",
      "revision": 1,
      "schemaVersion": 39,
      "tags": [],
      "templating": {
        "list": [
          {
            "current": {
              "selected": true,
              "text": [
                "liatrio"
              ],
              "value": [
                "liatrio"
              ]
            },
            "datasource": {
              "type": "prometheus",
              "uid": "webstore-metrics"
            },
            "definition": "label_values(organization_name)",
            "description": "The organization name resource attribute for metrics. ",
            "hide": 0,
            "includeAll": true,
            "label": "organization",
            "multi": true,
            "name": "organization",
            "options": [],
            "query": {
              "qryType": 1,
              "query": "label_values(organization_name)",
              "refId": "PrometheusVariableQueryEditor-VariableQuery"
            },
            "refresh": 1,
            "regex": "",
            "skipUrlSync": false,
            "sort": 0,
            "type": "query"
          },
          {
            "current": {
              "selected": false,
              "text": "All",
              "value": "$__all"
            },
            "definition": "label_values({organization_name=\"$organization\"},team_name)",
            "description": "The name of the team ",
            "hide": 0,
            "includeAll": true,
            "label": "team",
            "multi": true,
            "name": "team",
            "options": [],
            "query": {
              "qryType": 1,
              "query": "label_values({organization_name=\"$organization\"},team_name)",
              "refId": "PrometheusVariableQueryEditor-VariableQuery"
            },
            "refresh": 1,
            "regex": "",
            "skipUrlSync": false,
            "sort": 0,
            "type": "query"
          },
          {
            "allValue": "",
            "current": {
              "selected": true,
              "text": [
                "aws-managed-services"
              ],
              "value": [
                "aws-managed-services"
              ]
            },
            "datasource": {
              "type": "prometheus",
              "uid": "webstore-metrics"
            },
            "definition": "label_values({organization_name=~\"$organization\"}, repository_name) ",
            "hide": 0,
            "includeAll": true,
            "multi": true,
            "name": "repo",
            "options": [],
            "query": {
              "query": "label_values({organization_name=~\"$organization\"}, repository_name) ",
              "refId": "StandardVariableQuery"
            },
            "refresh": 1,
            "regex": "",
            "skipUrlSync": false,
            "sort": 0,
            "type": "query"
          }
        ]
      },
      "time": {
        "from": "now-5m",
        "to": "now"
      },
      "timepicker": {},
      "timezone": "",
      "title": "Delivery Metrics Demo Dashboard",
      "uid": "xFKTrZzIk",
      "version": 1,
      "weekStart": ""
    }
kind: ConfigMap
metadata:
  labels:
    app.kubernetes.io/name: grafana
  name: dashboard-gpr-delivery-metrics-mhtmt7g69d
  namespace: grafana
---
apiVersion: v1
data:
  dora-metrics.json: |-
    {
      "annotations": {
        "list": [
          {
            "builtIn": 1,
            "datasource": {
              "type": "grafana",
              "uid": "-- Grafana --"
            },
            "enable": true,
            "hide": true,
            "iconColor": "rgba(0, 211, 255, 1)",
            "name": "Annotations & Alerts",
            "type": "dashboard"
          }
        ]
      },
      "editable": true,
      "fiscalYearStartMonth": 0,
      "graphTooltip": 0,
      "links": [],
      "liveNow": false,
      "panels": [
        {
          "gridPos": {
            "h": 1,
            "w": 24,
            "x": 0,
            "y": 0
          },
          "id": 23,
          "title": "Change Failure Rate",
          "type": "row"
        },
        {
          "datasource": {
            "type": "loki",
            "uid": "loki"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "percent"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 7,
            "w": 8,
            "x": 0,
            "y": 1
          },
          "id": 26,
          "options": {
            "colorMode": "value",
            "graphMode": "area",
            "justifyMode": "auto",
            "orientation": "auto",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "",
              "values": false
            },
            "textMode": "auto",
            "wideLayout": true
          },
          "pluginVersion": "10.2.3",
          "targets": [
            {
              "datasource": {
                "type": "loki",
                "uid": "loki"
              },
              "editorMode": "code",
              "expr": "count by (name) (count_over_time({repository_name=~\"$repo\",repository_owner=~\"$organization\",status=\"success\"}[$__auto])) ",
              "hide": true,
              "legendFormat": "",
              "queryType": "instant",
              "refId": "A"
            },
            {
              "datasource": {
                "type": "loki",
                "uid": "loki"
              },
              "editorMode": "code",
              "expr": "count by (action) (count_over_time({repository_name=~\"$repo\", repository_owner=~\"$organization\", action=\"closed\", issue_labels!=\"\"}[$__auto]))",
              "hide": true,
              "queryType": "instant",
              "refId": "B"
            },
            {
              "datasource": {
                "name": "Expression",
                "type": "__expr__",
                "uid": "__expr__"
              },
              "expression": "($B/$A)*100",
              "hide": false,
              "refId": "C",
              "type": "math"
            }
          ],
          "title": " ",
          "transformations": [
            {
              "disabled": true,
              "id": "merge",
              "options": {}
            }
          ],
          "type": "stat"
        },
        {
          "gridPos": {
            "h": 1,
            "w": 24,
            "x": 0,
            "y": 8
          },
          "id": 22,
          "title": "Lead Time For Changes In Hours",
          "type": "row"
        },
        {
          "datasource": {
            "type": "loki",
            "uid": "loki"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 0,
            "y": 9
          },
          "id": 27,
          "options": {
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "10.2.0",
          "targets": [
            {
              "datasource": {
                "type": "loki",
                "uid": "loki"
              },
              "editorMode": "code",
              "expr": "{sha!=\"\", repository_owner=\"$organization\", repository_name=\"$repo\", action=\"closed\"}",
              "queryType": "range",
              "refId": "A"
            },
            {
              "datasource": {
                "type": "loki",
                "uid": "loki"
              },
              "editorMode": "code",
              "expr": "{created_at!=\"\",action=\"\",repository_name=\"$repo\", repository_owner=\"$organization\"} |= ``",
              "hide": false,
              "queryType": "range",
              "refId": "B"
            }
          ],
          "title": "Lead Time to Changes Over Time",
          "transformations": [
            {
              "id": "extractFields",
              "options": {
                "format": "kvp",
                "source": "labels"
              }
            },
            {
              "id": "joinByField",
              "options": {
                "byField": "sha",
                "mode": "outer"
              }
            },
            {
              "id": "filterByValue",
              "options": {
                "filters": [
                  {
                    "config": {
                      "id": "isNotNull",
                      "options": {}
                    },
                    "fieldName": "created_at"
                  },
                  {
                    "config": {
                      "id": "isNotNull",
                      "options": {}
                    },
                    "fieldName": "merged_at"
                  },
                  {
                    "config": {
                      "id": "equal",
                      "options": {
                        "value": "success"
                      }
                    },
                    "fieldName": "status"
                  }
                ],
                "match": "all",
                "type": "include"
              }
            },
            {
              "id": "organize",
              "options": {
                "excludeByName": {
                  "Line 1": true,
                  "Line 2": true,
                  "Time 1": true,
                  "Time 2": true,
                  "action": true,
                  "created_at": false,
                  "exporter": true,
                  "exporter 2": true,
                  "id 1": true,
                  "id 2": true,
                  "labels 1": true,
                  "labels 2": true,
                  "name": true,
                  "repository_name": true,
                  "repository_name 2": true,
                  "repository_owner": true,
                  "repository_owner 2": true,
                  "status": true,
                  "title": true,
                  "tsNs 1": true,
                  "tsNs 2": true,
                  "user": true
                },
                "indexByName": {
                  "Line 1": 3,
                  "Line 2": 15,
                  "Time 1": 2,
                  "Time 2": 14,
                  "action": 6,
                  "created_at": 9,
                  "exporter": 7,
                  "exporter 2": 18,
                  "id 1": 5,
                  "id 2": 17,
                  "labels 1": 1,
                  "labels 2": 13,
                  "merged_at": 8,
                  "name": 19,
                  "repository_name": 10,
                  "repository_name 2": 20,
                  "repository_owner": 11,
                  "repository_owner 2": 21,
                  "sha": 0,
                  "status": 22,
                  "title": 12,
                  "tsNs 1": 4,
                  "tsNs 2": 16,
                  "user": 23
                },
                "renameByName": {}
              }
            },
            {
              "id": "convertFieldType",
              "options": {
                "conversions": [
                  {
                    "dateFormat": "YYYY-MM-DD hh:mm:s.S",
                    "destinationType": "time",
                    "targetField": "created_at"
                  },
                  {
                    "dateFormat": "YYYY-MM-DD hh:mm:s.S",
                    "destinationType": "time",
                    "targetField": "merged_at"
                  }
                ],
                "fields": {}
              }
            },
            {
              "id": "calculateField",
              "options": {
                "binary": {
                  "left": "created_at",
                  "operator": "-",
                  "right": "merged_at"
                },
                "mode": "binary",
                "reduce": {
                  "reducer": "sum"
                }
              }
            },
            {
              "id": "calculateField",
              "options": {
                "alias": "Time to Deploy in Seconds",
                "binary": {
                  "left": "created_at - merged_at",
                  "operator": "/",
                  "right": "1000"
                },
                "mode": "binary",
                "reduce": {
                  "reducer": "sum"
                }
              }
            },
            {
              "id": "calculateField",
              "options": {
                "alias": "Time to Deploy in Hours",
                "binary": {
                  "left": "Time to Deploy in Seconds",
                  "operator": "/",
                  "right": "3600"
                },
                "mode": "binary",
                "reduce": {
                  "reducer": "sum"
                },
                "replaceFields": true
              }
            }
          ],
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "loki",
            "uid": "loki"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 12,
            "y": 9
          },
          "id": 28,
          "options": {
            "minVizHeight": 75,
            "minVizWidth": 75,
            "orientation": "auto",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "",
              "values": false
            },
            "showThresholdLabels": false,
            "showThresholdMarkers": true,
            "sizing": "auto"
          },
          "pluginVersion": "10.2.3",
          "targets": [
            {
              "datasource": {
                "type": "loki",
                "uid": "loki"
              },
              "editorMode": "code",
              "expr": "{sha!=\"\", repository_owner=\"$organization\", repository_name=\"$repo\", action=\"closed\"}",
              "queryType": "range",
              "refId": "A"
            },
            {
              "datasource": {
                "type": "loki",
                "uid": "loki"
              },
              "editorMode": "code",
              "expr": "{created_at!=\"\",action=\"\",repository_name=\"$repo\", repository_owner=\"$organization\"} |= ``",
              "hide": false,
              "queryType": "range",
              "refId": "B"
            }
          ],
          "title": "Average Lead Time To Changes",
          "transformations": [
            {
              "id": "extractFields",
              "options": {
                "format": "kvp",
                "source": "labels"
              }
            },
            {
              "id": "joinByField",
              "options": {
                "byField": "sha",
                "mode": "outer"
              }
            },
            {
              "id": "filterByValue",
              "options": {
                "filters": [
                  {
                    "config": {
                      "id": "isNotNull",
                      "options": {}
                    },
                    "fieldName": "created_at"
                  },
                  {
                    "config": {
                      "id": "isNotNull",
                      "options": {}
                    },
                    "fieldName": "merged_at"
                  },
                  {
                    "config": {
                      "id": "equal",
                      "options": {
                        "value": "success"
                      }
                    },
                    "fieldName": "status"
                  }
                ],
                "match": "all",
                "type": "include"
              }
            },
            {
              "id": "organize",
              "options": {
                "excludeByName": {
                  "Line 1": true,
                  "Line 2": true,
                  "Time 1": true,
                  "Time 2": true,
                  "action": true,
                  "created_at": false,
                  "exporter": true,
                  "exporter 2": true,
                  "id 1": true,
                  "id 2": true,
                  "labels 1": true,
                  "labels 2": true,
                  "name": true,
                  "repository_name": true,
                  "repository_name 2": true,
                  "repository_owner": true,
                  "repository_owner 2": true,
                  "status": true,
                  "title": true,
                  "tsNs 1": true,
                  "tsNs 2": true,
                  "user": true
                },
                "indexByName": {
                  "Line 1": 3,
                  "Line 2": 15,
                  "Time 1": 2,
                  "Time 2": 14,
                  "action": 6,
                  "created_at": 9,
                  "exporter": 7,
                  "exporter 2": 18,
                  "id 1": 5,
                  "id 2": 17,
                  "labels 1": 1,
                  "labels 2": 13,
                  "merged_at": 8,
                  "name": 19,
                  "repository_name": 10,
                  "repository_name 2": 20,
                  "repository_owner": 11,
                  "repository_owner 2": 21,
                  "sha": 0,
                  "status": 22,
                  "title": 12,
                  "tsNs 1": 4,
                  "tsNs 2": 16,
                  "user": 23
                },
                "renameByName": {}
              }
            },
            {
              "id": "convertFieldType",
              "options": {
                "conversions": [
                  {
                    "dateFormat": "YYYY-MM-DD hh:mm:s.S",
                    "destinationType": "time",
                    "targetField": "created_at"
                  },
                  {
                    "dateFormat": "YYYY-MM-DD hh:mm:s.S",
                    "destinationType": "time",
                    "targetField": "merged_at"
                  }
                ],
                "fields": {}
              }
            },
            {
              "id": "calculateField",
              "options": {
                "binary": {
                  "left": "created_at",
                  "operator": "-",
                  "right": "merged_at"
                },
                "mode": "binary",
                "reduce": {
                  "reducer": "sum"
                }
              }
            },
            {
              "id": "calculateField",
              "options": {
                "alias": "Time to Deploy in Seconds",
                "binary": {
                  "left": "created_at - merged_at",
                  "operator": "/",
                  "right": "1000"
                },
                "mode": "binary",
                "reduce": {
                  "reducer": "sum"
                }
              }
            },
            {
              "id": "calculateField",
              "options": {
                "alias": "Time to Deploy in Hours",
                "binary": {
                  "left": "Time to Deploy in Seconds",
                  "operator": "/",
                  "right": "3600"
                },
                "mode": "binary",
                "reduce": {
                  "reducer": "sum"
                },
                "replaceFields": true
              }
            },
            {
              "id": "reduce",
              "options": {
                "includeTimeField": false,
                "labelsToFields": false,
                "mode": "seriesToRows",
                "reducers": [
                  "mean"
                ]
              }
            }
          ],
          "type": "gauge"
        },
        {
          "gridPos": {
            "h": 1,
            "w": 24,
            "x": 0,
            "y": 17
          },
          "id": 15,
          "title": "Time to Restore Service",
          "type": "row"
        },
        {
          "datasource": {
            "type": "loki",
            "uid": "loki"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "custom": {
                "align": "auto",
                "cellOptions": {
                  "type": "auto"
                },
                "inspect": false
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 8,
            "x": 0,
            "y": 18
          },
          "id": 24,
          "options": {
            "cellHeight": "sm",
            "footer": {
              "countRows": false,
              "fields": "",
              "reducer": [
                "sum"
              ],
              "show": false
            },
            "showHeader": true
          },
          "pluginVersion": "10.2.3",
          "targets": [
            {
              "datasource": {
                "type": "loki",
                "uid": "loki"
              },
              "editorMode": "code",
              "expr": "{repository_name=~\"$repo\",repository_owner=~\"$organization\"}",
              "queryType": "range",
              "refId": "A"
            }
          ],
          "title": "Logs",
          "transformations": [
            {
              "id": "extractFields",
              "options": {
                "format": "kvp",
                "source": "labels"
              }
            },
            {
              "id": "filterByValue",
              "options": {
                "filters": [
                  {
                    "config": {
                      "id": "equal",
                      "options": {
                        "value": "closed"
                      }
                    },
                    "fieldName": "action"
                  },
                  {
                    "config": {
                      "id": "isNotNull",
                      "options": {}
                    },
                    "fieldName": "closed_at"
                  }
                ],
                "match": "all",
                "type": "include"
              }
            },
            {
              "id": "convertFieldType",
              "options": {
                "conversions": [
                  {
                    "dateFormat": "YYYY-MM-DD hh:mm:s.S",
                    "destinationType": "time",
                    "targetField": "closed_at"
                  },
                  {
                    "dateFormat": "YYYY-MM-DD hh:mm:s.S",
                    "destinationType": "time",
                    "targetField": "created_at"
                  }
                ],
                "fields": {}
              }
            },
            {
              "id": "calculateField",
              "options": {
                "alias": "time to resolve (ms)",
                "binary": {
                  "left": "closed_at",
                  "operator": "-",
                  "right": "created_at"
                },
                "mode": "binary",
                "reduce": {
                  "reducer": "sum"
                }
              }
            },
            {
              "id": "calculateField",
              "options": {
                "alias": "time to resolve (s)",
                "binary": {
                  "left": "time to resolve (ms)",
                  "operator": "/",
                  "right": "1000"
                },
                "mode": "binary",
                "reduce": {
                  "reducer": "sum"
                }
              }
            },
            {
              "id": "calculateField",
              "options": {
                "alias": "time to resolve (hrs)",
                "binary": {
                  "left": "time to resolve (s)",
                  "operator": "/",
                  "right": "3600"
                },
                "mode": "binary",
                "reduce": {
                  "reducer": "sum"
                }
              }
            },
            {
              "id": "organize",
              "options": {
                "excludeByName": {
                  "Line": true,
                  "Time": true,
                  "action": true,
                  "exporter": true,
                  "id": true,
                  "issue_labels": true,
                  "labels": true,
                  "merged_at": true,
                  "name": true,
                  "sha": true,
                  "status": true,
                  "time to resolve (ms)": true,
                  "time to resolve (s)": true,
                  "tsNs": true,
                  "user": true
                },
                "indexByName": {
                  "Line": 11,
                  "Time": 10,
                  "action": 3,
                  "closed_at": 2,
                  "created_at": 1,
                  "exporter": 14,
                  "id": 13,
                  "issue_labels": 18,
                  "labels": 9,
                  "name": 15,
                  "repository_name": 6,
                  "repository_owner": 7,
                  "status": 16,
                  "time to resolve (hrs)": 8,
                  "time to resolve (ms)": 4,
                  "time to resolve (s)": 5,
                  "title": 0,
                  "tsNs": 12,
                  "user": 17
                },
                "renameByName": {
                  "title": "Issue"
                }
              }
            }
          ],
          "type": "table"
        },
        {
          "datasource": {
            "type": "loki",
            "uid": "loki"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 8,
            "x": 8,
            "y": 18
          },
          "id": 29,
          "options": {
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "10.2.0",
          "targets": [
            {
              "datasource": {
                "type": "loki",
                "uid": "loki"
              },
              "editorMode": "code",
              "expr": "{repository_name=~\"$repo\",repository_owner=~\"$organization\"}",
              "queryType": "range",
              "refId": "A"
            }
          ],
          "title": "Time To Restore Service Over Time",
          "transformations": [
            {
              "id": "extractFields",
              "options": {
                "format": "kvp",
                "source": "labels"
              }
            },
            {
              "id": "filterByValue",
              "options": {
                "filters": [
                  {
                    "config": {
                      "id": "equal",
                      "options": {
                        "value": "closed"
                      }
                    },
                    "fieldName": "action"
                  },
                  {
                    "config": {
                      "id": "isNotNull",
                      "options": {}
                    },
                    "fieldName": "closed_at"
                  }
                ],
                "match": "all",
                "type": "include"
              }
            },
            {
              "id": "convertFieldType",
              "options": {
                "conversions": [
                  {
                    "dateFormat": "YYYY-MM-DD hh:mm:s.S",
                    "destinationType": "time",
                    "targetField": "closed_at"
                  },
                  {
                    "dateFormat": "YYYY-MM-DD hh:mm:s.S",
                    "destinationType": "time",
                    "targetField": "created_at"
                  }
                ],
                "fields": {}
              }
            },
            {
              "id": "calculateField",
              "options": {
                "alias": "time to resolve (ms)",
                "binary": {
                  "left": "closed_at",
                  "operator": "-",
                  "right": "created_at"
                },
                "mode": "binary",
                "reduce": {
                  "reducer": "sum"
                }
              }
            },
            {
              "id": "calculateField",
              "options": {
                "alias": "time to resolve (s)",
                "binary": {
                  "left": "time to resolve (ms)",
                  "operator": "/",
                  "right": "1000"
                },
                "mode": "binary",
                "reduce": {
                  "reducer": "sum"
                }
              }
            },
            {
              "id": "calculateField",
              "options": {
                "alias": "time to resolve (hrs)",
                "binary": {
                  "left": "time to resolve (s)",
                  "operator": "/",
                  "right": "3600"
                },
                "mode": "binary",
                "reduce": {
                  "reducer": "sum"
                }
              }
            },
            {
              "id": "organize",
              "options": {
                "excludeByName": {
                  "Line": true,
                  "Time": true,
                  "action": true,
                  "created_at": true,
                  "exporter": true,
                  "id": true,
                  "issue_labels": true,
                  "labels": true,
                  "merged_at": true,
                  "name": true,
                  "repository_name": true,
                  "repository_owner": true,
                  "sha": true,
                  "status": true,
                  "time to resolve (ms)": true,
                  "time to resolve (s)": true,
                  "title": true,
                  "tsNs": true,
                  "user": true
                },
                "indexByName": {
                  "Line": 11,
                  "Time": 10,
                  "action": 3,
                  "closed_at": 2,
                  "created_at": 1,
                  "exporter": 14,
                  "id": 13,
                  "issue_labels": 18,
                  "labels": 9,
                  "name": 15,
                  "repository_name": 6,
                  "repository_owner": 7,
                  "status": 16,
                  "time to resolve (hrs)": 8,
                  "time to resolve (ms)": 4,
                  "time to resolve (s)": 5,
                  "title": 0,
                  "tsNs": 12,
                  "user": 17
                },
                "renameByName": {
                  "title": "Issue"
                }
              }
            }
          ],
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "loki",
            "uid": "loki"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 8,
            "x": 16,
            "y": 18
          },
          "id": 25,
          "options": {
            "minVizHeight": 75,
            "minVizWidth": 75,
            "orientation": "auto",
            "reduceOptions": {
              "calcs": [],
              "fields": "",
              "values": false
            },
            "showThresholdLabels": false,
            "showThresholdMarkers": true,
            "sizing": "auto"
          },
          "pluginVersion": "10.2.3",
          "targets": [
            {
              "datasource": {
                "type": "loki",
                "uid": "loki"
              },
              "editorMode": "code",
              "expr": "{repository_name=~\"$repo\",repository_owner=~\"$organization\"}",
              "queryType": "range",
              "refId": "A"
            }
          ],
          "title": "Average Time to Restore Service",
          "transformations": [
            {
              "id": "extractFields",
              "options": {
                "format": "kvp",
                "source": "labels"
              }
            },
            {
              "id": "filterByValue",
              "options": {
                "filters": [
                  {
                    "config": {
                      "id": "equal",
                      "options": {
                        "value": "closed"
                      }
                    },
                    "fieldName": "action"
                  }
                ],
                "match": "all",
                "type": "include"
              }
            },
            {
              "id": "convertFieldType",
              "options": {
                "conversions": [
                  {
                    "dateFormat": "YYYY-MM-DD hh:mm:s.S",
                    "destinationType": "time",
                    "targetField": "closed_at"
                  },
                  {
                    "dateFormat": "YYYY-MM-DD hh:mm:s.S",
                    "destinationType": "time",
                    "targetField": "created_at"
                  }
                ],
                "fields": {}
              }
            },
            {
              "id": "calculateField",
              "options": {
                "alias": "time to resolve (ms)",
                "binary": {
                  "left": "closed_at",
                  "operator": "-",
                  "right": "created_at"
                },
                "mode": "binary",
                "reduce": {
                  "reducer": "sum"
                }
              }
            },
            {
              "id": "calculateField",
              "options": {
                "alias": "time to resolve (s)",
                "binary": {
                  "left": "time to resolve (ms)",
                  "operator": "/",
                  "right": "1000"
                },
                "mode": "binary",
                "reduce": {
                  "reducer": "sum"
                }
              }
            },
            {
              "id": "calculateField",
              "options": {
                "alias": "time to resolve (hrs)",
                "binary": {
                  "left": "time to resolve (s)",
                  "operator": "/",
                  "right": "3600"
                },
                "mode": "binary",
                "reduce": {
                  "reducer": "sum"
                }
              }
            },
            {
              "id": "organize",
              "options": {
                "excludeByName": {
                  "Line": true,
                  "Time": true,
                  "action": true,
                  "closed_at": true,
                  "created_at": true,
                  "exporter": true,
                  "id": true,
                  "issue_labels": true,
                  "labels": true,
                  "merged_at": true,
                  "name": true,
                  "repository_name": true,
                  "repository_owner": true,
                  "sha": true,
                  "status": true,
                  "time to resolve (hrs)": false,
                  "time to resolve (ms)": true,
                  "time to resolve (s)": true,
                  "title": true,
                  "tsNs": true,
                  "user": true
                },
                "indexByName": {
                  "action": 2,
                  "closed_at": 1,
                  "created_at": 0,
                  "repository_name": 5,
                  "repository_owner": 6,
                  "time to resolve (hrs)": 7,
                  "time to resolve (ms)": 3,
                  "time to resolve (s)": 4
                },
                "renameByName": {
                  "title": "Issue"
                }
              }
            },
            {
              "id": "reduce",
              "options": {
                "reducers": [
                  "mean"
                ]
              }
            }
          ],
          "type": "gauge"
        },
        {
          "gridPos": {
            "h": 1,
            "w": 24,
            "x": 0,
            "y": 26
          },
          "id": 11,
          "title": "Deployment Frequency",
          "type": "row"
        },
        {
          "datasource": {
            "type": "loki",
            "uid": "loki"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "custom": {
                "align": "auto",
                "cellOptions": {
                  "type": "auto"
                },
                "inspect": false
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 7,
            "w": 8,
            "x": 0,
            "y": 27
          },
          "id": 17,
          "options": {
            "cellHeight": "sm",
            "footer": {
              "countRows": false,
              "fields": "",
              "reducer": [
                "sum"
              ],
              "show": false
            },
            "showHeader": true
          },
          "pluginVersion": "10.2.3",
          "targets": [
            {
              "datasource": {
                "type": "loki",
                "uid": "loki"
              },
              "editorMode": "code",
              "expr": "{status=\"success\",repository_name=~\"$repo\",repository_owner=~\"$organization\"}",
              "queryType": "range",
              "refId": "A"
            }
          ],
          "title": "Logs",
          "transformations": [
            {
              "id": "extractFields",
              "options": {
                "format": "kvp",
                "jsonPaths": [
                  {
                    "path": ""
                  }
                ],
                "keepTime": false,
                "replace": true,
                "source": "labels"
              }
            },
            {
              "id": "organize",
              "options": {
                "excludeByName": {
                  "exporter": true,
                  "name": false,
                  "status": true,
                  "user": true
                },
                "indexByName": {},
                "renameByName": {}
              }
            }
          ],
          "type": "table"
        },
        {
          "datasource": {
            "type": "loki",
            "uid": "loki"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 7,
            "w": 8,
            "x": 8,
            "y": 27
          },
          "id": 16,
          "options": {
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "10.2.2",
          "targets": [
            {
              "datasource": {
                "type": "loki",
                "uid": "loki"
              },
              "editorMode": "code",
              "expr": "{status=\"success\", repository_name=~\"$repo\", repository_owner=~\"$organization\"}",
              "queryType": "range",
              "refId": "A"
            }
          ],
          "title": "Deployments Over Time",
          "transformations": [
            {
              "id": "extractFields",
              "options": {
                "format": "kvp",
                "jsonPaths": [
                  {
                    "path": ""
                  }
                ],
                "keepTime": false,
                "replace": true,
                "source": "labels"
              }
            },
            {
              "id": "convertFieldType",
              "options": {
                "conversions": [
                  {
                    "destinationType": "time",
                    "targetField": "created_at"
                  }
                ],
                "fields": {}
              }
            },
            {
              "id": "sortBy",
              "options": {
                "fields": {},
                "sort": [
                  {
                    "desc": false,
                    "field": "created_at"
                  }
                ]
              }
            },
            {
              "id": "calculateField",
              "options": {
                "binary": {
                  "left": "created_at",
                  "operator": "+"
                },
                "index": {
                  "asPercentile": false
                },
                "mode": "index",
                "reduce": {
                  "reducer": "sum"
                },
                "replaceFields": false
              }
            },
            {
              "id": "calculateField",
              "options": {
                "alias": "count",
                "binary": {
                  "left": "Row",
                  "operator": "+",
                  "right": "1"
                },
                "mode": "binary",
                "reduce": {
                  "reducer": "sum"
                },
                "replaceFields": false
              }
            },
            {
              "id": "organize",
              "options": {
                "excludeByName": {
                  "Row": true,
                  "exporter": true,
                  "name": true,
                  "repository_name": true,
                  "status": true,
                  "user": true
                },
                "indexByName": {},
                "renameByName": {}
              }
            }
          ],
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "loki",
            "uid": "loki"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 7,
            "w": 8,
            "x": 16,
            "y": 27
          },
          "id": 7,
          "options": {
            "minVizHeight": 75,
            "minVizWidth": 75,
            "orientation": "auto",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "",
              "values": false
            },
            "showThresholdLabels": false,
            "showThresholdMarkers": true,
            "sizing": "auto"
          },
          "pluginVersion": "10.2.3",
          "targets": [
            {
              "datasource": {
                "type": "loki",
                "uid": "loki"
              },
              "editorMode": "code",
              "expr": "{status=\"success\", repository_name=~\"$repo\", repository_owner=~\"$organization\"}",
              "queryType": "range",
              "refId": "A"
            }
          ],
          "title": "Frequency",
          "transformations": [
            {
              "id": "extractFields",
              "options": {
                "format": "kvp",
                "jsonPaths": [
                  {
                    "path": ""
                  }
                ],
                "keepTime": false,
                "replace": true,
                "source": "labels"
              }
            },
            {
              "id": "convertFieldType",
              "options": {
                "conversions": [
                  {
                    "destinationType": "time",
                    "targetField": "created_at"
                  }
                ],
                "fields": {}
              }
            },
            {
              "id": "sortBy",
              "options": {
                "fields": {},
                "sort": [
                  {
                    "desc": false,
                    "field": "created_at"
                  }
                ]
              }
            },
            {
              "id": "calculateField",
              "options": {
                "binary": {
                  "left": "created_at",
                  "operator": "+"
                },
                "index": {
                  "asPercentile": false
                },
                "mode": "index",
                "reduce": {
                  "reducer": "sum"
                },
                "replaceFields": false
              }
            },
            {
              "id": "calculateField",
              "options": {
                "alias": "count",
                "binary": {
                  "left": "Row",
                  "operator": "+",
                  "right": "1"
                },
                "mode": "binary",
                "reduce": {
                  "reducer": "sum"
                },
                "replaceFields": false
              }
            },
            {
              "id": "organize",
              "options": {
                "excludeByName": {
                  "Row": true,
                  "exporter": true,
                  "name": true,
                  "repository_name": true,
                  "status": true,
                  "user": true
                },
                "indexByName": {},
                "renameByName": {}
              }
            }
          ],
          "type": "gauge"
        }
      ],
      "refresh": "5s",
      "schemaVersion": 39,
      "tags": [],
      "templating": {
        "list": [
          {
            "current": {
              "selected": false,
              "text": "All",
              "value": "$__all"
            },
            "datasource": {
              "type": "loki",
              "uid": "loki"
            },
            "definition": "",
            "hide": 0,
            "includeAll": true,
            "multi": true,
            "name": "organization",
            "options": [],
            "query": {
              "label": "repository_owner",
              "refId": "LokiVariableQueryEditor-VariableQuery",
              "stream": "",
              "type": 1
            },
            "refresh": 1,
            "regex": "",
            "skipUrlSync": false,
            "sort": 0,
            "type": "query"
          },
          {
            "current": {
              "selected": false,
              "text": "All",
              "value": "$__all"
            },
            "datasource": {
              "type": "loki",
              "uid": "loki"
            },
            "definition": "",
            "hide": 0,
            "includeAll": true,
            "multi": true,
            "name": "repo",
            "options": [],
            "query": {
              "label": "repository_name",
              "refId": "LokiVariableQueryEditor-VariableQuery",
              "stream": "",
              "type": 1
            },
            "refresh": 1,
            "regex": "",
            "skipUrlSync": false,
            "sort": 0,
            "type": "query"
          }
        ]
      },
      "time": {
        "from": "now-1h",
        "to": "now"
      },
      "timepicker": {},
      "timezone": "",
      "title": "DORA Demo Dashboard",
      "uid": "bddfc8a2-3a88-4468-8862-d1dff2a92460",
      "version": 1,
      "weekStart": ""
    }
kind: ConfigMap
metadata:
  labels:
    app.kubernetes.io/name: grafana
  name: dashboard-gpr-dora-metrics-9tgdd45m7k
  namespace: grafana
---
apiVersion: v1
data:
  engineering-effectiveness-metrics.json: |
    {
      "annotations": {
        "list": [
          {
            "builtIn": 1,
            "datasource": {
              "type": "grafana",
              "uid": "-- Grafana --"
            },
            "enable": true,
            "hide": true,
            "iconColor": "rgba(0, 211, 255, 1)",
            "name": "Annotations & Alerts",
            "target": {
              "limit": 100,
              "matchAny": false,
              "tags": [],
              "type": "dashboard"
            },
            "type": "dashboard"
          }
        ]
      },
      "editable": true,
      "fiscalYearStartMonth": 0,
      "graphTooltip": 0,
      "id": 11,
      "links": [],
      "liveNow": false,
      "panels": [
        {
          "collapsed": false,
          "gridPos": {
            "h": 1,
            "w": 24,
            "x": 0,
            "y": 0
          },
          "id": 15,
          "panels": [],
          "title": "Trunk Based Development",
          "type": "row"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "displayName": "{repository_name}",
              "fieldMinMax": false,
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "#EAB839",
                    "value": 7
                  },
                  {
                    "color": "orange",
                    "value": 10
                  },
                  {
                    "color": "red",
                    "value": 11
                  }
                ]
              },
              "unit": "d"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 7,
            "w": 7,
            "x": 0,
            "y": 1
          },
          "id": 17,
          "options": {
            "colorMode": "background",
            "graphMode": "area",
            "justifyMode": "auto",
            "orientation": "auto",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "",
              "values": false
            },
            "showPercentChange": false,
            "textMode": "value",
            "wideLayout": true
          },
          "pluginVersion": "10.4.3",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "webstore-metrics"
              },
              "disableTextWrap": false,
              "editorMode": "builder",
              "exemplar": false,
              "expr": "avg by(team_name) (git_repository_branch_time_seconds{organization_name=~\"$organization\", repository_name=~\"$repo\", team_name=~\"$team\"}) / 86400",
              "format": "time_series",
              "fullMetaSearch": false,
              "includeNullMetadata": true,
              "instant": false,
              "legendFormat": "__auto",
              "range": true,
              "refId": "A",
              "useBackend": false
            }
          ],
          "title": "Average Branch Age (Days)",
          "type": "stat"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": true,
                "axisCenteredZero": false,
                "axisColorMode": "series",
                "axisLabel": "",
                "axisPlacement": "left",
                "barAlignment": 0,
                "drawStyle": "line",
                "fillOpacity": 50,
                "gradientMode": "opacity",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "smooth",
                "lineWidth": 2,
                "pointSize": 4,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "always",
                "spanNulls": true,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "fieldMinMax": false,
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "#EAB839",
                    "value": 7
                  },
                  {
                    "color": "orange",
                    "value": 10
                  },
                  {
                    "color": "red",
                    "value": 11
                  }
                ]
              },
              "unit": "s"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 7,
            "w": 17,
            "x": 7,
            "y": 1
          },
          "id": 19,
          "options": {
            "legend": {
              "calcs": [],
              "displayMode": "table",
              "placement": "right",
              "showLegend": true,
              "sortBy": "Name",
              "sortDesc": false
            },
            "tooltip": {
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "11.1.0-69372",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "webstore-metrics"
              },
              "disableTextWrap": false,
              "editorMode": "code",
              "exemplar": false,
              "expr": "git_repository_branch_time_seconds{organization_name=\"$organization\", repository_name=~\"$repo\", team_name=~\"$team\"}",
              "format": "time_series",
              "fullMetaSearch": false,
              "includeNullMetadata": true,
              "instant": false,
              "legendFormat": "{{{{organization_name}}/{{repository_name}}/{{branch_name}}}}",
              "range": true,
              "refId": "A",
              "useBackend": false
            }
          ],
          "title": "Average Branch Age (Days)",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "description": "Average Open Branches",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "fieldMinMax": false,
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "#EAB839",
                    "value": 5
                  },
                  {
                    "color": "red",
                    "value": 7
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 7,
            "w": 7,
            "x": 0,
            "y": 8
          },
          "id": 18,
          "options": {
            "colorMode": "background",
            "graphMode": "area",
            "justifyMode": "auto",
            "orientation": "auto",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "",
              "values": false
            },
            "showPercentChange": false,
            "textMode": "value",
            "wideLayout": true
          },
          "pluginVersion": "10.4.3",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "webstore-metrics"
              },
              "disableTextWrap": false,
              "editorMode": "code",
              "exemplar": false,
              "expr": "avg by(team_name) (git_repository_branch_count{organization_name=~\"$organization\", repository_name=~\"$repo\", team_name=~\"$team\"})",
              "format": "time_series",
              "fullMetaSearch": false,
              "includeNullMetadata": true,
              "instant": false,
              "interval": "",
              "legendFormat": "__auto",
              "range": true,
              "refId": "A",
              "useBackend": false
            }
          ],
          "title": "Average Open Branches",
          "type": "stat"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "#EAB839",
                    "value": 5
                  },
                  {
                    "color": "red",
                    "value": 7
                  }
                ]
              },
              "unit": "Branches"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 7,
            "w": 17,
            "x": 7,
            "y": 8
          },
          "id": 16,
          "options": {
            "displayMode": "lcd",
            "maxVizHeight": 300,
            "minVizHeight": 16,
            "minVizWidth": 8,
            "namePlacement": "auto",
            "orientation": "horizontal",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "",
              "values": false
            },
            "showUnfilled": true,
            "sizing": "auto",
            "valueMode": "text"
          },
          "pluginVersion": "10.4.3",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "webstore-metrics"
              },
              "disableTextWrap": false,
              "editorMode": "code",
              "exemplar": false,
              "expr": "avg by(repository_name) (git_repository_branch_count{organization_name=~\"$organization\", repository_name=~\"$repo\", team_name=~\"$team\"} > 1)",
              "format": "time_series",
              "fullMetaSearch": false,
              "includeNullMetadata": true,
              "instant": false,
              "legendFormat": "__auto",
              "range": true,
              "refId": "A",
              "useBackend": false
            }
          ],
          "title": "Open Branches",
          "type": "bargauge"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "#EAB839",
                    "value": 7
                  },
                  {
                    "color": "orange",
                    "value": 10
                  },
                  {
                    "color": "red",
                    "value": 11
                  }
                ]
              },
              "unit": "d"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 7,
            "w": 7,
            "x": 0,
            "y": 15
          },
          "id": 21,
          "options": {
            "colorMode": "background",
            "graphMode": "area",
            "justifyMode": "auto",
            "orientation": "auto",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "",
              "values": false
            },
            "showPercentChange": false,
            "textMode": "auto",
            "wideLayout": true
          },
          "pluginVersion": "10.4.3",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "webstore-metrics"
              },
              "disableTextWrap": false,
              "editorMode": "builder",
              "expr": "avg by(team_name) (git_repository_pull_request_time_open_seconds{organization_name=\"$organization\", repository_name=~\"$repo\", team_name=~\"$team\"}) / 86400",
              "fullMetaSearch": false,
              "includeNullMetadata": true,
              "instant": false,
              "key": "Q-0b7776a7-47df-4758-b3ba-2640342f1db9-0",
              "legendFormat": "__auto",
              "range": true,
              "refId": "A",
              "useBackend": false
            }
          ],
          "title": "Average Open Pull Request Duration (Days)",
          "type": "stat"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": true,
                "axisCenteredZero": false,
                "axisColorMode": "series",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "drawStyle": "line",
                "fillOpacity": 50,
                "gradientMode": "opacity",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "smooth",
                "lineWidth": 2,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "never",
                "spanNulls": true,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  }
                ]
              },
              "unit": "d"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 7,
            "w": 17,
            "x": 7,
            "y": 15
          },
          "id": 20,
          "options": {
            "legend": {
              "calcs": [],
              "displayMode": "table",
              "placement": "right",
              "showLegend": true
            },
            "tooltip": {
              "maxHeight": 600,
              "mode": "single",
              "sort": "none"
            }
          },
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "webstore-metrics"
              },
              "disableTextWrap": false,
              "editorMode": "builder",
              "expr": "git_repository_pull_request_time_open_seconds{organization_name=~\"$organization\", repository_name=~\"$repo\", team_name=~\"$team\"} / 86400",
              "fullMetaSearch": false,
              "includeNullMetadata": true,
              "instant": false,
              "key": "Q-0b7776a7-47df-4758-b3ba-2640342f1db9-0",
              "legendFormat": "{{organization_name}}/{{repository_name}}/{{branch_name}}",
              "range": true,
              "refId": "A",
              "useBackend": false
            }
          ],
          "title": "Open Pull Request Age",
          "type": "timeseries"
        },
        {
          "collapsed": false,
          "gridPos": {
            "h": 1,
            "w": 24,
            "x": 0,
            "y": 22
          },
          "id": 22,
          "panels": [],
          "title": "Build In Security",
          "type": "row"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "mappings": [],
              "noValue": "0",
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 1
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 7,
            "w": 7,
            "x": 0,
            "y": 23
          },
          "id": 25,
          "options": {
            "colorMode": "background",
            "graphMode": "area",
            "justifyMode": "auto",
            "orientation": "auto",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "",
              "values": false
            },
            "showPercentChange": false,
            "textMode": "auto",
            "wideLayout": true
          },
          "pluginVersion": "10.4.3",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "webstore-metrics"
              },
              "disableTextWrap": false,
              "editorMode": "builder",
              "expr": "avg by(cve_severity) (git_repository_cve_count{organization_name=~\"$organization\", team_name=~\"$team\", repository_name=~\"$repo\", cve_severity=\"critical\"})",
              "fullMetaSearch": false,
              "includeNullMetadata": true,
              "instant": false,
              "legendFormat": "__auto",
              "range": true,
              "refId": "A",
              "useBackend": false
            }
          ],
          "title": "Critical Vulnerabilities (CVEs)",
          "type": "stat"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "continuous-GrYlRd"
              },
              "mappings": [],
              "noValue": "0",
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 14,
            "w": 17,
            "x": 7,
            "y": 23
          },
          "id": 26,
          "options": {
            "displayMode": "basic",
            "maxVizHeight": 300,
            "minVizHeight": 16,
            "minVizWidth": 8,
            "namePlacement": "auto",
            "orientation": "horizontal",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "",
              "values": false
            },
            "showUnfilled": true,
            "sizing": "auto",
            "text": {},
            "valueMode": "color"
          },
          "pluginVersion": "10.4.3",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "webstore-metrics"
              },
              "disableTextWrap": false,
              "editorMode": "builder",
              "exemplar": false,
              "expr": "sum by(repository_name) (git_repository_cve_count{organization_name=~\"$organization\", team_name=~\"$team\", repository_name=~\"$repo\"})",
              "format": "time_series",
              "fullMetaSearch": false,
              "includeNullMetadata": true,
              "instant": false,
              "legendFormat": "{{label_name}}",
              "range": true,
              "refId": "A",
              "useBackend": false
            }
          ],
          "title": "Vulnerabilities by Repo",
          "type": "bargauge"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "mappings": [],
              "noValue": "0",
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "#EAB839",
                    "value": 1
                  },
                  {
                    "color": "orange",
                    "value": 3
                  },
                  {
                    "color": "red",
                    "value": 5
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 7,
            "w": 7,
            "x": 0,
            "y": 30
          },
          "id": 24,
          "options": {
            "colorMode": "background",
            "graphMode": "area",
            "justifyMode": "auto",
            "orientation": "auto",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "",
              "values": false
            },
            "showPercentChange": false,
            "textMode": "auto",
            "wideLayout": true
          },
          "pluginVersion": "10.4.3",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "webstore-metrics"
              },
              "disableTextWrap": false,
              "editorMode": "builder",
              "expr": "avg by(cve_severity) (git_repository_cve_count{organization_name=~\"$organization\", team_name=~\"$team\", repository_name=~\"$repo\", cve_severity=\"high\"})",
              "fullMetaSearch": false,
              "includeNullMetadata": true,
              "instant": false,
              "legendFormat": "__auto",
              "range": true,
              "refId": "A",
              "useBackend": false
            }
          ],
          "title": "High Vulnerabilities (CVEs)",
          "type": "stat"
        },
        {
          "collapsed": false,
          "gridPos": {
            "h": 1,
            "w": 24,
            "x": 0,
            "y": 37
          },
          "id": 14,
          "panels": [],
          "title": "Detailed Git Metrics",
          "type": "row"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "orange",
                    "value": 10
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 6,
            "w": 3,
            "x": 0,
            "y": 38
          },
          "id": 3,
          "options": {
            "colorMode": "value",
            "graphMode": "area",
            "justifyMode": "auto",
            "orientation": "horizontal",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "",
              "values": false
            },
            "showPercentChange": false,
            "textMode": "auto",
            "wideLayout": true
          },
          "pluginVersion": "10.4.3",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "webstore-metrics"
              },
              "disableTextWrap": false,
              "editorMode": "builder",
              "expr": "git_repository_count{organization_name=\"$organization\", team_name=~\"$team\"}",
              "fullMetaSearch": false,
              "includeNullMetadata": true,
              "instant": false,
              "key": "Q-02c41670-371f-491d-a64b-bc9b29c20bc3-0",
              "legendFormat": "{{organization_name}}",
              "range": true,
              "refId": "A",
              "useBackend": false
            }
          ],
          "title": "Repo Count",
          "type": "stat"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "yellow",
                    "value": 5
                  },
                  {
                    "color": "dark-red",
                    "value": 7
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 6,
            "w": 4,
            "x": 3,
            "y": 38
          },
          "id": 7,
          "options": {
            "minVizHeight": 200,
            "minVizWidth": 200,
            "orientation": "auto",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "",
              "values": false
            },
            "showThresholdLabels": false,
            "showThresholdMarkers": true,
            "sizing": "auto"
          },
          "pluginVersion": "10.4.3",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "webstore-metrics"
              },
              "disableTextWrap": false,
              "editorMode": "code",
              "exemplar": false,
              "expr": "ceil(avg by(team_name) (git_repository_branch_count{organization_name=~\"$organization\", repository_name=~\"$repo\", team_name=~\"$team\"} > 1))",
              "fullMetaSearch": false,
              "includeNullMetadata": true,
              "instant": false,
              "key": "Q-12be8e8c-5d52-4ee5-8ea8-7b4a5dfbac4f-0",
              "legendFormat": "{{organization_name}}",
              "range": true,
              "refId": "A",
              "useBackend": false
            }
          ],
          "title": "Average Branch Count",
          "type": "gauge"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "fieldMinMax": false,
              "mappings": [],
              "max": 11,
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "yellow",
                    "value": 7
                  },
                  {
                    "color": "orange",
                    "value": 10
                  },
                  {
                    "color": "red",
                    "value": 11
                  }
                ]
              },
              "unit": "d"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 6,
            "w": 17,
            "x": 7,
            "y": 38
          },
          "id": 6,
          "options": {
            "minVizHeight": 200,
            "minVizWidth": 200,
            "orientation": "auto",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "",
              "values": false
            },
            "showThresholdLabels": false,
            "showThresholdMarkers": false,
            "sizing": "auto",
            "text": {}
          },
          "pluginVersion": "10.4.3",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "webstore-metrics"
              },
              "disableTextWrap": false,
              "editorMode": "builder",
              "expr": "avg by(repository_name) (git_repository_branch_time_seconds{organization_name=\"$organization\", repository_name=~\"$repo\", team_name=~\"$team\"}) / 86400",
              "fullMetaSearch": false,
              "includeNullMetadata": true,
              "instant": false,
              "key": "Q-12be8e8c-5d52-4ee5-8ea8-7b4a5dfbac4f-0",
              "legendFormat": "{{repository_name}}",
              "range": true,
              "refId": "A",
              "useBackend": false
            }
          ],
          "title": "Average Branch Age Per Repo In Days",
          "type": "gauge"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": true,
                "axisCenteredZero": false,
                "axisColorMode": "series",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "drawStyle": "line",
                "fillOpacity": 50,
                "gradientMode": "opacity",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "smooth",
                "lineWidth": 2,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": true,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 9,
            "w": 12,
            "x": 0,
            "y": 44
          },
          "id": 8,
          "options": {
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "right",
              "showLegend": true
            },
            "tooltip": {
              "maxHeight": 600,
              "mode": "single",
              "sort": "none"
            }
          },
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "webstore-metrics"
              },
              "disableTextWrap": false,
              "editorMode": "builder",
              "expr": "git_repository_contributor_count{organization_name=\"$organization\", repository_name=~\"$repo\", team_name=~\"$team\"}",
              "fullMetaSearch": false,
              "includeNullMetadata": true,
              "instant": false,
              "key": "Q-08537169-6de5-41f1-b2d6-693fc148edad-0",
              "legendFormat": "{{organization_name}}/{{repository_name}}",
              "range": true,
              "refId": "A",
              "useBackend": false
            }
          ],
          "title": "Contributor Count",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": true,
                "axisCenteredZero": false,
                "axisColorMode": "series",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "drawStyle": "line",
                "fillOpacity": 50,
                "gradientMode": "opacity",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "smooth",
                "lineStyle": {
                  "fill": "solid"
                },
                "lineWidth": 2,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": true,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 9,
            "w": 12,
            "x": 12,
            "y": 44
          },
          "id": 2,
          "options": {
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "right",
              "showLegend": true
            },
            "tooltip": {
              "maxHeight": 600,
              "mode": "single",
              "sort": "none"
            }
          },
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "webstore-metrics"
              },
              "disableTextWrap": false,
              "editorMode": "code",
              "expr": "git_repository_branch_count{organization_name=\"$organization\", repository_name=~\"$repo\", team_name=~\"$team\"} - 1",
              "fullMetaSearch": false,
              "includeNullMetadata": true,
              "instant": false,
              "key": "Q-12be8e8c-5d52-4ee5-8ea8-7b4a5dfbac4f-0",
              "legendFormat": "{{organization_name}}/{{repository_name}}",
              "range": true,
              "refId": "A",
              "useBackend": false
            }
          ],
          "title": "Branch Count",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": true,
                "axisCenteredZero": false,
                "axisColorMode": "series",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "drawStyle": "line",
                "fillOpacity": 50,
                "gradientMode": "opacity",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "smooth",
                "lineWidth": 2,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "never",
                "spanNulls": true,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  }
                ]
              },
              "unit": "s"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 0,
            "y": 53
          },
          "id": 1,
          "options": {
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "right",
              "showLegend": true
            },
            "tooltip": {
              "maxHeight": 600,
              "mode": "single",
              "sort": "none"
            }
          },
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "webstore-metrics"
              },
              "disableTextWrap": false,
              "editorMode": "code",
              "expr": "git_repository_branch_time_seconds{organization_name=\"$organization\", repository_name=~\"$repo\", team_name=~\"$team\"}",
              "fullMetaSearch": false,
              "includeNullMetadata": true,
              "instant": false,
              "key": "Q-0b7776a7-47df-4758-b3ba-2640342f1db9-0",
              "legendFormat": "{{organization_name}}/{{repository_name}}/{{branch_name}}",
              "range": true,
              "refId": "A",
              "useBackend": false
            }
          ],
          "title": "Branch Age",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": true,
                "axisCenteredZero": false,
                "axisColorMode": "series",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "drawStyle": "line",
                "fillOpacity": 43,
                "gradientMode": "opacity",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "smooth",
                "lineWidth": 2,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "never",
                "spanNulls": true,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 12,
            "y": 53
          },
          "id": 9,
          "options": {
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "right",
              "showLegend": true
            },
            "tooltip": {
              "maxHeight": 600,
              "mode": "single",
              "sort": "none"
            }
          },
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "webstore-metrics"
              },
              "disableTextWrap": false,
              "editorMode": "code",
              "expr": "git_repository_pull_request_count{pull_request_state=\"open\", organization_name=\"$organization\", repository_name=~\"$repo\"}",
              "fullMetaSearch": false,
              "includeNullMetadata": true,
              "instant": false,
              "key": "Q-0b7776a7-47df-4758-b3ba-2640342f1db9-0",
              "legendFormat": "{{organization_name}}/{{repository_name}}",
              "range": true,
              "refId": "A",
              "useBackend": false
            }
          ],
          "title": "Open Pull Request Count",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": true,
                "axisCenteredZero": false,
                "axisColorMode": "series",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "drawStyle": "line",
                "fillOpacity": 50,
                "gradientMode": "opacity",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "smooth",
                "lineWidth": 2,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "never",
                "spanNulls": true,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  }
                ]
              },
              "unit": "s"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 9,
            "w": 12,
            "x": 0,
            "y": 61
          },
          "id": 10,
          "options": {
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "right",
              "showLegend": true
            },
            "tooltip": {
              "maxHeight": 600,
              "mode": "single",
              "sort": "none"
            }
          },
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "webstore-metrics"
              },
              "disableTextWrap": false,
              "editorMode": "builder",
              "expr": "git_repository_pull_request_time_open_seconds{organization_name=\"$organization\", repository_name=~\"$repo\", team_name=~\"$team\"}",
              "fullMetaSearch": false,
              "includeNullMetadata": true,
              "instant": false,
              "key": "Q-0b7776a7-47df-4758-b3ba-2640342f1db9-0",
              "legendFormat": "{{organization_name}}/{{repository_name}}/{{branch_name}}",
              "range": true,
              "refId": "A",
              "useBackend": false
            }
          ],
          "title": "Open Pull Request Age",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": true,
                "axisCenteredZero": false,
                "axisColorMode": "series",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "drawStyle": "line",
                "fillOpacity": 50,
                "gradientMode": "opacity",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "smooth",
                "lineWidth": 2,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": true,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  }
                ]
              },
              "unit": "s"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 9,
            "w": 12,
            "x": 12,
            "y": 61
          },
          "id": 13,
          "options": {
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "right",
              "showLegend": true
            },
            "tooltip": {
              "maxHeight": 600,
              "mode": "single",
              "sort": "none"
            }
          },
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "webstore-metrics"
              },
              "disableTextWrap": false,
              "editorMode": "builder",
              "expr": "git_repository_pull_request_time_to_approval_seconds{organization_name=~\"$organization\", repository_name=~\"$repo\", team_name=~\"$team\"}",
              "fullMetaSearch": false,
              "includeNullMetadata": true,
              "instant": false,
              "key": "Q-0b7776a7-47df-4758-b3ba-2640342f1db9-0",
              "legendFormat": "{{organization_name}}/{{repository_name}}/{{branch_name}}",
              "range": true,
              "refId": "A",
              "useBackend": false
            }
          ],
          "title": "Approved Pull Request Age",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": true,
                "axisCenteredZero": false,
                "axisColorMode": "series",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "drawStyle": "line",
                "fillOpacity": 50,
                "gradientMode": "opacity",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "smooth",
                "lineWidth": 2,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "never",
                "spanNulls": true,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 9,
            "w": 12,
            "x": 0,
            "y": 70
          },
          "id": 11,
          "options": {
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "right",
              "showLegend": true
            },
            "tooltip": {
              "maxHeight": 600,
              "mode": "single",
              "sort": "none"
            }
          },
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "webstore-metrics"
              },
              "disableTextWrap": false,
              "editorMode": "builder",
              "expr": "git_repository_pull_request_count{pull_request_state=\"merged\", organization_name=~\"$organization\", repository_name=~\"$repo\", team_name=~\"$team\"}",
              "fullMetaSearch": false,
              "includeNullMetadata": true,
              "instant": false,
              "key": "Q-0b7776a7-47df-4758-b3ba-2640342f1db9-0",
              "legendFormat": "{{organization_name}}/{{repository_name}}",
              "range": true,
              "refId": "A",
              "useBackend": false
            }
          ],
          "title": "Merged Pull Request Count",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": true,
                "axisCenteredZero": false,
                "axisColorMode": "series",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "drawStyle": "line",
                "fillOpacity": 50,
                "gradientMode": "opacity",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "smooth",
                "lineWidth": 2,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "never",
                "spanNulls": true,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  }
                ]
              },
              "unit": "s"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 9,
            "w": 12,
            "x": 12,
            "y": 70
          },
          "id": 12,
          "options": {
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "right",
              "showLegend": true
            },
            "tooltip": {
              "maxHeight": 600,
              "mode": "single",
              "sort": "none"
            }
          },
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "webstore-metrics"
              },
              "disableTextWrap": false,
              "editorMode": "builder",
              "expr": "git_repository_pull_request_time_to_merge_seconds{organization_name=~\"$organization\", repository_name=~\"$repo\", team_name=~\"$team\"}",
              "fullMetaSearch": false,
              "includeNullMetadata": true,
              "instant": false,
              "key": "Q-0b7776a7-47df-4758-b3ba-2640342f1db9-0",
              "legendFormat": "{{organization_name}}/{{repository_name}}/{{branch_name}}",
              "range": true,
              "refId": "A",
              "useBackend": false
            }
          ],
          "title": "Merged Pull Request Age",
          "type": "timeseries"
        }
      ],
      "refresh": "",
      "revision": 1,
      "schemaVersion": 39,
      "tags": [],
      "templating": {
        "list": [
          {
            "current": {
              "selected": false,
              "text": "All",
              "value": "$__all"
            },
            "datasource": {
              "type": "prometheus",
              "uid": "webstore-metrics"
            },
            "definition": "label_values(organization_name)",
            "description": "The organization name resource attribute for metrics. ",
            "hide": 0,
            "includeAll": true,
            "label": "organization",
            "multi": true,
            "name": "organization",
            "options": [],
            "query": {
              "qryType": 1,
              "query": "label_values(organization_name)",
              "refId": "PrometheusVariableQueryEditor-VariableQuery"
            },
            "refresh": 1,
            "regex": "",
            "skipUrlSync": false,
            "sort": 0,
            "type": "query"
          },
          {
            "current": {
              "selected": false,
              "text": "All",
              "value": "$__all"
            },
            "datasource": {
              "type": "prometheus",
              "uid": "webstore-metrics"
            },
            "definition": "label_values({organization_name=\"$organization\"},team_name)",
            "description": "The name of the team ",
            "hide": 0,
            "includeAll": true,
            "label": "team",
            "multi": true,
            "name": "team",
            "options": [],
            "query": {
              "qryType": 1,
              "query": "label_values({organization_name=\"$organization\"},team_name)",
              "refId": "PrometheusVariableQueryEditor-VariableQuery"
            },
            "refresh": 1,
            "regex": "",
            "skipUrlSync": false,
            "sort": 0,
            "type": "query"
          },
          {
            "current": {
              "selected": false,
              "text": "All",
              "value": "$__all"
            },
            "datasource": {
              "type": "prometheus",
              "uid": "webstore-metrics"
            },
            "definition": "label_values({team_name=~\"$team\"},repository_name)",
            "hide": 0,
            "includeAll": true,
            "label": "repo",
            "multi": true,
            "name": "repo",
            "options": [],
            "query": {
              "qryType": 1,
              "query": "label_values({team_name=~\"$team\"},repository_name)",
              "refId": "PrometheusVariableQueryEditor-VariableQuery"
            },
            "refresh": 1,
            "regex": "",
            "skipUrlSync": false,
            "sort": 0,
            "type": "query"
          },
          {
            "current": {
              "selected": false,
              "text": "Prometheus",
              "value": "webstore-metrics"
            },
            "description": "The metric datasource",
            "hide": 0,
            "includeAll": false,
            "label": "datasource",
            "multi": false,
            "name": "datasource",
            "options": [],
            "query": "prometheus",
            "queryValue": "",
            "refresh": 1,
            "regex": "",
            "skipUrlSync": false,
            "type": "datasource"
          }
        ]
      },
      "time": {
        "from": "now-30m",
        "to": "now"
      },
      "timepicker": {},
      "timezone": "",
      "title": "Engineering Effectiveness Metrics",
      "uid": "a12j",
      "version": 2,
      "weekStart": ""
    }
kind: ConfigMap
metadata:
  labels:
    app.kubernetes.io/name: grafana
  name: dashboard-gpr-engineering-effectiveness-metrics-hdb9bgtgc4
  namespace: grafana
---
apiVersion: v1
data:
  vcs-trunk-based-development.json: |-
    {
        "annotations": {
          "list": [
            {
              "builtIn": 1,
              "datasource": {
                "type": "grafana",
                "uid": "-- Grafana --"
              },
              "enable": true,
              "hide": true,
              "iconColor": "rgba(0, 211, 255, 1)",
              "name": "Annotations & Alerts",
              "type": "dashboard"
            }
          ]
        },
        "editable": true,
        "fiscalYearStartMonth": 0,
        "graphTooltip": 0,
        "id": 12,
        "links": [],
        "panels": [
          {
            "collapsed": false,
            "gridPos": {
              "h": 1,
              "w": 24,
              "x": 0,
              "y": 0
            },
            "id": 2,
            "panels": [],
            "title": "Trunk Based Development",
            "type": "row"
          },
          {
            "datasource": {
              "default": true,
              "type": "prometheus",
              "uid": "webstore-metrics"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "thresholds"
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green",
                      "value": null
                    },
                    {
                      "color": "light-yellow",
                      "value": 7
                    },
                    {
                      "color": "light-purple",
                      "value": 10
                    },
                    {
                      "color": "light-blue",
                      "value": 11
                    }
                  ]
                },
                "unit": "d"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 8,
              "w": 12,
              "x": 0,
              "y": 1
            },
            "id": 1,
            "options": {
              "colorMode": "background",
              "graphMode": "area",
              "justifyMode": "auto",
              "orientation": "auto",
              "percentChangeColorMode": "standard",
              "reduceOptions": {
                "calcs": [
                  "lastNotNull"
                ],
                "fields": "",
                "values": false
              },
              "showPercentChange": false,
              "textMode": "auto",
              "wideLayout": true
            },
            "pluginVersion": "11.2.0",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "webstore-metrics"
                },
                "disableTextWrap": false,
                "editorMode": "builder",
                "expr": "avg by(team_name) (vcs_repository_ref_time_seconds) / 86400",
                "fullMetaSearch": false,
                "includeNullMetadata": true,
                "instant": false,
                "legendFormat": "__auto",
                "range": true,
                "refId": "A",
                "useBackend": false
              }
            ],
            "title": "Average Ref Age (Days)",
            "type": "stat"
          },
          {
            "datasource": {
              "default": true,
              "type": "prometheus",
              "uid": "webstore-metrics"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisBorderShow": false,
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "barWidthFactor": 0.6,
                  "drawStyle": "line",
                  "fillOpacity": 0,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "insertNulls": false,
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "never",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green",
                      "value": null
                    },
                    {
                      "color": "#EAB839",
                      "value": 7
                    },
                    {
                      "color": "#EF843C",
                      "value": 10
                    },
                    {
                      "color": "red",
                      "value": 11
                    }
                  ]
                },
                "unit": "s"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 8,
              "w": 12,
              "x": 12,
              "y": 1
            },
            "id": 3,
            "options": {
              "legend": {
                "calcs": [],
                "displayMode": "list",
                "placement": "bottom",
                "showLegend": true
              },
              "tooltip": {
                "mode": "single",
                "sort": "none"
              }
            },
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "webstore-metrics"
                },
                "editorMode": "code",
                "expr": "vcs_repository_ref_time_seconds",
                "instant": false,
                "legendFormat": "{{repository_name}}/{{ref_name}}",
                "range": true,
                "refId": "A"
              }
            ],
            "title": "Average Ref Age (Days)",
            "type": "timeseries"
          },
          {
            "datasource": {
              "default": true,
              "type": "prometheus",
              "uid": "webstore-metrics"
            },
            "description": "Open Branches",
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "thresholds"
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "light-green",
                      "value": null
                    },
                    {
                      "color": "light-purple",
                      "value": 5
                    },
                    {
                      "color": "light-blue",
                      "value": 7
                    }
                  ]
                }
              },
              "overrides": []
            },
            "gridPos": {
              "h": 8,
              "w": 12,
              "x": 0,
              "y": 9
            },
            "id": 4,
            "options": {
              "colorMode": "background",
              "graphMode": "area",
              "justifyMode": "auto",
              "orientation": "auto",
              "percentChangeColorMode": "standard",
              "reduceOptions": {
                "calcs": [
                  "lastNotNull"
                ],
                "fields": "",
                "values": false
              },
              "showPercentChange": false,
              "textMode": "auto",
              "wideLayout": true
            },
            "pluginVersion": "11.2.0",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "webstore-metrics"
                },
                "editorMode": "code",
                "expr": "avg by(team_name) (vcs_repository_ref_count)",
                "instant": false,
                "legendFormat": "__auto",
                "range": true,
                "refId": "A"
              }
            ],
            "title": "Open Refs",
            "type": "stat"
          },
          {
            "datasource": {
              "default": true,
              "type": "prometheus",
              "uid": "webstore-metrics"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "thresholds"
                },
                "custom": {
                  "axisBorderShow": false,
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "fillOpacity": 80,
                  "gradientMode": "opacity",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineWidth": 1,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "orange",
                      "value": null
                    },
                    {
                      "color": "purple",
                      "value": 5
                    },
                    {
                      "color": "light-blue",
                      "value": 7
                    }
                  ]
                }
              },
              "overrides": []
            },
            "gridPos": {
              "h": 8,
              "w": 12,
              "x": 12,
              "y": 9
            },
            "id": 5,
            "options": {
              "barRadius": 0,
              "barWidth": 0.94,
              "fullHighlight": false,
              "groupWidth": 0.7,
              "legend": {
                "calcs": [],
                "displayMode": "list",
                "placement": "bottom",
                "showLegend": true
              },
              "orientation": "auto",
              "showValue": "auto",
              "stacking": "none",
              "tooltip": {
                "mode": "single",
                "sort": "none"
              },
              "xTickLabelRotation": 0,
              "xTickLabelSpacing": 200
            },
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "webstore-metrics"
                },
                "editorMode": "code",
                "expr": "avg by(repository_name) (vcs_repository_ref_count > 1)",
                "instant": false,
                "legendFormat": "{{repository_name}}/{{branch_name}}",
                "range": true,
                "refId": "A"
              }
            ],
            "title": "Open Refs",
            "type": "barchart"
          },
          {
            "datasource": {
              "default": true,
              "type": "prometheus",
              "uid": "webstore-metrics"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "thresholds"
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green",
                      "value": null
                    },
                    {
                      "color": "#6ED0E0",
                      "value": 7
                    },
                    {
                      "color": "blue",
                      "value": 10
                    },
                    {
                      "color": "light-blue",
                      "value": 11
                    }
                  ]
                },
                "unit": "d"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 8,
              "w": 12,
              "x": 0,
              "y": 17
            },
            "id": 6,
            "options": {
              "colorMode": "background",
              "graphMode": "area",
              "justifyMode": "auto",
              "orientation": "auto",
              "percentChangeColorMode": "standard",
              "reduceOptions": {
                "calcs": [
                  "lastNotNull"
                ],
                "fields": "",
                "values": false
              },
              "showPercentChange": false,
              "textMode": "auto",
              "wideLayout": true
            },
            "pluginVersion": "11.2.0",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "webstore-metrics"
                },
                "disableTextWrap": false,
                "editorMode": "builder",
                "expr": "avg by(team_name) (vcs_repository_change_time_open_seconds) / 86400",
                "fullMetaSearch": false,
                "includeNullMetadata": true,
                "instant": false,
                "legendFormat": "__auto",
                "range": true,
                "refId": "A",
                "useBackend": false
              }
            ],
            "title": "Open Change Duration (Days)",
            "type": "stat"
          },
          {
            "datasource": {
              "default": true,
              "type": "prometheus",
              "uid": "webstore-metrics"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisBorderShow": false,
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "fillOpacity": 80,
                  "gradientMode": "opacity",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineWidth": 1,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green",
                      "value": null
                    }
                  ]
                },
                "unit": "s"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 8,
              "w": 12,
              "x": 12,
              "y": 17
            },
            "id": 7,
            "options": {
              "barRadius": 0,
              "barWidth": 0.97,
              "fullHighlight": false,
              "groupWidth": 0.7,
              "legend": {
                "calcs": [],
                "displayMode": "list",
                "placement": "bottom",
                "showLegend": true
              },
              "orientation": "auto",
              "showValue": "auto",
              "stacking": "none",
              "tooltip": {
                "mode": "single",
                "sort": "none"
              },
              "xTickLabelRotation": 0,
              "xTickLabelSpacing": 0
            },
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "webstore-metrics"
                },
                "disableTextWrap": false,
                "editorMode": "builder",
                "expr": "vcs_repository_change_time_open_seconds",
                "fullMetaSearch": false,
                "includeNullMetadata": true,
                "instant": false,
                "legendFormat": "{{repository_name}}/{{ref_name}}",
                "range": true,
                "refId": "A",
                "useBackend": false
              }
            ],
            "title": "Open Change Age",
            "type": "barchart"
          }
        ],
        "schemaVersion": 39,
        "tags": [],
        "templating": {
          "list": []
        },
        "time": {
          "from": "now-30d",
          "to": "now"
        },
        "timepicker": {},
        "timezone": "browser",
        "title": "VCS Trunk Based Development",
        "uid": "ddylhw4ycoao0e",
        "version": 1,
        "weekStart": ""
      }
kind: ConfigMap
metadata:
  labels:
    app.kubernetes.io/name: grafana
  name: dashboard-gpr-vcs-trunk-based-development-266bh879gg
  namespace: grafana
---
apiVersion: v1
data:
  opentelemetry-collector.json: |-
    {
      "__inputs": [],
      "__elements": {},
      "__requires": [
        {
          "type": "grafana",
          "id": "grafana",
          "name": "Grafana",
          "version": "10.0.3"
        },
        {
          "type": "panel",
          "id": "heatmap",
          "name": "Heatmap",
          "version": ""
        },
        {
          "type": "panel",
          "id": "nodeGraph",
          "name": "Node Graph",
          "version": ""
        },
        {
          "type": "datasource",
          "id": "prometheus",
          "name": "Prometheus",
          "version": "1.0.0"
        },
        {
          "type": "panel",
          "id": "table",
          "name": "Table",
          "version": ""
        },
        {
          "type": "panel",
          "id": "text",
          "name": "Text",
          "version": ""
        },
        {
          "type": "panel",
          "id": "timeseries",
          "name": "Time series",
          "version": ""
        }
      ],
      "annotations": {
        "list": [
          {
            "builtIn": 1,
            "datasource": {
              "type": "datasource",
              "uid": "grafana"
            },
            "enable": true,
            "hide": true,
            "iconColor": "rgba(0, 211, 255, 1)",
            "name": "Annotations & Alerts",
            "target": {
              "limit": 100,
              "matchAny": false,
              "tags": [],
              "type": "dashboard"
            },
            "type": "dashboard"
          }
        ]
      },
      "description": "Visualize OpenTelemetry (OTEL) collector metrics (tested with OTEL contrib v0.84.0)",
      "editable": true,
      "fiscalYearStartMonth": 0,
      "gnetId": 15983,
      "graphTooltip": 1,
      "id": null,
      "links": [],
      "liveNow": false,
      "panels": [
        {
          "collapsed": false,
          "datasource": {
            "type": "prometheus",
            "uid": "$datasource"
          },
          "gridPos": {
            "h": 1,
            "w": 24,
            "x": 0,
            "y": 0
          },
          "id": 23,
          "panels": [],
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "$datasource"
              },
              "refId": "A"
            }
          ],
          "title": "Receivers",
          "type": "row"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "$datasource"
          },
          "description": "Accepted: count/rate of spans successfully pushed into the pipeline.\nRefused: count/rate of spans that could not be pushed into the pipeline.",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "never",
                "spanNulls": true,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "links": [],
              "mappings": [],
              "min": 0,
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "short"
            },
            "overrides": [
              {
                "matcher": {
                  "id": "byRegexp",
                  "options": "/Refused.*/"
                },
                "properties": [
                  {
                    "id": "color",
                    "value": {
                      "fixedColor": "red",
                      "mode": "fixed"
                    }
                  }
                ]
              }
            ]
          },
          "gridPos": {
            "h": 8,
            "w": 8,
            "x": 0,
            "y": 1
          },
          "id": 28,
          "interval": "$minstep",
          "links": [],
          "options": {
            "legend": {
              "calcs": [
                "min",
                "max",
                "mean"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "mode": "multi",
              "sort": "none"
            }
          },
          "pluginVersion": "8.3.5",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "$datasource"
              },
              "editorMode": "code",
              "exemplar": true,
              "expr": "sum(${metric:value}(otelcol_receiver_accepted_spans{receiver=~\"$receiver\",job=\"$job\"}[$__rate_interval])) by (receiver $grouping)",
              "format": "time_series",
              "interval": "$minstep",
              "intervalFactor": 1,
              "legendFormat": "Accepted: {{receiver}} {{transport}} {{service_instance_id}}",
              "range": true,
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "$datasource"
              },
              "editorMode": "code",
              "exemplar": true,
              "expr": "sum(${metric:value}(otelcol_receiver_refused_spans{receiver=~\"$receiver\",job=\"$job\"}[$__rate_interval])) by (receiver $grouping)",
              "format": "time_series",
              "hide": false,
              "interval": "$minstep",
              "intervalFactor": 1,
              "legendFormat": "Refused: {{receiver}} {{transport}} {{service_instance_id}}",
              "range": true,
              "refId": "B"
            }
          ],
          "title": "Spans ${metric:text}",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "$datasource"
          },
          "description": "Accepted: count/rate of metric points successfully pushed into the pipeline.\nRefused: count/rate of metric points that could not be pushed into the pipeline.",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "never",
                "spanNulls": true,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "links": [],
              "mappings": [],
              "min": 0,
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "short"
            },
            "overrides": [
              {
                "matcher": {
                  "id": "byRegexp",
                  "options": "/Refused.*/"
                },
                "properties": [
                  {
                    "id": "color",
                    "value": {
                      "fixedColor": "red",
                      "mode": "fixed"
                    }
                  }
                ]
              }
            ]
          },
          "gridPos": {
            "h": 8,
            "w": 8,
            "x": 8,
            "y": 1
          },
          "id": 32,
          "interval": "$minstep",
          "links": [],
          "options": {
            "legend": {
              "calcs": [
                "min",
                "max",
                "mean"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "mode": "multi",
              "sort": "none"
            }
          },
          "pluginVersion": "8.3.5",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "$datasource"
              },
              "editorMode": "code",
              "exemplar": true,
              "expr": "sum(${metric:value}(otelcol_receiver_accepted_metric_points{receiver=~\"$receiver\",job=\"$job\"}[$__rate_interval])) by (receiver $grouping)",
              "format": "time_series",
              "interval": "$minstep",
              "intervalFactor": 1,
              "legendFormat": "Accepted: {{receiver}} {{transport}} {{service_instance_id}}",
              "range": true,
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "$datasource"
              },
              "editorMode": "code",
              "exemplar": true,
              "expr": "sum(${metric:value}(otelcol_receiver_refused_metric_points{receiver=~\"$receiver\",job=\"$job\"}[$__rate_interval])) by (receiver $grouping)",
              "format": "time_series",
              "hide": false,
              "interval": "$minstep",
              "intervalFactor": 1,
              "legendFormat": "Refused: {{receiver}} {{transport}} {{service_instance_id}}",
              "range": true,
              "refId": "B"
            }
          ],
          "title": "Metric Points ${metric:text}",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "$datasource"
          },
          "description": "Accepted: count/rate of log records successfully pushed into the pipeline.\nRefused: count/rate of log records that could not be pushed into the pipeline.",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "never",
                "spanNulls": true,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "links": [],
              "mappings": [],
              "min": 0,
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "short"
            },
            "overrides": [
              {
                "matcher": {
                  "id": "byRegexp",
                  "options": "/Refused.*/"
                },
                "properties": [
                  {
                    "id": "color",
                    "value": {
                      "fixedColor": "red",
                      "mode": "fixed"
                    }
                  }
                ]
              }
            ]
          },
          "gridPos": {
            "h": 8,
            "w": 8,
            "x": 16,
            "y": 1
          },
          "id": 47,
          "interval": "$minstep",
          "links": [],
          "options": {
            "legend": {
              "calcs": [
                "min",
                "max",
                "mean"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "mode": "multi",
              "sort": "none"
            }
          },
          "pluginVersion": "8.3.5",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "$datasource"
              },
              "editorMode": "code",
              "exemplar": true,
              "expr": "sum(${metric:value}(otelcol_receiver_accepted_log_records{receiver=~\"$receiver\",job=\"$job\"}[$__rate_interval])) by (receiver $grouping)",
              "format": "time_series",
              "interval": "$minstep",
              "intervalFactor": 1,
              "legendFormat": "Accepted: {{receiver}} {{transport}} {{service_instance_id}}",
              "range": true,
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "$datasource"
              },
              "editorMode": "code",
              "exemplar": true,
              "expr": "sum(${metric:value}(otelcol_receiver_refused_log_records{receiver=~\"$receiver\",job=\"$job\"}[$__rate_interval])) by (receiver $grouping)",
              "format": "time_series",
              "hide": false,
              "interval": "$minstep",
              "intervalFactor": 1,
              "legendFormat": "Refused: {{receiver}} {{transport}} {{service_instance_id}}",
              "range": true,
              "refId": "B"
            }
          ],
          "title": "Log Records ${metric:text}",
          "type": "timeseries"
        },
        {
          "collapsed": false,
          "datasource": {
            "type": "prometheus",
            "uid": "$datasource"
          },
          "gridPos": {
            "h": 1,
            "w": 24,
            "x": 0,
            "y": 9
          },
          "id": 34,
          "panels": [],
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "$datasource"
              },
              "refId": "A"
            }
          ],
          "title": "Processors",
          "type": "row"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "$datasource"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "never",
                "spanNulls": true,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "links": [],
              "mappings": [],
              "min": 0,
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "short"
            },
            "overrides": [
              {
                "matcher": {
                  "id": "byRegexp",
                  "options": "/.*Refused.*/"
                },
                "properties": [
                  {
                    "id": "color",
                    "value": {
                      "fixedColor": "red",
                      "mode": "fixed"
                    }
                  }
                ]
              },
              {
                "matcher": {
                  "id": "byRegexp",
                  "options": "/.*Dropped.*/"
                },
                "properties": [
                  {
                    "id": "color",
                    "value": {
                      "fixedColor": "purple",
                      "mode": "fixed"
                    }
                  }
                ]
              }
            ]
          },
          "gridPos": {
            "h": 8,
            "w": 8,
            "x": 0,
            "y": 18
          },
          "id": 36,
          "interval": "$minstep",
          "links": [],
          "options": {
            "legend": {
              "calcs": [
                "min",
                "max",
                "mean"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "mode": "multi",
              "sort": "none"
            }
          },
          "pluginVersion": "8.3.5",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "$datasource"
              },
              "editorMode": "code",
              "exemplar": true,
              "expr": "sum(${metric:value}(otelcol_processor_batch_batch_send_size_count{processor=~\"$processor\",job=\"$job\"}[$__rate_interval])) by (processor)",
              "format": "time_series",
              "hide": false,
              "instant": false,
              "interval": "$minstep",
              "intervalFactor": 1,
              "legendFormat": "Batch send size count: {{processor}}",
              "refId": "B"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "$datasource"
              },
              "editorMode": "code",
              "exemplar": true,
              "expr": "sum(${metric:value}(otelcol_processor_batch_batch_send_size_sum{processor=~\"$processor\",job=\"$job\"}[$__rate_interval])) by (processor)",
              "format": "time_series",
              "hide": false,
              "instant": false,
              "interval": "$minstep",
              "intervalFactor": 1,
              "legendFormat": "Batch send size sum: {{processor}}",
              "refId": "A"
            }
          ],
          "title": "Batch Metrics",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "$datasource"
          },
          "description": "Number of units in the batch",
          "fieldConfig": {
            "defaults": {
              "custom": {
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "scaleDistribution": {
                  "type": "linear"
                }
              },
              "links": []
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 8,
            "x": 8,
            "y": 18
          },
          "id": 49,
          "interval": "$minstep",
          "links": [],
          "maxDataPoints": 50,
          "options": {
            "calculate": false,
            "cellGap": 1,
            "color": {
              "exponent": 0.5,
              "fill": "dark-orange",
              "mode": "scheme",
              "reverse": true,
              "scale": "exponential",
              "scheme": "Reds",
              "steps": 57
            },
            "exemplars": {
              "color": "rgba(255,0,255,0.7)"
            },
            "filterValues": {
              "le": 1e-9
            },
            "legend": {
              "show": true
            },
            "rowsFrame": {
              "layout": "auto"
            },
            "tooltip": {
              "show": true,
              "yHistogram": false
            },
            "yAxis": {
              "axisPlacement": "left",
              "reverse": false
            }
          },
          "pluginVersion": "10.0.3",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "$datasource"
              },
              "editorMode": "code",
              "exemplar": true,
              "expr": "sum(increase(otelcol_processor_batch_batch_send_size_bucket{processor=~\"$processor\",job=\"$job\"}[$__rate_interval])) by (le)",
              "format": "heatmap",
              "hide": false,
              "instant": false,
              "interval": "$minstep",
              "intervalFactor": 1,
              "legendFormat": "{{le}}",
              "refId": "B"
            }
          ],
          "title": "Batch Send Size Heatmap",
          "type": "heatmap"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "$datasource"
          },
          "description": "Number of times the batch was sent due to a size trigger. Number of times the batch was sent due to a timeout trigger.",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "never",
                "spanNulls": true,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "links": [],
              "mappings": [],
              "min": 0,
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "short"
            },
            "overrides": [
              {
                "matcher": {
                  "id": "byRegexp",
                  "options": "/.*Refused.*/"
                },
                "properties": [
                  {
                    "id": "color",
                    "value": {
                      "fixedColor": "red",
                      "mode": "fixed"
                    }
                  }
                ]
              },
              {
                "matcher": {
                  "id": "byRegexp",
                  "options": "/.*Dropped.*/"
                },
                "properties": [
                  {
                    "id": "color",
                    "value": {
                      "fixedColor": "purple",
                      "mode": "fixed"
                    }
                  }
                ]
              }
            ]
          },
          "gridPos": {
            "h": 8,
            "w": 8,
            "x": 16,
            "y": 18
          },
          "id": 56,
          "interval": "$minstep",
          "links": [],
          "options": {
            "legend": {
              "calcs": [
                "min",
                "max",
                "mean"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "mode": "multi",
              "sort": "none"
            }
          },
          "pluginVersion": "8.3.5",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "$datasource"
              },
              "editorMode": "code",
              "exemplar": true,
              "expr": "sum(${metric:value}(otelcol_processor_batch_batch_size_trigger_send{processor=~\"$processor\",job=\"$job\"}[$__rate_interval])) by (processor)",
              "format": "time_series",
              "hide": false,
              "instant": false,
              "interval": "$minstep",
              "intervalFactor": 1,
              "legendFormat": "Batch sent due to a size trigger: {{processor}}",
              "refId": "B"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "$datasource"
              },
              "editorMode": "code",
              "exemplar": true,
              "expr": "sum(${metric:value}(otelcol_processor_batch_timeout_trigger_send{processor=~\"$processor\"}[$__rate_interval])) by (processor)",
              "format": "time_series",
              "hide": false,
              "instant": false,
              "interval": "$minstep",
              "intervalFactor": 1,
              "legendFormat": "Batch sent due to a timeout trigger: {{processor}}",
              "refId": "A"
            }
          ],
          "title": "Batch Metrics",
          "type": "timeseries"
        },
        {
          "collapsed": false,
          "datasource": {
            "type": "prometheus",
            "uid": "$datasource"
          },
          "gridPos": {
            "h": 1,
            "w": 24,
            "x": 0,
            "y": 26
          },
          "id": 25,
          "panels": [],
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "$datasource"
              },
              "refId": "A"
            }
          ],
          "title": "Exporters",
          "type": "row"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "$datasource"
          },
          "description": "Sent: count/rate of spans successfully sent to destination.\nEngueue: count/rate of spans failed to be added to the sending queue.",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "never",
                "spanNulls": true,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "links": [],
              "mappings": [],
              "min": 0,
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "short"
            },
            "overrides": [
              {
                "matcher": {
                  "id": "byRegexp",
                  "options": "/Failed:.*/"
                },
                "properties": [
                  {
                    "id": "color",
                    "value": {
                      "fixedColor": "red",
                      "mode": "fixed"
                    }
                  }
                ]
              }
            ]
          },
          "gridPos": {
            "h": 9,
            "w": 8,
            "x": 0,
            "y": 27
          },
          "id": 37,
          "interval": "$minstep",
          "links": [],
          "options": {
            "legend": {
              "calcs": [
                "min",
                "max",
                "mean"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "mode": "multi",
              "sort": "none"
            }
          },
          "pluginVersion": "8.3.5",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "$datasource"
              },
              "editorMode": "code",
              "exemplar": true,
              "expr": "sum(${metric:value}(otelcol_exporter_sent_spans{exporter=~\"$exporter\",job=\"$job\"}[$__rate_interval])) by (exporter $grouping)",
              "format": "time_series",
              "interval": "$minstep",
              "intervalFactor": 1,
              "legendFormat": "Sent: {{exporter}} {{service_instance_id}}",
              "range": true,
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "$datasource"
              },
              "editorMode": "code",
              "exemplar": true,
              "expr": "sum(${metric:value}(otelcol_exporter_enqueue_failed_spans{exporter=~\"$exporter\",job=\"$job\"}[$__rate_interval])) by (exporter $grouping)",
              "format": "time_series",
              "hide": false,
              "interval": "$minstep",
              "intervalFactor": 1,
              "legendFormat": "Enqueue: {{exporter}} {{service_instance_id}}",
              "range": true,
              "refId": "B"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "$datasource"
              },
              "editorMode": "code",
              "exemplar": true,
              "expr": "sum(${metric:value}(otelcol_exporter_send_failed_spans{exporter=~\"$exporter\",job=\"$job\"}[$__rate_interval])) by (exporter $grouping)",
              "format": "time_series",
              "hide": false,
              "interval": "$minstep",
              "intervalFactor": 1,
              "legendFormat": "Failed: {{exporter}} {{service_instance_id}}",
              "range": true,
              "refId": "C"
            }
          ],
          "title": "Spans ${metric:text}",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "$datasource"
          },
          "description": "Sent: count/rate of metric points successfully sent to destination.\nEngueue: count/rate of metric points failed to be added to the sending queue.",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "never",
                "spanNulls": true,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "links": [],
              "mappings": [],
              "min": 0,
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "short"
            },
            "overrides": [
              {
                "matcher": {
                  "id": "byRegexp",
                  "options": "/Failed:.*/"
                },
                "properties": [
                  {
                    "id": "color",
                    "value": {
                      "fixedColor": "red",
                      "mode": "fixed"
                    }
                  }
                ]
              }
            ]
          },
          "gridPos": {
            "h": 9,
            "w": 8,
            "x": 8,
            "y": 27
          },
          "id": 38,
          "interval": "$minstep",
          "links": [],
          "options": {
            "legend": {
              "calcs": [
                "min",
                "max",
                "mean"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "mode": "multi",
              "sort": "none"
            }
          },
          "pluginVersion": "8.3.5",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "$datasource"
              },
              "editorMode": "code",
              "exemplar": true,
              "expr": "sum(${metric:value}(otelcol_exporter_sent_metric_points{exporter=~\"$exporter\",job=\"$job\"}[$__rate_interval])) by (exporter $grouping)",
              "format": "time_series",
              "interval": "$minstep",
              "intervalFactor": 1,
              "legendFormat": "Sent: {{exporter}} {{service_instance_id}}",
              "range": true,
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "$datasource"
              },
              "editorMode": "code",
              "exemplar": true,
              "expr": "sum(${metric:value}(otelcol_exporter_enqueue_failed_metric_points{exporter=~\"$exporter\",job=\"$job\"}[$__rate_interval])) by (exporter $grouping)",
              "format": "time_series",
              "hide": false,
              "interval": "$minstep",
              "intervalFactor": 1,
              "legendFormat": "Enqueue: {{exporter}} {{service_instance_id}}",
              "range": true,
              "refId": "B"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "$datasource"
              },
              "editorMode": "code",
              "exemplar": true,
              "expr": "sum(${metric:value}(otelcol_exporter_send_failed_metric_points{exporter=~\"$exporter\",job=\"$job\"}[$__rate_interval])) by (exporter $grouping)",
              "format": "time_series",
              "hide": false,
              "interval": "$minstep",
              "intervalFactor": 1,
              "legendFormat": "Failed: {{exporter}} {{service_instance_id}}",
              "range": true,
              "refId": "C"
            }
          ],
          "title": "Metric Points ${metric:text}",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "$datasource"
          },
          "description": "Sent: count/rate of log records successfully sent to destination.\nEngueue: count/rate of log records failed to be added to the sending queue.",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "never",
                "spanNulls": true,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "links": [],
              "mappings": [],
              "min": 0,
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "short"
            },
            "overrides": [
              {
                "matcher": {
                  "id": "byRegexp",
                  "options": "/Failed:.*/"
                },
                "properties": [
                  {
                    "id": "color",
                    "value": {
                      "fixedColor": "red",
                      "mode": "fixed"
                    }
                  }
                ]
              }
            ]
          },
          "gridPos": {
            "h": 9,
            "w": 8,
            "x": 16,
            "y": 27
          },
          "id": 48,
          "interval": "$minstep",
          "links": [],
          "options": {
            "legend": {
              "calcs": [
                "min",
                "max",
                "mean"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "mode": "multi",
              "sort": "none"
            }
          },
          "pluginVersion": "8.3.5",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "$datasource"
              },
              "editorMode": "code",
              "exemplar": true,
              "expr": "sum(${metric:value}(otelcol_exporter_sent_log_records{exporter=~\"$exporter\",job=\"$job\"}[$__rate_interval])) by (exporter $grouping)",
              "format": "time_series",
              "interval": "$minstep",
              "intervalFactor": 1,
              "legendFormat": "Sent: {{exporter}} {{service_instance_id}}",
              "range": true,
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "$datasource"
              },
              "editorMode": "code",
              "exemplar": true,
              "expr": "sum(${metric:value}(otelcol_exporter_enqueue_failed_log_records{exporter=~\"$exporter\",job=\"$job\"}[$__rate_interval])) by (exporter $grouping)",
              "format": "time_series",
              "hide": false,
              "interval": "$minstep",
              "intervalFactor": 1,
              "legendFormat": "Enqueue: {{exporter}} {{service_instance_id}}",
              "range": true,
              "refId": "B"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "$datasource"
              },
              "editorMode": "code",
              "exemplar": true,
              "expr": "sum(${metric:value}(otelcol_exporter_send_failed_log_records{exporter=~\"$exporter\",job=\"$job\"}[$__rate_interval])) by (exporter $grouping)",
              "format": "time_series",
              "hide": false,
              "interval": "$minstep",
              "intervalFactor": 1,
              "legendFormat": "Failed: {{exporter}} {{service_instance_id}}",
              "range": true,
              "refId": "C"
            }
          ],
          "title": "Log Records ${metric:text}",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "$datasource"
          },
          "description": "Current size of the retry queue (in batches)",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "never",
                "spanNulls": true,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "links": [],
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "short"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 9,
            "w": 12,
            "x": 0,
            "y": 36
          },
          "id": 10,
          "links": [],
          "options": {
            "legend": {
              "calcs": [
                "min",
                "max",
                "mean"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "mode": "multi",
              "sort": "none"
            }
          },
          "pluginVersion": "8.3.5",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "$datasource"
              },
              "editorMode": "code",
              "exemplar": true,
              "expr": "max(otelcol_exporter_queue_size{exporter=~\"$exporter\",job=\"$job\"}) by (exporter)",
              "format": "time_series",
              "interval": "$minstep",
              "intervalFactor": 1,
              "legendFormat": "Max queue size: {{exporter}}",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "Exporter Queue Size",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "$datasource"
          },
          "description": "Fixed capacity of the retry queue (in batches)",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "never",
                "spanNulls": true,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "links": [],
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "short"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 9,
            "w": 12,
            "x": 12,
            "y": 36
          },
          "id": 55,
          "links": [],
          "options": {
            "legend": {
              "calcs": [
                "min",
                "max",
                "mean"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "mode": "multi",
              "sort": "none"
            }
          },
          "pluginVersion": "8.3.5",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "$datasource"
              },
              "editorMode": "code",
              "exemplar": true,
              "expr": "min(otelcol_exporter_queue_capacity{exporter=~\"$exporter\",job=\"$job\"}) by (exporter)",
              "format": "time_series",
              "interval": "$minstep",
              "intervalFactor": 1,
              "legendFormat": "Queue capacity: {{exporter}}",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "Exporter Queue Capacity",
          "type": "timeseries"
        },
        {
          "collapsed": false,
          "datasource": {
            "type": "prometheus",
            "uid": "$datasource"
          },
          "gridPos": {
            "h": 1,
            "w": 24,
            "x": 0,
            "y": 45
          },
          "id": 21,
          "panels": [],
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "$datasource"
              },
              "refId": "A"
            }
          ],
          "title": "Collector",
          "type": "row"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "$datasource"
          },
          "description": "Total physical memory (resident set size)",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "never",
                "spanNulls": true,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "links": [],
              "mappings": [],
              "min": 0,
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "bytes"
            },
            "overrides": [
              {
                "matcher": {
                  "id": "byName",
                  "options": "Max Memory RSS "
                },
                "properties": [
                  {
                    "id": "color",
                    "value": {
                      "fixedColor": "red",
                      "mode": "fixed"
                    }
                  },
                  {
                    "id": "custom.fillBelowTo",
                    "value": "Avg Memory RSS "
                  },
                  {
                    "id": "custom.lineWidth",
                    "value": 0
                  },
                  {
                    "id": "custom.fillOpacity",
                    "value": 20
                  }
                ]
              },
              {
                "matcher": {
                  "id": "byName",
                  "options": "Min Memory RSS "
                },
                "properties": [
                  {
                    "id": "color",
                    "value": {
                      "fixedColor": "yellow",
                      "mode": "fixed"
                    }
                  },
                  {
                    "id": "custom.lineWidth",
                    "value": 0
                  }
                ]
              },
              {
                "matcher": {
                  "id": "byName",
                  "options": "Avg Memory RSS "
                },
                "properties": [
                  {
                    "id": "color",
                    "value": {
                      "fixedColor": "orange",
                      "mode": "fixed"
                    }
                  },
                  {
                    "id": "custom.fillBelowTo",
                    "value": "Min Memory RSS "
                  },
                  {
                    "id": "custom.fillOpacity",
                    "value": 20
                  }
                ]
              }
            ]
          },
          "gridPos": {
            "h": 9,
            "w": 8,
            "x": 0,
            "y": 46
          },
          "id": 40,
          "interval": "$minstep",
          "links": [],
          "options": {
            "legend": {
              "calcs": [
                "min",
                "max",
                "mean"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "mode": "multi",
              "sort": "none"
            }
          },
          "pluginVersion": "8.3.5",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "$datasource"
              },
              "editorMode": "code",
              "exemplar": true,
              "expr": "max(otelcol_process_memory_rss{job=\"$job\"}) by (job $grouping)",
              "format": "time_series",
              "hide": false,
              "interval": "$minstep",
              "intervalFactor": 1,
              "legendFormat": "Max Memory RSS {{service_instance_id}}",
              "range": true,
              "refId": "C"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "$datasource"
              },
              "editorMode": "code",
              "exemplar": true,
              "expr": "avg(otelcol_process_memory_rss{job=\"$job\"}) by (job $grouping)",
              "format": "time_series",
              "interval": "$minstep",
              "intervalFactor": 1,
              "legendFormat": "Avg Memory RSS {{service_instance_id}}",
              "range": true,
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "$datasource"
              },
              "editorMode": "code",
              "exemplar": true,
              "expr": "min(otelcol_process_memory_rss{job=\"$job\"}) by (job $grouping)",
              "format": "time_series",
              "hide": false,
              "interval": "$minstep",
              "intervalFactor": 1,
              "legendFormat": "Min Memory RSS {{service_instance_id}}",
              "range": true,
              "refId": "B"
            }
          ],
          "title": "Total RSS Memory",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "$datasource"
          },
          "description": "Total bytes of memory obtained from the OS (see 'go doc runtime.MemStats.Sys')",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "never",
                "spanNulls": true,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "links": [],
              "mappings": [],
              "min": 0,
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "bytes"
            },
            "overrides": [
              {
                "matcher": {
                  "id": "byName",
                  "options": "Max Memory RSS "
                },
                "properties": [
                  {
                    "id": "color",
                    "value": {
                      "fixedColor": "red",
                      "mode": "fixed"
                    }
                  },
                  {
                    "id": "custom.fillBelowTo",
                    "value": "Avg Memory RSS "
                  },
                  {
                    "id": "custom.lineWidth",
                    "value": 0
                  },
                  {
                    "id": "custom.fillOpacity",
                    "value": 20
                  }
                ]
              },
              {
                "matcher": {
                  "id": "byName",
                  "options": "Min Memory RSS "
                },
                "properties": [
                  {
                    "id": "color",
                    "value": {
                      "fixedColor": "yellow",
                      "mode": "fixed"
                    }
                  },
                  {
                    "id": "custom.lineWidth",
                    "value": 0
                  }
                ]
              },
              {
                "matcher": {
                  "id": "byName",
                  "options": "Avg Memory RSS "
                },
                "properties": [
                  {
                    "id": "color",
                    "value": {
                      "fixedColor": "orange",
                      "mode": "fixed"
                    }
                  },
                  {
                    "id": "custom.fillBelowTo",
                    "value": "Min Memory RSS "
                  },
                  {
                    "id": "custom.fillOpacity",
                    "value": 20
                  }
                ]
              }
            ]
          },
          "gridPos": {
            "h": 9,
            "w": 8,
            "x": 8,
            "y": 46
          },
          "id": 52,
          "interval": "$minstep",
          "links": [],
          "options": {
            "legend": {
              "calcs": [
                "min",
                "max",
                "mean"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "mode": "multi",
              "sort": "none"
            }
          },
          "pluginVersion": "8.3.5",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "$datasource"
              },
              "editorMode": "code",
              "exemplar": true,
              "expr": "max(otelcol_process_runtime_total_sys_memory_bytes{job=\"$job\"}) by (job $grouping)",
              "format": "time_series",
              "hide": false,
              "interval": "$minstep",
              "intervalFactor": 1,
              "legendFormat": "Max Memory RSS {{service_instance_id}}",
              "range": true,
              "refId": "C"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "$datasource"
              },
              "editorMode": "code",
              "exemplar": true,
              "expr": "avg(otelcol_process_runtime_total_sys_memory_bytes{job=\"$job\"}) by (job $grouping)",
              "format": "time_series",
              "interval": "$minstep",
              "intervalFactor": 1,
              "legendFormat": "Avg Memory RSS {{service_instance_id}}",
              "range": true,
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "$datasource"
              },
              "editorMode": "code",
              "exemplar": true,
              "expr": "min(otelcol_process_runtime_total_sys_memory_bytes{job=\"$job\"}) by (job $grouping)",
              "format": "time_series",
              "hide": false,
              "interval": "$minstep",
              "intervalFactor": 1,
              "legendFormat": "Min Memory RSS {{service_instance_id}}",
              "range": true,
              "refId": "B"
            }
          ],
          "title": "Total Runtime Sys Memory",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "$datasource"
          },
          "description": "Bytes of allocated heap objects (see 'go doc runtime.MemStats.HeapAlloc')",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "never",
                "spanNulls": true,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "links": [],
              "mappings": [],
              "min": 0,
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "bytes"
            },
            "overrides": [
              {
                "matcher": {
                  "id": "byName",
                  "options": "Max Memory RSS "
                },
                "properties": [
                  {
                    "id": "color",
                    "value": {
                      "fixedColor": "red",
                      "mode": "fixed"
                    }
                  },
                  {
                    "id": "custom.fillBelowTo",
                    "value": "Avg Memory RSS "
                  },
                  {
                    "id": "custom.lineWidth",
                    "value": 0
                  },
                  {
                    "id": "custom.fillOpacity",
                    "value": 20
                  }
                ]
              },
              {
                "matcher": {
                  "id": "byName",
                  "options": "Min Memory RSS "
                },
                "properties": [
                  {
                    "id": "color",
                    "value": {
                      "fixedColor": "yellow",
                      "mode": "fixed"
                    }
                  },
                  {
                    "id": "custom.lineWidth",
                    "value": 0
                  }
                ]
              },
              {
                "matcher": {
                  "id": "byName",
                  "options": "Avg Memory RSS "
                },
                "properties": [
                  {
                    "id": "color",
                    "value": {
                      "fixedColor": "orange",
                      "mode": "fixed"
                    }
                  },
                  {
                    "id": "custom.fillBelowTo",
                    "value": "Min Memory RSS "
                  },
                  {
                    "id": "custom.fillOpacity",
                    "value": 20
                  }
                ]
              }
            ]
          },
          "gridPos": {
            "h": 9,
            "w": 8,
            "x": 16,
            "y": 46
          },
          "id": 53,
          "interval": "$minstep",
          "links": [],
          "options": {
            "legend": {
              "calcs": [
                "min",
                "max",
                "mean"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "mode": "multi",
              "sort": "none"
            }
          },
          "pluginVersion": "8.3.5",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "$datasource"
              },
              "editorMode": "code",
              "exemplar": true,
              "expr": "max(otelcol_process_runtime_heap_alloc_bytes{job=\"$job\"}) by (job $grouping)",
              "format": "time_series",
              "hide": false,
              "interval": "$minstep",
              "intervalFactor": 1,
              "legendFormat": "Max Memory RSS {{service_instance_id}}",
              "range": true,
              "refId": "C"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "$datasource"
              },
              "editorMode": "code",
              "exemplar": true,
              "expr": "avg(otelcol_process_runtime_heap_alloc_bytes{job=\"$job\"}) by (job $grouping)",
              "format": "time_series",
              "interval": "$minstep",
              "intervalFactor": 1,
              "legendFormat": "Avg Memory RSS {{service_instance_id}}",
              "range": true,
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "$datasource"
              },
              "editorMode": "code",
              "exemplar": true,
              "expr": "min(otelcol_process_runtime_heap_alloc_bytes{job=\"$job\"}) by (job $grouping)",
              "format": "time_series",
              "hide": false,
              "interval": "$minstep",
              "intervalFactor": 1,
              "legendFormat": "Min Memory RSS {{service_instance_id}}",
              "range": true,
              "refId": "B"
            }
          ],
          "title": "Total Runtime Heap Memory",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "$datasource"
          },
          "description": "Total CPU user and system time in percentage",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "never",
                "spanNulls": true,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "links": [],
              "mappings": [],
              "min": 0,
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "percent"
            },
            "overrides": [
              {
                "matcher": {
                  "id": "byName",
                  "options": "Max CPU usage "
                },
                "properties": [
                  {
                    "id": "color",
                    "value": {
                      "fixedColor": "red",
                      "mode": "fixed"
                    }
                  },
                  {
                    "id": "custom.fillBelowTo",
                    "value": "Avg CPU usage "
                  },
                  {
                    "id": "custom.lineWidth",
                    "value": 0
                  },
                  {
                    "id": "custom.fillOpacity",
                    "value": 20
                  }
                ]
              },
              {
                "matcher": {
                  "id": "byName",
                  "options": "Avg CPU usage "
                },
                "properties": [
                  {
                    "id": "color",
                    "value": {
                      "fixedColor": "orange",
                      "mode": "fixed"
                    }
                  },
                  {
                    "id": "custom.fillBelowTo",
                    "value": "Min CPU usage "
                  }
                ]
              },
              {
                "matcher": {
                  "id": "byName",
                  "options": "Min CPU usage "
                },
                "properties": [
                  {
                    "id": "color",
                    "value": {
                      "fixedColor": "yellow",
                      "mode": "fixed"
                    }
                  },
                  {
                    "id": "custom.lineWidth",
                    "value": 0
                  }
                ]
              }
            ]
          },
          "gridPos": {
            "h": 9,
            "w": 8,
            "x": 0,
            "y": 55
          },
          "id": 39,
          "interval": "$minstep",
          "links": [],
          "options": {
            "legend": {
              "calcs": [
                "min",
                "max",
                "mean"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "mode": "multi",
              "sort": "none"
            }
          },
          "pluginVersion": "8.3.5",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "$datasource"
              },
              "editorMode": "code",
              "exemplar": true,
              "expr": "max(rate(otelcol_process_cpu_seconds{job=\"$job\"}[$__rate_interval])*100) by (job $grouping)",
              "format": "time_series",
              "hide": false,
              "interval": "$minstep",
              "intervalFactor": 1,
              "legendFormat": "Max CPU usage {{service_instance_id}}",
              "range": true,
              "refId": "B"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "$datasource"
              },
              "editorMode": "code",
              "exemplar": true,
              "expr": "avg(rate(otelcol_process_cpu_seconds{job=\"$job\"}[$__rate_interval])*100) by (job $grouping)",
              "format": "time_series",
              "hide": false,
              "interval": "$minstep",
              "intervalFactor": 1,
              "legendFormat": "Avg CPU usage {{service_instance_id}}",
              "range": true,
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "$datasource"
              },
              "editorMode": "code",
              "exemplar": true,
              "expr": "min(rate(otelcol_process_cpu_seconds{job=\"$job\"}[$__rate_interval])*100) by (job $grouping)",
              "format": "time_series",
              "hide": false,
              "interval": "$minstep",
              "intervalFactor": 1,
              "legendFormat": "Min CPU usage {{service_instance_id}}",
              "range": true,
              "refId": "C"
            }
          ],
          "title": "CPU Usage",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "$datasource"
          },
          "description": "Number of service instances, which are reporting metrics",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "never",
                "spanNulls": true,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "links": [],
              "mappings": [],
              "min": 0,
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "short"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 9,
            "w": 8,
            "x": 8,
            "y": 55
          },
          "id": 41,
          "interval": "$minstep",
          "links": [],
          "options": {
            "legend": {
              "calcs": [
                "min",
                "max",
                "mean"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "mode": "multi",
              "sort": "none"
            }
          },
          "pluginVersion": "8.3.5",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "$datasource"
              },
              "editorMode": "code",
              "exemplar": true,
              "expr": "count(count(otelcol_process_cpu_seconds{service_instance_id=~\".*\",job=\"$job\"}) by (service_instance_id))",
              "format": "time_series",
              "hide": false,
              "interval": "$minstep",
              "intervalFactor": 1,
              "legendFormat": "Service instance count",
              "range": true,
              "refId": "B"
            }
          ],
          "title": "Service Instance Count",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "$datasource"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "never",
                "spanNulls": true,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "links": [],
              "mappings": [],
              "min": 0,
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "s"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 9,
            "w": 8,
            "x": 16,
            "y": 55
          },
          "id": 54,
          "interval": "$minstep",
          "links": [],
          "options": {
            "legend": {
              "calcs": [
                "min",
                "max",
                "mean"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "mode": "multi",
              "sort": "none"
            }
          },
          "pluginVersion": "8.3.5",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "$datasource"
              },
              "editorMode": "code",
              "exemplar": true,
              "expr": "max(otelcol_process_uptime{service_instance_id=~\".*\",job=\"$job\"}) by (service_instance_id)",
              "format": "time_series",
              "hide": false,
              "interval": "$minstep",
              "intervalFactor": 1,
              "legendFormat": "Service instance uptime: {{service_instance_id}}",
              "range": true,
              "refId": "B"
            }
          ],
          "title": "Uptime by Service Instance",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "$datasource"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "custom": {
                "align": "auto",
                "cellOptions": {
                  "type": "auto"
                },
                "inspect": false
              },
              "links": [],
              "mappings": [],
              "min": 0,
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "s"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 5,
            "w": 24,
            "x": 0,
            "y": 64
          },
          "id": 57,
          "interval": "$minstep",
          "links": [],
          "options": {
            "cellHeight": "sm",
            "footer": {
              "countRows": false,
              "fields": "",
              "reducer": [
                "sum"
              ],
              "show": false
            },
            "showHeader": true
          },
          "pluginVersion": "10.0.3",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "$datasource"
              },
              "editorMode": "code",
              "exemplar": false,
              "expr": "max(otelcol_process_uptime{service_instance_id=~\".*\",job=\"$job\"}) by (service_instance_id,service_name,service_version)",
              "format": "table",
              "hide": false,
              "instant": true,
              "interval": "$minstep",
              "intervalFactor": 1,
              "legendFormat": "__auto",
              "range": false,
              "refId": "B"
            }
          ],
          "title": "Service Instance Details",
          "transformations": [
            {
              "id": "organize",
              "options": {
                "excludeByName": {
                  "Time": true,
                  "Value": true
                },
                "indexByName": {},
                "renameByName": {}
              }
            }
          ],
          "type": "table"
        },
        {
          "collapsed": false,
          "gridPos": {
            "h": 1,
            "w": 24,
            "x": 0,
            "y": 69
          },
          "id": 59,
          "panels": [],
          "title": "Data Flows",
          "type": "row"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "$datasource"
          },
          "description": "Receivers -> Processor(s) -> Exporters (Node Graph panel is beta, so this panel may not show data correctly).",
          "gridPos": {
            "h": 9,
            "w": 8,
            "x": 0,
            "y": 70
          },
          "id": 58,
          "options": {
            "nodes": {
              "mainStatUnit": "flops"
            }
          },
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "$datasource"
              },
              "editorMode": "code",
              "exemplar": false,
              "expr": "# receivers\nlabel_replace(\n  label_join(\n    label_join(\n      sum(${metric:value}(\n        otelcol_receiver_accepted_spans{receiver=~\"$receiver\",job=\"$job\"}[$__rate_interval])\n      ) by (receiver)\n      , \"id\", \"-rcv-\", \"transport\", \"receiver\"\n    )\n    , \"title\", \"\", \"transport\", \"receiver\"\n  )\n  , \"icon\", \"arrow-to-right\", \"\", \"\"\n)\n\n# dummy processor\nor\nlabel_replace(\n  label_replace(\n    label_replace(\n      (sum(rate(otelcol_process_uptime{job=\"$job\"}[$__interval])))\n      , \"id\", \"processor\", \"\", \"\"\n    )\n    , \"title\", \"Processor(s)\", \"\", \"\"\n  )\n  , \"icon\", \"arrow-random\", \"\", \"\"\n)\n\n# exporters\nor\nlabel_replace(\n  label_join(\n    label_join(\n      sum(${metric:value}(\n        otelcol_exporter_sent_spans{exporter=~\"$exporter\",job=\"$job\"}[$__rate_interval])\n      ) by (exporter)\n      , \"id\", \"-exp-\", \"transport\", \"exporter\"\n    )\n    , \"title\", \"\", \"transport\", \"exporter\"\n  )\n  , \"icon\", \"arrow-from-right\", \"\", \"\"\n)",
              "format": "table",
              "hide": false,
              "instant": true,
              "legendFormat": "__auto",
              "range": false,
              "refId": "nodes"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "$datasource"
              },
              "editorMode": "code",
              "exemplar": false,
              "expr": "# receivers -> processor\r\nlabel_join(\r\n    label_replace(\r\n        label_join(\r\n            (sum(rate(otelcol_receiver_accepted_spans{job=\"$job\"}[$__interval])) by (receiver))\r\n            ,\"source\", \"-rcv-\", \"transport\", \"receiver\"\r\n        )\r\n        ,\"target\", \"processor\", \"\", \"\"\r\n    )\r\n    , \"id\", \"-\", \"source\", \"target\"\r\n)\r\n\r\n# processor -> exporters\r\nor\r\nlabel_join(\r\n    label_replace(\r\n        label_join(\r\n            (sum(rate(otelcol_exporter_sent_spans{job=\"$job\"}[$__interval])) by (exporter))\r\n            , \"target\", \"-exp-\", \"transport\", \"exporter\"\r\n        )\r\n        , \"source\", \"processor\", \"\", \"\"\r\n    )\r\n    , \"id\", \"-\", \"source\", \"target\"\r\n)",
              "format": "table",
              "hide": false,
              "instant": true,
              "legendFormat": "__auto",
              "range": false,
              "refId": "edges"
            }
          ],
          "title": "Spans Flow",
          "transformations": [
            {
              "id": "renameByRegex",
              "options": {
                "regex": "Value",
                "renamePattern": "mainstat"
              }
            },
            {
              "disabled": true,
              "id": "calculateField",
              "options": {
                "alias": "secondarystat",
                "mode": "reduceRow",
                "reduce": {
                  "include": [
                    "mainstat"
                  ],
                  "reducer": "sum"
                }
              }
            }
          ],
          "type": "nodeGraph"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "$datasource"
          },
          "description": "Receivers -> Processor(s) -> Exporters (Node Graph panel is beta, so this panel may not show data correctly).",
          "gridPos": {
            "h": 9,
            "w": 8,
            "x": 8,
            "y": 70
          },
          "id": 60,
          "options": {
            "nodes": {
              "mainStatUnit": "none"
            }
          },
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "$datasource"
              },
              "editorMode": "code",
              "exemplar": false,
              "expr": "# receivers\nlabel_replace(\n  label_join(\n    label_join(\n      (sum(\n        ${metric:value}(otelcol_receiver_accepted_metric_points{receiver=~\"$receiver\",job=\"$job\"}[$__rate_interval])\n      ) by (receiver))\n      , \"id\", \"-rcv-\", \"transport\", \"receiver\"\n    )\n    , \"title\", \"\", \"transport\", \"receiver\"\n  )\n  , \"icon\", \"arrow-to-right\", \"\", \"\"\n)\n\n# dummy processor\nor\nlabel_replace(\n  label_replace(\n    label_replace(\n      (sum(rate(otelcol_process_uptime{job=\"$job\"}[$__interval])))\n      , \"id\", \"processor\", \"\", \"\"\n    )\n    , \"title\", \"Processor(s)\", \"\", \"\"\n  )\n  , \"icon\", \"arrow-random\", \"\", \"\"\n)\n\n# exporters\nor\nlabel_replace(\n  label_join(\n    label_join(\n      (sum(\n        ${metric:value}(otelcol_exporter_sent_metric_points{exporter=~\"$exporter\",job=\"$job\"}[$__rate_interval])\n      ) by (exporter))\n      , \"id\", \"-exp-\", \"transport\", \"exporter\"\n    )\n    , \"title\", \"\", \"transport\", \"exporter\"\n  )\n  , \"icon\", \"arrow-from-right\", \"\", \"\"\n)",
              "format": "table",
              "hide": false,
              "instant": true,
              "legendFormat": "__auto",
              "range": false,
              "refId": "nodes"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "$datasource"
              },
              "editorMode": "code",
              "exemplar": false,
              "expr": "# receivers -> processor\r\nlabel_join(\r\n    label_replace(\r\n        label_join(\r\n            (sum(rate(otelcol_receiver_accepted_metric_points{job=\"$job\"}[$__interval])) by (receiver))\r\n            , \"source\", \"-rcv-\", \"transport\", \"receiver\"\r\n        )\r\n        , \"target\", \"processor\", \"\", \"\"\r\n    )\r\n    , \"id\", \"-\", \"source\", \"target\"\r\n)\r\n\r\n# processor -> exporters\r\nor \r\nlabel_join(\r\n    label_replace(\r\n        label_join(\r\n            (sum(rate(otelcol_exporter_sent_metric_points{job=\"$job\"}[$__interval])) by (exporter))\r\n            , \"target\", \"-exp-\", \"transport\", \"exporter\"\r\n        )\r\n        , \"source\", \"processor\", \"\", \"\"\r\n    )\r\n    , \"id\", \"-\", \"source\", \"target\"\r\n)",
              "format": "table",
              "hide": false,
              "instant": true,
              "legendFormat": "__auto",
              "range": false,
              "refId": "edges"
            }
          ],
          "title": "Metric Points Flow",
          "transformations": [
            {
              "id": "renameByRegex",
              "options": {
                "regex": "Value",
                "renamePattern": "mainstat"
              }
            },
            {
              "disabled": true,
              "id": "calculateField",
              "options": {
                "alias": "secondarystat",
                "mode": "reduceRow",
                "reduce": {
                  "include": [
                    "Value #nodes"
                  ],
                  "reducer": "sum"
                }
              }
            }
          ],
          "type": "nodeGraph"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "$datasource"
          },
          "description": "Receivers -> Processor(s) -> Exporters (Node Graph panel is beta, so this panel may not show data correctly).",
          "gridPos": {
            "h": 9,
            "w": 8,
            "x": 16,
            "y": 70
          },
          "id": 61,
          "options": {
            "nodes": {
              "mainStatUnit": "flops"
            }
          },
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "$datasource"
              },
              "editorMode": "code",
              "exemplar": false,
              "expr": "# receivers\nlabel_replace(\n  label_join(\n    label_join(\n      sum(${metric:value}(\n        otelcol_receiver_accepted_log_records{receiver=~\"$receiver\",job=\"$job\"}[$__rate_interval])\n      ) by (receiver)\n      , \"id\", \"-rcv-\", \"transport\", \"receiver\"\n    )\n    , \"title\", \"\", \"transport\", \"receiver\"\n  )\n  , \"icon\", \"arrow-to-right\", \"\", \"\"\n)\n\n# dummy processor\nor\nlabel_replace(\n  label_replace(\n    label_replace(\n      (sum(rate(otelcol_process_uptime{job=\"$job\"}[$__interval])))\n      , \"id\", \"processor\", \"\", \"\"\n    )\n    , \"title\", \"Processor(s)\", \"\", \"\"\n  )\n  , \"icon\", \"arrow-random\", \"\", \"\"\n)\n\n# exporters\nor\nlabel_replace(\n  label_join(\n    label_join(\n      sum(${metric:value}(\n        otelcol_exporter_sent_log_records{exporter=~\"$exporter\",job=\"$job\"}[$__rate_interval])\n      ) by (exporter)\n      , \"id\", \"-exp-\", \"transport\", \"exporter\"\n    )\n    , \"title\", \"\", \"transport\", \"exporter\"\n  )\n  , \"icon\", \"arrow-from-right\", \"\", \"\"\n)",
              "format": "table",
              "hide": false,
              "instant": true,
              "legendFormat": "__auto",
              "range": false,
              "refId": "nodes"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "$datasource"
              },
              "editorMode": "code",
              "exemplar": false,
              "expr": "# receivers -> processor\r\nlabel_join(\r\n    label_replace(\r\n        label_join(\r\n            (sum(rate(otelcol_receiver_accepted_log_records{job=\"$job\"}[$__interval])) by (receiver))\r\n            , \"source\", \"-rcv-\", \"transport\", \"receiver\"\r\n        )\r\n        , \"target\", \"processor\", \"\", \"\"\r\n    )\r\n    , \"id\", \"-edg-\", \"source\", \"target\"\r\n)\r\n\r\n# processor -> exporters\r\nor \r\nlabel_join(\r\n    label_replace(\r\n        label_join(\r\n            (sum(rate(otelcol_exporter_sent_log_records{job=\"$job\"}[$__interval])) by (exporter))\r\n            ,\"target\",\"-exp-\",\"transport\",\"exporter\"\r\n        )\r\n        ,\"source\",\"processor\",\"\",\"\"\r\n    )\r\n    ,\"id\",\"-edg-\",\"source\",\"target\"\r\n)",
              "format": "table",
              "hide": false,
              "instant": true,
              "legendFormat": "__auto",
              "range": false,
              "refId": "edges"
            }
          ],
          "title": "Log Records Flow",
          "transformations": [
            {
              "id": "renameByRegex",
              "options": {
                "regex": "Value",
                "renamePattern": "mainstat"
              }
            },
            {
              "disabled": true,
              "id": "calculateField",
              "options": {
                "alias": "secondarystat",
                "mode": "reduceRow",
                "reduce": {
                  "include": [
                    "mainstat"
                  ],
                  "reducer": "sum"
                }
              }
            }
          ],
          "type": "nodeGraph"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "$datasource"
          },
          "editable": true,
          "error": false,
          "gridPos": {
            "h": 3,
            "w": 24,
            "x": 0,
            "y": 79
          },
          "id": 45,
          "links": [],
          "options": {
            "code": {
              "language": "plaintext",
              "showLineNumbers": false,
              "showMiniMap": false
            },
            "content": "<a href=\"http://www.monitoringartist.com\" target=\"_blank\" title=\"Dashboard maintained by Monitoring Artist - DevOps / Docker / Kubernetes / AWS ECS / Google GCP / Zabbix / Zenoss / Terraform / Monitoring\"><img src=\"https://monitoringartist.github.io/monitoring-artist-logo-grafana.png\" height=\"30px\" /></a> | \n<a target=\"_blank\" href=\"https://github.com/open-telemetry/opentelemetry-collector/blob/main/docs/troubleshooting.md#metrics\">OTEL collector troubleshooting (how to enable telemetry metrics)</a> | \n<a target=\"_blank\" href=\"https://opentelemetry.io/docs/collector/scaling/\">Scaling the Collector (metrics to watch)</a> | \n<a target=\"_blank\" href=\"https://grafana.com/grafana/dashboards/15983-opentelemetry-collector/\">Installed from Grafana.com dashboards</a>",
            "mode": "html"
          },
          "pluginVersion": "10.0.3",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "$datasource"
              },
              "refId": "A"
            }
          ],
          "title": "Documentation",
          "type": "text"
        }
      ],
      "refresh": "10s",
      "schemaVersion": 38,
      "style": "dark",
      "tags": [
        "opentelemetry",
        "monitoring"
      ],
      "templating": {
        "list": [
          {
            "current": {},
            "hide": 0,
            "includeAll": false,
            "label": "Datasource",
            "multi": false,
            "name": "datasource",
            "options": [],
            "query": "prometheus",
            "queryValue": "",
            "refresh": 1,
            "regex": "",
            "skipUrlSync": false,
            "type": "datasource"
          },
          {
            "current": {},
            "datasource": {
              "type": "prometheus",
              "uid": "$datasource"
            },
            "definition": "label_values(otelcol_process_uptime, job)",
            "hide": 0,
            "includeAll": false,
            "label": "Job",
            "multi": false,
            "name": "job",
            "options": [],
            "query": {
              "query": "label_values(otelcol_process_uptime, job)",
              "refId": "StandardVariableQuery"
            },
            "refresh": 1,
            "regex": "",
            "skipUrlSync": false,
            "sort": 1,
            "type": "query"
          },
          {
            "auto": true,
            "auto_count": 300,
            "auto_min": "10s",
            "current": {
              "selected": false,
              "text": "auto",
              "value": "$__auto_interval_minstep"
            },
            "hide": 0,
            "label": "Min step",
            "name": "minstep",
            "options": [
              {
                "selected": true,
                "text": "auto",
                "value": "$__auto_interval_minstep"
              },
              {
                "selected": false,
                "text": "10s",
                "value": "10s"
              },
              {
                "selected": false,
                "text": "30s",
                "value": "30s"
              },
              {
                "selected": false,
                "text": "1m",
                "value": "1m"
              },
              {
                "selected": false,
                "text": "5m",
                "value": "5m"
              }
            ],
            "query": "10s,30s,1m,5m",
            "queryValue": "",
            "refresh": 2,
            "skipUrlSync": false,
            "type": "interval"
          },
          {
            "current": {
              "selected": true,
              "text": "Rate",
              "value": "rate"
            },
            "hide": 0,
            "includeAll": false,
            "label": "Base metric",
            "multi": false,
            "name": "metric",
            "options": [
              {
                "selected": true,
                "text": "Rate",
                "value": "rate"
              },
              {
                "selected": false,
                "text": "Count",
                "value": "increase"
              }
            ],
            "query": "Rate : rate, Count : increase",
            "queryValue": "",
            "skipUrlSync": false,
            "type": "custom"
          },
          {
            "allValue": ".*",
            "current": {},
            "datasource": {
              "type": "prometheus",
              "uid": "$datasource"
            },
            "definition": "label_values(receiver)",
            "hide": 0,
            "includeAll": true,
            "label": "Receiver",
            "multi": false,
            "name": "receiver",
            "options": [],
            "query": {
              "query": "label_values(receiver)",
              "refId": "StandardVariableQuery"
            },
            "refresh": 2,
            "regex": "",
            "skipUrlSync": false,
            "sort": 1,
            "tagValuesQuery": "",
            "tagsQuery": "",
            "type": "query",
            "useTags": false
          },
          {
            "current": {},
            "datasource": {
              "type": "prometheus",
              "uid": "$datasource"
            },
            "definition": "label_values(processor)",
            "hide": 0,
            "includeAll": true,
            "label": "Processor",
            "multi": false,
            "name": "processor",
            "options": [],
            "query": {
              "query": "label_values(processor)",
              "refId": "StandardVariableQuery"
            },
            "refresh": 2,
            "regex": "",
            "skipUrlSync": false,
            "sort": 1,
            "tagValuesQuery": "",
            "tagsQuery": "",
            "type": "query",
            "useTags": false
          },
          {
            "allValue": ".*",
            "current": {},
            "datasource": {
              "type": "prometheus",
              "uid": "$datasource"
            },
            "definition": "label_values(exporter)",
            "hide": 0,
            "includeAll": true,
            "label": "Exporter",
            "multi": false,
            "name": "exporter",
            "options": [],
            "query": {
              "query": "label_values(exporter)",
              "refId": "StandardVariableQuery"
            },
            "refresh": 2,
            "regex": "",
            "skipUrlSync": false,
            "sort": 1,
            "tagValuesQuery": "",
            "tagsQuery": "",
            "type": "query",
            "useTags": false
          },
          {
            "current": {
              "selected": true,
              "text": "None (basic metrics)",
              "value": ""
            },
            "description": "Detailed metrics must be configured in the collector configuration. They add grouping by transport protocol (http/grpc) for receivers. ",
            "hide": 0,
            "includeAll": false,
            "label": "Additional groupping",
            "multi": false,
            "name": "grouping",
            "options": [
              {
                "selected": true,
                "text": "None (basic metrics)",
                "value": ""
              },
              {
                "selected": false,
                "text": "By transport (detailed metrics)",
                "value": ",transport"
              },
              {
                "selected": false,
                "text": "By service instance id",
                "value": ",service_instance_id"
              }
            ],
            "query": "None (basic metrics) :  , By transport (detailed metrics) : \\,transport, By service instance id : \\,service_instance_id",
            "queryValue": "",
            "skipUrlSync": false,
            "type": "custom"
          }
        ]
      },
      "time": {
        "from": "now-6h",
        "to": "now"
      },
      "timepicker": {
        "refresh_intervals": [
          "5s",
          "10s",
          "30s",
          "1m",
          "5m",
          "15m",
          "30m",
          "1h",
          "2h",
          "1d"
        ],
        "time_options": [
          "5m",
          "15m",
          "1h",
          "6h",
          "12h",
          "24h",
          "2d",
          "7d",
          "30d"
        ]
      },
      "timezone": "utc",
      "title": "OpenTelemetry Collector",
      "uid": "BKf2sowmj",
      "version": 72,
      "weekStart": ""
    }
kind: ConfigMap
metadata:
  labels:
    app.kubernetes.io/name: grafana
  name: dashboard-opentelemetry-collector-2bmbg4bb5b
  namespace: grafana
---
apiVersion: v1
data:
  opentelemetry-collector-data-flow.json: |
    {
      "annotations": {
        "list": [
          {
            "builtIn": 1,
            "datasource": {
              "type": "grafana",
              "uid": "-- Grafana --"
            },
            "enable": true,
            "hide": true,
            "iconColor": "rgba(0, 211, 255, 1)",
            "name": "Annotations & Alerts",
            "target": {
              "limit": 100,
              "matchAny": false,
              "tags": [],
              "type": "dashboard"
            },
            "type": "dashboard"
          }
        ]
      },
      "description": "otelcol metrics dashboard",
      "editable": true,
      "fiscalYearStartMonth": 0,
      "graphTooltip": 0,
      "id": 6,
      "links": [],
      "liveNow": false,
      "panels": [
        {
          "collapsed": false,
          "gridPos": {
            "h": 1,
            "w": 24,
            "x": 0,
            "y": 0
          },
          "id": 8,
          "panels": [],
          "title": "Process",
          "type": "row"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "webstore-metrics"
          },
          "description": "Otel Collector Instance",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "continuous-BlYlRd"
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 4,
            "w": 3,
            "x": 0,
            "y": 1
          },
          "id": 6,
          "options": {
            "colorMode": "value",
            "graphMode": "area",
            "justifyMode": "center",
            "orientation": "auto",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "",
              "values": false
            },
            "textMode": "auto"
          },
          "pluginVersion": "9.1.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "webstore-metrics"
              },
              "editorMode": "code",
              "expr": "count(count(otelcol_process_cpu_seconds{service_instance_id=~\".*\"}) by (service_instance_id))",
              "legendFormat": "__auto",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "Instance",
          "type": "stat"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "webstore-metrics"
          },
          "description": "otelcol_process_cpu_seconds",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "continuous-BlYlRd"
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "s"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 4,
            "w": 3,
            "x": 3,
            "y": 1
          },
          "id": 24,
          "options": {
            "orientation": "auto",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "",
              "values": false
            },
            "showThresholdLabels": false,
            "showThresholdMarkers": true
          },
          "pluginVersion": "9.1.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "webstore-metrics"
              },
              "editorMode": "code",
              "expr": "avg(rate(otelcol_process_cpu_seconds{}[$__rate_interval])*100) by (instance)",
              "legendFormat": "__auto",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "Cpu",
          "type": "gauge"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "webstore-metrics"
          },
          "description": "Memory Rss\navg(otelcol_process_memory_rss{}) by (instance)",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "continuous-BlYlRd"
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "bytes"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 4,
            "w": 3,
            "x": 6,
            "y": 1
          },
          "id": 38,
          "options": {
            "orientation": "auto",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "",
              "values": false
            },
            "showThresholdLabels": false,
            "showThresholdMarkers": true
          },
          "pluginVersion": "9.1.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "webstore-metrics"
              },
              "editorMode": "code",
              "expr": "avg(otelcol_process_memory_rss{}) by (instance)",
              "legendFormat": "__auto",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "Memory",
          "type": "gauge"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "webstore-metrics"
          },
          "description": "",
          "gridPos": {
            "h": 4,
            "w": 15,
            "x": 9,
            "y": 1
          },
          "id": 32,
          "options": {
            "code": {
              "language": "plaintext",
              "showLineNumbers": false,
              "showMiniMap": false
            },
            "content": "## Opentelemetry Collector Data Ingress/Egress\n\n`service_version:` ${service_version}\n\n`opentelemetry collector:` contrib\n\n",
            "mode": "markdown"
          },
          "pluginVersion": "9.1.0",
          "type": "text"
        },
        {
          "collapsed": false,
          "gridPos": {
            "h": 1,
            "w": 24,
            "x": 0,
            "y": 5
          },
          "id": 10,
          "panels": [],
          "title": "Trace Pipeline",
          "type": "row"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "webstore-metrics"
          },
          "description": "(avg(sum by(job) (rate(otelcol_exporter_sent_spans{}[$__range]))) / avg(sum by(job) (rate(otelcol_receiver_accepted_spans{}[$__range])))) ",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "mappings": [],
              "min": 0,
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "light-blue",
                    "value": null
                  },
                  {
                    "color": "semi-dark-red",
                    "value": 0
                  },
                  {
                    "color": "super-light-orange",
                    "value": 0.4
                  },
                  {
                    "color": "dark-blue",
                    "value": 0.9
                  },
                  {
                    "color": "super-light-orange",
                    "value": 1.2
                  },
                  {
                    "color": "dark-red",
                    "value": 2.1
                  }
                ]
              },
              "unit": "percentunit"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 19,
            "w": 3,
            "x": 0,
            "y": 6
          },
          "id": 55,
          "options": {
            "orientation": "vertical",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "",
              "values": false
            },
            "showThresholdLabels": false,
            "showThresholdMarkers": false
          },
          "pluginVersion": "9.1.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "webstore-metrics"
              },
              "editorMode": "code",
              "exemplar": false,
              "expr": "avg(sum by(job) (rate(otelcol_exporter_sent_spans{}[$__range])))",
              "format": "time_series",
              "hide": true,
              "instant": false,
              "legendFormat": "__auto",
              "range": true,
              "refId": "export"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "webstore-metrics"
              },
              "editorMode": "code",
              "expr": "avg(sum by(job) (rate(otelcol_receiver_accepted_spans{}[$__range])))",
              "format": "time_series",
              "hide": true,
              "legendFormat": "__auto",
              "range": true,
              "refId": "acc"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "webstore-metrics"
              },
              "editorMode": "code",
              "expr": "(avg(sum by(job) (rate(otelcol_exporter_sent_spans{}[$__range]))) / avg(sum by(job) (rate(otelcol_receiver_accepted_spans{}[$__range])))) ",
              "hide": false,
              "legendFormat": "__auto",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "Export Ratio",
          "transformations": [],
          "type": "gauge"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "webstore-metrics"
          },
          "gridPos": {
            "h": 11,
            "w": 21,
            "x": 3,
            "y": 6
          },
          "id": 4,
          "options": {
            "nodes": {
              "mainStatUnit": "flops"
            }
          },
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "webstore-metrics"
              },
              "editorMode": "code",
              "exemplar": false,
              "expr": "label_join(label_join(\n(rate(otelcol_receiver_accepted_spans{}[$__interval]))\n, \"id\", \"\", \"transport\", \"receiver\")\n, \"title\", \"\", \"transport\", \"receiver\")\n\nor\n\nlabel_replace(label_replace(\nsum by(service_name) (rate(otelcol_receiver_accepted_spans{}[$__interval]))\n, \"id\", \"processor\", \"dummynode\", \"\")\n, \"title\", \"processor\", \"dummynode\", \"\")\n\nor\nlabel_replace(label_replace(\n(rate(otelcol_processor_batch_batch_send_size_count{}[$__interval]))\n, \"id\", \"$0\", \"processor\", \".*\")\n, \"title\", \"$0\", \"processor\", \".*\")\n\nor\nlabel_replace(label_replace(\nsum by(exporter) (rate(otelcol_exporter_sent_spans{}[$__interval]))\n, \"id\", \"exporter\", \"dummynode\", \"\")\n, \"title\", \"exporter\", \"dummynode\", \"\")\n        \nor\nlabel_replace(label_replace(\nsum by(exporter) (rate(otelcol_exporter_sent_spans{}[$__interval]))\n, \"id\", \"$0\", \"exporter\", \".*\")\n, \"title\", \"$0\", \"exporter\", \".*\")",
              "format": "table",
              "instant": true,
              "legendFormat": "__auto",
              "range": false,
              "refId": "nodes"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "webstore-metrics"
              },
              "editorMode": "code",
              "exemplar": false,
              "expr": "label_join(\nlabel_replace(label_join(\n(rate(otelcol_receiver_accepted_spans{}[$__interval]))\n\n ,\"source\",\"\",\"transport\",\"receiver\")\n,\"target\",\"processor\",\"\",\"\")\n,\"id\",\"-\",\"source\",\"target\")\n\n  or\n\n  label_join(\nlabel_replace(label_replace(\n  (rate(otelcol_processor_batch_batch_send_size_count{}[$__interval]))\n ,\"source\",\"processor\",\"\",\"\")\n,\"target\",\"$0\",\"processor\",\".*\")\n,\"id\",\"-\",\"source\",\"target\")\n\nor\n  label_join(\nlabel_replace(label_replace(\n    (rate(otelcol_processor_batch_batch_send_size_count{}[$__interval]))\n ,\"source\",\"$0\",\"processor\",\".*\")\n,\"target\",\"exporter\",\"\",\"\")\n,\"id\",\"-\",\"source\",\"target\")\n\nor\n  label_join(\nlabel_replace(label_replace(\n   (rate(otelcol_exporter_sent_spans{}[$__interval]))\n ,\"source\",\"exporter\",\"\",\"\")\n,\"target\",\"$0\",\"exporter\",\".*\")\n,\"id\",\"-\",\"source\",\"target\")\n\n",
              "format": "table",
              "hide": false,
              "instant": true,
              "legendFormat": "__auto",
              "range": false,
              "refId": "edges"
            }
          ],
          "transformations": [],
          "type": "nodeGraph"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "webstore-metrics"
          },
          "description": "Spans Accepted by Receiver and Transport",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "continuous-BlYlRd"
              },
              "mappings": [],
              "noValue": "no data",
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "text",
                    "value": null
                  }
                ]
              },
              "unit": "none"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 5,
            "w": 5,
            "x": 3,
            "y": 17
          },
          "id": 12,
          "options": {
            "colorMode": "value",
            "graphMode": "area",
            "justifyMode": "auto",
            "orientation": "horizontal",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "",
              "values": false
            },
            "textMode": "auto"
          },
          "pluginVersion": "9.1.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "webstore-metrics"
              },
              "editorMode": "code",
              "expr": "sum(rate(otelcol_receiver_accepted_spans{}[$__rate_interval])) by (receiver,transport)",
              "legendFormat": "{{receiver}}-{{transport}}",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "Accepted",
          "type": "stat"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "webstore-metrics"
          },
          "description": "Total Spans Accepted ",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "continuous-BlYlRd"
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "text",
                    "value": null
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 5,
            "w": 3,
            "x": 8,
            "y": 17
          },
          "id": 13,
          "options": {
            "orientation": "horizontal",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "",
              "values": false
            },
            "showThresholdLabels": false,
            "showThresholdMarkers": true
          },
          "pluginVersion": "9.1.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "webstore-metrics"
              },
              "editorMode": "code",
              "expr": "sum(rate(otelcol_receiver_accepted_spans{}[$__rate_interval])) ",
              "legendFormat": "{{receiver}}-{{transport}}",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "Total ",
          "type": "gauge"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "webstore-metrics"
          },
          "description": "Total Batch Processed",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "continuous-BlYlRd"
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "#EAB839",
                    "value": 1
                  }
                ]
              },
              "unit": "none"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 5,
            "w": 5,
            "x": 11,
            "y": 17
          },
          "id": 15,
          "options": {
            "colorMode": "value",
            "graphMode": "area",
            "justifyMode": "auto",
            "orientation": "horizontal",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "",
              "values": false
            },
            "text": {},
            "textMode": "auto"
          },
          "pluginVersion": "9.1.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "webstore-metrics"
              },
              "editorMode": "code",
              "expr": "sum(rate(otelcol_processor_batch_batch_send_size_sum{}[$__rate_interval]))  by (processor)",
              "legendFormat": "{{processor}}",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "Batch",
          "type": "stat"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "webstore-metrics"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "continuous-BlYlRd"
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "text",
                    "value": null
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 5,
            "w": 3,
            "x": 16,
            "y": 17
          },
          "id": 14,
          "options": {
            "orientation": "auto",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "",
              "values": false
            },
            "showThresholdLabels": false,
            "showThresholdMarkers": true
          },
          "pluginVersion": "9.1.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "webstore-metrics"
              },
              "editorMode": "code",
              "exemplar": false,
              "expr": "sum(rate(otelcol_exporter_sent_spans{}[$__interval])) ",
              "format": "time_series",
              "instant": false,
              "legendFormat": "{{processor}}",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "Total ",
          "type": "gauge"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "webstore-metrics"
          },
          "description": "Sent by Exporter",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "continuous-BlYlRd"
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "text",
                    "value": null
                  }
                ]
              },
              "unit": "none"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 5,
            "w": 5,
            "x": 19,
            "y": 17
          },
          "id": 30,
          "options": {
            "colorMode": "value",
            "graphMode": "area",
            "justifyMode": "auto",
            "orientation": "horizontal",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "",
              "values": false
            },
            "textMode": "auto"
          },
          "pluginVersion": "9.1.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "webstore-metrics"
              },
              "editorMode": "code",
              "exemplar": false,
              "expr": "sum(rate(otelcol_exporter_sent_spans{}[$__rate_interval])) by (exporter)",
              "format": "time_series",
              "instant": false,
              "legendFormat": "{{processor}}",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "Sent",
          "type": "stat"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "webstore-metrics"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "continuous-BlYlRd"
              },
              "mappings": [],
              "noValue": "no data",
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "text",
                    "value": null
                  }
                ]
              },
              "unit": "none"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 3,
            "w": 5,
            "x": 3,
            "y": 22
          },
          "id": 17,
          "options": {
            "colorMode": "value",
            "graphMode": "area",
            "justifyMode": "auto",
            "orientation": "horizontal",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "",
              "values": false
            },
            "textMode": "auto"
          },
          "pluginVersion": "9.1.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "webstore-metrics"
              },
              "editorMode": "code",
              "expr": "sum(rate(otelcol_receiver_refused_spans{}[$__rate_interval])) by (receiver,transport)",
              "legendFormat": "{{receiver}}-{{transport}}",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "Refused",
          "type": "stat"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "webstore-metrics"
          },
          "description": "Total Spans Accepted ",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "continuous-BlYlRd"
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "text",
                    "value": null
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 3,
            "w": 3,
            "x": 8,
            "y": 22
          },
          "id": 18,
          "options": {
            "orientation": "auto",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "",
              "values": false
            },
            "showThresholdLabels": false,
            "showThresholdMarkers": true
          },
          "pluginVersion": "9.1.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "webstore-metrics"
              },
              "editorMode": "code",
              "expr": "sum(rate(otelcol_receiver_refused_spans{}[$__rate_interval])) ",
              "legendFormat": "{{receiver}}-{{transport}}",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "Total ",
          "type": "gauge"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "webstore-metrics"
          },
          "description": "otelcol_exporter_send_failed_spans",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "continuous-BlYlRd"
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "text",
                    "value": null
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 3,
            "w": 3,
            "x": 16,
            "y": 22
          },
          "id": 19,
          "options": {
            "orientation": "auto",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "",
              "values": false
            },
            "showThresholdLabels": false,
            "showThresholdMarkers": true
          },
          "pluginVersion": "9.1.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "webstore-metrics"
              },
              "editorMode": "code",
              "exemplar": false,
              "expr": "sum(rate(otelcol_exporter_send_failed_spans{}[$__rate_interval])) ",
              "format": "time_series",
              "instant": false,
              "legendFormat": "{{processor}}",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "Total ",
          "type": "gauge"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "webstore-metrics"
          },
          "description": "Sent by Exporter\notelcol_exporter_send_failed_spans",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "continuous-BlYlRd"
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "text",
                    "value": null
                  }
                ]
              },
              "unit": "none"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 3,
            "w": 5,
            "x": 19,
            "y": 22
          },
          "id": 20,
          "options": {
            "colorMode": "value",
            "graphMode": "area",
            "justifyMode": "auto",
            "orientation": "horizontal",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "",
              "values": false
            },
            "textMode": "auto"
          },
          "pluginVersion": "9.1.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "webstore-metrics"
              },
              "editorMode": "code",
              "exemplar": false,
              "expr": "sum(rate(otelcol_exporter_send_failed_spans{}[$__rate_interval])) by (exporter)",
              "format": "time_series",
              "instant": false,
              "legendFormat": "{{processor}}",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "Failed",
          "type": "stat"
        },
        {
          "collapsed": false,
          "gridPos": {
            "h": 1,
            "w": 24,
            "x": 0,
            "y": 25
          },
          "id": 22,
          "panels": [],
          "title": "Metrics Pipeline",
          "type": "row"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "webstore-metrics"
          },
          "description": "avg(sum by(job) (rate(otelcol_exporter_sent_metric_points{}[$__range]))) versus avg(sum by(job) (rate(otelcol_receiver_accepted_metric_points{}[$__range])))",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "mappings": [],
              "min": 0,
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "light-blue",
                    "value": null
                  },
                  {
                    "color": "semi-dark-red",
                    "value": 0
                  },
                  {
                    "color": "super-light-orange",
                    "value": 0.4
                  },
                  {
                    "color": "dark-blue",
                    "value": 0.9
                  },
                  {
                    "color": "super-light-orange",
                    "value": 1.2
                  },
                  {
                    "color": "dark-red",
                    "value": 2.1
                  }
                ]
              },
              "unit": "percentunit"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 19,
            "w": 3,
            "x": 0,
            "y": 26
          },
          "id": 54,
          "options": {
            "orientation": "vertical",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "/.*/",
              "values": false
            },
            "showThresholdLabels": false,
            "showThresholdMarkers": false
          },
          "pluginVersion": "9.1.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "webstore-metrics"
              },
              "editorMode": "code",
              "exemplar": false,
              "expr": "avg(sum by(job) (rate(otelcol_exporter_sent_metric_points{}[$__range])))",
              "format": "time_series",
              "hide": true,
              "instant": false,
              "legendFormat": "__auto",
              "range": true,
              "refId": "export"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "webstore-metrics"
              },
              "editorMode": "code",
              "expr": "avg(sum by(job) (rate(otelcol_receiver_accepted_metric_points{}[$__range])))",
              "format": "time_series",
              "hide": true,
              "legendFormat": "__auto",
              "range": true,
              "refId": "acc"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "webstore-metrics"
              },
              "editorMode": "code",
              "expr": "( avg(sum by(job) (rate(otelcol_exporter_sent_metric_points{}[$__range]))) /avg(sum by(job) (rate(otelcol_receiver_accepted_metric_points{}[$__range]))))",
              "hide": false,
              "legendFormat": "__auto",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "Export Ratio",
          "transformations": [
            {
              "id": "calculateField",
              "options": {
                "alias": "percent",
                "binary": {
                  "left": "avg(sum by(job) (rate(otelcol_exporter_sent_metric_points{}[3600s])))",
                  "operator": "/",
                  "reducer": "sum",
                  "right": "avg(sum by(job) (rate(otelcol_receiver_accepted_metric_points{}[3600s])))"
                },
                "mode": "binary",
                "reduce": {
                  "reducer": "sum"
                }
              }
            },
            {
              "id": "organize",
              "options": {
                "excludeByName": {
                  "(sum(rate(otelcol_exporter_sent_metric_points{exporter=\"prometheus\"}[1m0s])) )": true,
                  "Time": true,
                  "avg(sum by(job) (rate(otelcol_exporter_sent_metric_points{}[3600s])))": true,
                  "avg(sum by(job) (rate(otelcol_receiver_accepted_metric_points{}[3600s])))": true,
                  "{instance=\"otelcol:9464\", job=\"otel\"}": true
                },
                "indexByName": {},
                "renameByName": {
                  "Time": "",
                  "percent": "Percent",
                  "{exporter=\"debug\", instance=\"otelcol:8888\", job=\"otel-collector\", service_instance_id=\"fbfa720a-ebf9-45c8-a79a-9d3b6021a663\", service_name=\"otelcol-contrib\", service_version=\"0.70.0\"}": ""
                }
              }
            }
          ],
          "type": "gauge"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "webstore-metrics"
          },
          "description": "Metrics Signalling Pipelines",
          "gridPos": {
            "h": 11,
            "w": 21,
            "x": 3,
            "y": 26
          },
          "id": 25,
          "options": {
            "nodes": {
              "mainStatUnit": "flops"
            }
          },
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "webstore-metrics"
              },
              "editorMode": "code",
              "exemplar": false,
              "expr": "\nlabel_join(label_join(\n(rate(otelcol_receiver_accepted_metric_points{}[$__interval]))\n, \"id\", \"\", \"transport\", \"receiver\")\n, \"title\", \"\", \"transport\", \"receiver\")\n\nor\n\nlabel_replace(label_replace(\nsum by(service_name) (rate(otelcol_receiver_accepted_spans{}[$__interval]))\n, \"id\", \"processor\", \"dummynode\", \"\")\n, \"title\", \"processor\", \"dummynode\", \"\")\n\n\n\nor\nlabel_replace(label_replace(\n(rate(otelcol_processor_batch_batch_send_size_count{}[$__interval]))\n, \"id\", \"$0\", \"processor\", \".*\")\n, \"title\", \"$0\", \"processor\", \".*\")\n\n\n\n\n\nor\nlabel_replace(label_replace(\nsum (rate(otelcol_exporter_sent_metric_points{}[$__interval]))\n, \"id\", \"exporter\", \"dummynode\", \"\")\n, \"title\", \"exporter\", \"dummynode\", \"\")\n\nor\nlabel_replace(label_replace(\nsum by(exporter) (rate(otelcol_exporter_sent_metric_points{}[$__interval]))\n, \"id\", \"$0\", \"exporter\", \".*\")\n, \"title\", \"$0\", \"exporter\", \".*\")",
              "format": "table",
              "instant": true,
              "legendFormat": "__auto",
              "range": false,
              "refId": "nodes"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "webstore-metrics"
              },
              "editorMode": "code",
              "exemplar": false,
              "expr": "label_join(\nlabel_replace(label_join(\n(rate(otelcol_receiver_accepted_metric_points{}[$__interval]))\n\n,\"source\",\"\",\"transport\",\"receiver\")\n,\"target\",\"processor\",\"\",\"\")\n,\"id\",\"-\",\"source\",\"target\")\n\n\nor\n\nlabel_join(\nlabel_replace(label_replace(\n(rate(otelcol_processor_batch_batch_send_size_count{}[$__interval]))\n,\"source\",\"processor\",\"\",\"\")\n,\"target\",\"$0\",\"processor\",\".*\")\n,\"id\",\"-\",\"source\",\"target\")\n\n\n\n\n\nor\n\n\nlabel_join(\nlabel_replace(label_replace(\n(rate(otelcol_processor_batch_batch_send_size_count{}[$__interval]))\n,\"source\",\"$0\",\"processor\",\".*\")\n,\"target\",\"exporter\",\"\",\"\")\n,\"id\",\"-\",\"source\",\"target\")\n\nor\nlabel_join(\nlabel_replace(label_replace(\n(rate(otelcol_exporter_sent_metric_points{}[$__interval]))\n,\"source\",\"exporter\",\"\",\"\")\n,\"target\",\"$0\",\"exporter\",\".*\")\n,\"id\",\"-\",\"source\",\"target\")",
              "format": "table",
              "hide": false,
              "instant": true,
              "legendFormat": "__auto",
              "range": false,
              "refId": "edges"
            }
          ],
          "transformations": [],
          "type": "nodeGraph"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "webstore-metrics"
          },
          "description": "otelcol_receiver_accepted_metric_points",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "continuous-BlYlRd"
              },
              "mappings": [],
              "noValue": "no data",
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "text",
                    "value": null
                  }
                ]
              },
              "unit": "none"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 5,
            "w": 5,
            "x": 3,
            "y": 37
          },
          "id": 26,
          "options": {
            "colorMode": "value",
            "graphMode": "area",
            "justifyMode": "auto",
            "orientation": "horizontal",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "",
              "values": false
            },
            "textMode": "auto"
          },
          "pluginVersion": "9.1.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "webstore-metrics"
              },
              "editorMode": "code",
              "expr": "sum(rate(otelcol_receiver_accepted_metric_points{}[$__rate_interval])) by (receiver,transport)",
              "legendFormat": "{{receiver}}-{{transport}}",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "Accepted",
          "type": "stat"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "webstore-metrics"
          },
          "description": "otelcol_receiver_accepted_metric_points\nTotal Accepted ",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "continuous-BlYlRd"
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "text",
                    "value": null
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 5,
            "w": 3,
            "x": 8,
            "y": 37
          },
          "id": 27,
          "options": {
            "orientation": "auto",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "",
              "values": false
            },
            "showThresholdLabels": false,
            "showThresholdMarkers": true
          },
          "pluginVersion": "9.1.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "webstore-metrics"
              },
              "editorMode": "code",
              "expr": "sum(rate(otelcol_receiver_accepted_metric_points{}[$__rate_interval])) ",
              "legendFormat": "{{receiver}}-{{transport}}",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "Total ",
          "type": "gauge"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "webstore-metrics"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "continuous-BlYlRd"
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "#EAB839",
                    "value": 1
                  }
                ]
              },
              "unit": "none"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 5,
            "w": 5,
            "x": 11,
            "y": 37
          },
          "id": 28,
          "options": {
            "colorMode": "value",
            "graphMode": "area",
            "justifyMode": "auto",
            "orientation": "horizontal",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "",
              "values": false
            },
            "text": {},
            "textMode": "auto"
          },
          "pluginVersion": "9.1.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "webstore-metrics"
              },
              "editorMode": "code",
              "expr": "sum(rate(otelcol_processor_batch_batch_send_size_sum{}[$__rate_interval]))  by (processor)",
              "legendFormat": "{{processor}}",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "Batch",
          "type": "stat"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "webstore-metrics"
          },
          "description": "Total Export ",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "continuous-BlYlRd"
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "text",
                    "value": null
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 5,
            "w": 3,
            "x": 16,
            "y": 37
          },
          "id": 29,
          "options": {
            "orientation": "auto",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "",
              "values": false
            },
            "showThresholdLabels": false,
            "showThresholdMarkers": true
          },
          "pluginVersion": "9.1.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "webstore-metrics"
              },
              "editorMode": "code",
              "exemplar": false,
              "expr": "sum(rate(otelcol_exporter_sent_metric_points{}[$__rate_interval])) ",
              "format": "time_series",
              "instant": false,
              "legendFormat": "{{processor}}",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "Total ",
          "type": "gauge"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "webstore-metrics"
          },
          "description": "Sent by Exporter",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "continuous-BlYlRd"
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "text",
                    "value": null
                  }
                ]
              },
              "unit": "none"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 5,
            "w": 5,
            "x": 19,
            "y": 37
          },
          "id": 16,
          "options": {
            "colorMode": "value",
            "graphMode": "area",
            "justifyMode": "auto",
            "orientation": "horizontal",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "",
              "values": false
            },
            "textMode": "auto"
          },
          "pluginVersion": "9.1.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "webstore-metrics"
              },
              "editorMode": "code",
              "exemplar": false,
              "expr": "sum(rate(otelcol_exporter_sent_metric_points{}[$__rate_interval])) by (exporter) ",
              "format": "time_series",
              "instant": false,
              "legendFormat": "{{processor}}",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "Sent",
          "type": "stat"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "webstore-metrics"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "continuous-BlYlRd"
              },
              "mappings": [],
              "noValue": "no data",
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "text",
                    "value": null
                  }
                ]
              },
              "unit": "none"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 3,
            "w": 5,
            "x": 3,
            "y": 42
          },
          "id": 47,
          "options": {
            "colorMode": "value",
            "graphMode": "area",
            "justifyMode": "auto",
            "orientation": "horizontal",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "",
              "values": false
            },
            "textMode": "auto"
          },
          "pluginVersion": "9.1.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "webstore-metrics"
              },
              "editorMode": "code",
              "expr": "sum(rate(otelcol_receiver_refused_metric_points{}[$__rate_interval])) by (receiver,transport)",
              "legendFormat": "{{receiver}}-{{transport}}",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "Refused",
          "type": "stat"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "webstore-metrics"
          },
          "description": "Total Refused \nsum(rate(otelcol_receiver_refused_metric_points{}[$__rate_interval])) ",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "continuous-BlYlRd"
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "text",
                    "value": null
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 3,
            "w": 3,
            "x": 8,
            "y": 42
          },
          "id": 48,
          "options": {
            "orientation": "auto",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "",
              "values": false
            },
            "showThresholdLabels": false,
            "showThresholdMarkers": true
          },
          "pluginVersion": "9.1.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "webstore-metrics"
              },
              "editorMode": "code",
              "expr": "sum(rate(otelcol_receiver_refused_metric_points{}[$__rate_interval])) ",
              "legendFormat": "{{receiver}}-{{transport}}",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "Total ",
          "type": "gauge"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "webstore-metrics"
          },
          "description": "Total Failed Export ",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "continuous-BlYlRd"
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "text",
                    "value": null
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 3,
            "w": 3,
            "x": 16,
            "y": 42
          },
          "id": 49,
          "options": {
            "orientation": "auto",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "",
              "values": false
            },
            "showThresholdLabels": false,
            "showThresholdMarkers": true
          },
          "pluginVersion": "9.1.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "webstore-metrics"
              },
              "editorMode": "code",
              "exemplar": false,
              "expr": "sum(rate(otelcol_exporter_send_failed_metric_points{}[$__rate_interval])) ",
              "format": "time_series",
              "instant": false,
              "legendFormat": "{{processor}}",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "Total",
          "type": "gauge"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "webstore-metrics"
          },
          "description": "Sent by Exporter\notelcol_exporter_send_failed_spans",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "continuous-BlYlRd"
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "text",
                    "value": null
                  }
                ]
              },
              "unit": "none"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 3,
            "w": 5,
            "x": 19,
            "y": 42
          },
          "id": 50,
          "options": {
            "colorMode": "value",
            "graphMode": "area",
            "justifyMode": "auto",
            "orientation": "horizontal",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "",
              "values": false
            },
            "textMode": "auto"
          },
          "pluginVersion": "9.1.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "webstore-metrics"
              },
              "editorMode": "code",
              "exemplar": false,
              "expr": "sum(rate(otelcol_exporter_send_failed_metric_points{}[$__rate_interval])) by (exporter)",
              "format": "time_series",
              "instant": false,
              "legendFormat": "{{processor}}",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "Failed",
          "type": "stat"
        },
        {
          "collapsed": false,
          "gridPos": {
            "h": 1,
            "w": 24,
            "x": 0,
            "y": 45
          },
          "id": 35,
          "panels": [],
          "title": "Prometheus Scrape",
          "type": "row"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "webstore-metrics"
          },
          "description": "otelcol prometheus exporter 8888 export rate versus prometheus scrape metrics",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "mappings": [],
              "min": 0,
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "light-blue",
                    "value": null
                  },
                  {
                    "color": "semi-dark-red",
                    "value": 0
                  },
                  {
                    "color": "super-light-orange",
                    "value": 0.4
                  },
                  {
                    "color": "dark-blue",
                    "value": 0.9
                  },
                  {
                    "color": "super-light-orange",
                    "value": 1.2
                  },
                  {
                    "color": "dark-red",
                    "value": 2.1
                  }
                ]
              },
              "unit": "percentunit"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 9,
            "w": 3,
            "x": 0,
            "y": 46
          },
          "id": 53,
          "options": {
            "orientation": "vertical",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "/.*/",
              "values": false
            },
            "showThresholdLabels": false,
            "showThresholdMarkers": false
          },
          "pluginVersion": "9.1.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "webstore-metrics"
              },
              "editorMode": "code",
              "exemplar": false,
              "expr": "(sum_over_time(scrape_samples_scraped{job=\"otel-collector\"}[$__range])/ count_over_time(scrape_samples_scraped{job=\"otel-collector\"}[$__range])/(5*30)) ",
              "format": "time_series",
              "instant": false,
              "legendFormat": "__auto",
              "range": true,
              "refId": "accepted"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "webstore-metrics"
              },
              "editorMode": "code",
              "expr": "(sum(rate(otelcol_exporter_sent_metric_points{exporter=\"prometheus\"}[$__rate_interval])) )",
              "format": "time_series",
              "hide": false,
              "legendFormat": "__auto",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "Exported/Scraped",
          "transformations": [
            {
              "id": "calculateField",
              "options": {
                "alias": "percent",
                "binary": {
                  "left": "{instance=\"otelcol:9464\", job=\"otel-collector\"}",
                  "operator": "/",
                  "reducer": "sum",
                  "right": "(sum(rate(otelcol_exporter_sent_metric_points{exporter=\"prometheus\"}[1m0s])) )"
                },
                "mode": "binary",
                "reduce": {
                  "reducer": "sum"
                }
              }
            },
            {
              "id": "organize",
              "options": {
                "excludeByName": {
                  "(sum(rate(otelcol_exporter_sent_metric_points{exporter=\"prometheus\"}[1m0s])) )": true,
                  "Time": true,
                  "{instance=\"otelcol:9464\", job=\"otel\"}": true
                },
                "indexByName": {},
                "renameByName": {
                  "percent": "Percent"
                }
              }
            }
          ],
          "type": "gauge"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "webstore-metrics"
          },
          "description": "sum_over_time(scrape_samples_scraped[$__range])/ count_over_time(scrape_samples_scraped[$__range])",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "continuous-BlYlRd"
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 9,
            "w": 5,
            "x": 3,
            "y": 46
          },
          "id": 37,
          "options": {
            "colorMode": "value",
            "graphMode": "area",
            "justifyMode": "auto",
            "orientation": "horizontal",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "",
              "values": false
            },
            "textMode": "value_and_name"
          },
          "pluginVersion": "9.1.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "webstore-metrics"
              },
              "editorMode": "code",
              "exemplar": false,
              "expr": "sum_over_time(scrape_samples_scraped[$__range])/ count_over_time(scrape_samples_scraped[$__range])/(5*30)",
              "format": "time_series",
              "instant": false,
              "legendFormat": "{{job}}/{{instance}}",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "Samples Scraped",
          "type": "stat"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "webstore-metrics"
          },
          "description": "scrape_samples_scraped{job!=\"\"}\nTotal Samples Scraped",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "continuous-BlYlRd"
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 9,
            "w": 3,
            "x": 8,
            "y": 46
          },
          "id": 42,
          "options": {
            "orientation": "horizontal",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "",
              "values": false
            },
            "showThresholdLabels": false,
            "showThresholdMarkers": true
          },
          "pluginVersion": "9.1.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "webstore-metrics"
              },
              "editorMode": "code",
              "exemplar": false,
              "expr": "sum_over_time(scrape_samples_scraped[$__range])/ count_over_time(scrape_samples_scraped[$__range])/(5*30)",
              "format": "time_series",
              "hide": false,
              "instant": false,
              "legendFormat": "__auto",
              "range": true,
              "refId": "B"
            }
          ],
          "title": "Total",
          "transformations": [
            {
              "id": "calculateField",
              "options": {
                "mode": "reduceRow",
                "reduce": {
                  "include": [
                    "{instance=\"otelcol:8888\", job=\"otel-collector\"}"
                  ],
                  "reducer": "sum"
                },
                "replaceFields": true
              }
            }
          ],
          "type": "gauge"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "webstore-metrics"
          },
          "gridPos": {
            "h": 9,
            "w": 8,
            "x": 11,
            "y": 46
          },
          "id": 41,
          "pluginVersion": "9.1.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "webstore-metrics"
              },
              "editorMode": "code",
              "exemplar": false,
              "expr": "label_replace(label_replace(label_replace(\nsum (scrape_samples_scraped{job!=\"\"}) by (instance)\n, \"id\", \"$0\", \"instance\", \".*\")\n, \"title\", \"$0\", \"instance\", \".*\")\n,\"mainstat\",\"\",\"\",\"\")\n\nor \n\nlabel_replace(label_replace(label_replace(\nsum (scrape_samples_scraped{job!=\"\"})\n, \"id\", \"prometheus\", \"\", \"\")\n, \"title\", \"prometheus\", \"\", \"\")\n,\"mainstat\",\"\",\"\",\"\")\n",
              "format": "table",
              "hide": false,
              "instant": true,
              "legendFormat": "__auto",
              "range": false,
              "refId": "nodes"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "webstore-metrics"
              },
              "editorMode": "code",
              "exemplar": false,
              "expr": "label_join(\nlabel_replace(label_replace(\nsum (scrape_samples_scraped{job!=\"\"}) by (instance)\n,\"source\",\"$0\",\"instance\",\".*\")\n,\"target\",\"prometheus\",\"\",\"\")\n,\"id\",\"-\",\"source\",\"target\")",
              "format": "table",
              "hide": false,
              "instant": true,
              "legendFormat": "__auto",
              "range": false,
              "refId": "edges"
            }
          ],
          "transformations": [
            {
              "id": "organize",
              "options": {
                "excludeByName": {
                  "Time": true
                },
                "indexByName": {},
                "renameByName": {}
              }
            }
          ],
          "type": "nodeGraph"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "webstore-metrics"
          },
          "description": "Sent by Exporter",
          "gridPos": {
            "h": 9,
            "w": 5,
            "x": 19,
            "y": 46
          },
          "id": 52,
          "options": {
            "code": {
              "language": "plaintext",
              "showLineNumbers": false,
              "showMiniMap": false
            },
            "content": "\n \n## Prometheus Config\n\n`evaluation_interval:` 30s\n\n`scrape_interval:` 5s",
            "mode": "markdown"
          },
          "pluginVersion": "9.1.0",
          "type": "text"
        }
      ],
      "refresh": false,
      "schemaVersion": 37,
      "style": "dark",
      "tags": [],
      "templating": {
        "list": [
          {
            "allValue": ".*",
            "current": {
              "selected": false,
              "text": "0.70.0",
              "value": "0.70.0"
            },
            "datasource": {
              "type": "prometheus",
              "uid": "webstore-metrics"
            },
            "definition": "query_result(sum(otelcol_process_uptime{}) by (service_version))\n",
            "hide": 2,
            "includeAll": false,
            "label": "service_version",
            "multi": true,
            "name": "service_version",
            "options": [],
            "query": {
              "query": "query_result(sum(otelcol_process_uptime{}) by (service_version))\n",
              "refId": "StandardVariableQuery"
            },
            "refresh": 1,
            "regex": "/.*service_version=\"(.*)\".*/",
            "skipUrlSync": false,
            "sort": 0,
            "type": "query"
          }
        ]
      },
      "time": {
        "from": "now-15m",
        "to": "now"
      },
      "timepicker": {},
      "timezone": "",
      "title": "Opentelemetry Collector Data Flow",
      "uid": "rl5_tea4k",
      "version": 2,
      "weekStart": ""
    }
kind: ConfigMap
metadata:
  labels:
    app.kubernetes.io/name: grafana
  name: dashboard-opentelemetry-collector-data-flow-9t9kck8d7g
  namespace: grafana
---
apiVersion: v1
data:
  spanmetrics.json: |
    {
      "annotations": {
        "list": [
          {
            "builtIn": 1,
            "datasource": {
              "type": "grafana",
              "uid": "-- Grafana --"
            },
            "enable": true,
            "hide": true,
            "iconColor": "rgba(0, 211, 255, 1)",
            "name": "Annotations & Alerts",
            "target": {
              "limit": 100,
              "matchAny": false,
              "tags": [],
              "type": "dashboard"
            },
            "type": "dashboard"
          }
        ]
      },
      "description": "Spanmetrics way of demo application view.",
      "author": {
        "name": "devrimdemiroz"
        },
      "editable": true,
      "fiscalYearStartMonth": 0,
      "graphTooltip": 0,
      "links": [],
      "liveNow": false,
      "panels": [
        {
          "collapsed": false,
          "gridPos": {
            "h": 1,
            "w": 24,
            "x": 0,
            "y": 0
          },
          "id": 24,
          "panels": [],
          "title": "Service Level - Throughput and Latencies",
          "type": "row"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "webstore-metrics"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "continuous-BlYlRd"
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "blue",
                    "value": null
                  },
                  {
                    "color": "green",
                    "value": 2
                  },
                  {
                    "color": "#EAB839",
                    "value": 64
                  },
                  {
                    "color": "orange",
                    "value": 128
                  },
                  {
                    "color": "red",
                    "value": 256
                  }
                ]
              },
              "unit": "ms"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 20,
            "w": 12,
            "x": 0,
            "y": 1
          },
          "id": 2,
          "interval": "5m",
          "options": {
            "orientation": "auto",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "",
              "values": false
            },
            "showThresholdLabels": false,
            "showThresholdMarkers": true
          },
          "pluginVersion": "9.1.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "webstore-metrics"
              },
              "editorMode": "code",
              "exemplar": false,
              "expr": "topk(7,histogram_quantile(0.50, sum(rate(duration_milliseconds_bucket{service_name=~\"$service\", span_name=~\"$span_name\"}[$__rate_interval])) by (le,service_name)))",
              "format": "time_series",
              "hide": true,
              "instant": false,
              "interval": "",
              "legendFormat": "{{service_name}}-quantile_0.50",
              "range": true,
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "webstore-metrics"
              },
              "editorMode": "code",
              "exemplar": false,
              "expr": "topk(7,histogram_quantile(0.95, sum(rate(duration_milliseconds_bucket{service_name=~\"$service\", span_name=~\"$span_name\"}[$__range])) by (le,service_name)))",
              "hide": false,
              "instant": true,
              "interval": "",
              "legendFormat": "{{le}} - {{service_name}}",
              "range": false,
              "refId": "B"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "webstore-metrics"
              },
              "editorMode": "code",
              "exemplar": false,
              "expr": "histogram_quantile(0.99, sum(rate(duration_milliseconds_bucket{service_name=~\"$service\", span_name=~\"$span_name\"}[$__rate_interval])) by (le,service_name))",
              "hide": true,
              "interval": "",
              "legendFormat": "quantile99",
              "range": true,
              "refId": "C"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "webstore-metrics"
              },
              "editorMode": "code",
              "exemplar": false,
              "expr": "histogram_quantile(0.999, sum(rate(duration_milliseconds_bucket{service_name=~\"$service\", span_name=~\"$span_name\"}[$__rate_interval])) by (le,service_name))",
              "hide": true,
              "interval": "",
              "legendFormat": "quantile999",
              "range": true,
              "refId": "D"
            }
          ],
          "title": "Top 3x3 - Service Latency - quantile95",
          "type": "gauge"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "webstore-metrics"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "continuous-BlYlRd"
              },
              "decimals": 2,
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "super-light-blue",
                    "value": 1
                  },
                  {
                    "color": "#EAB839",
                    "value": 2
                  },
                  {
                    "color": "red",
                    "value": 10
                  }
                ]
              },
              "unit": "reqps"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 13,
            "w": 12,
            "x": 12,
            "y": 1
          },
          "id": 4,
          "interval": "5m",
          "options": {
            "displayMode": "lcd",
            "minVizHeight": 10,
            "minVizWidth": 0,
            "orientation": "horizontal",
            "reduceOptions": {
              "calcs": [
                "mean"
              ],
              "fields": "",
              "values": false
            },
            "showUnfilled": true,
            "text": {}
          },
          "pluginVersion": "9.1.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "webstore-metrics"
              },
              "editorMode": "code",
              "exemplar": false,
              "expr": "topk(7,sum by (service_name) (rate(calls_total{service_name=~\"$service\", span_name=~\"$span_name\"}[$__range])))",
              "format": "time_series",
              "instant": true,
              "interval": "",
              "legendFormat": "{{service_name}}",
              "range": false,
              "refId": "A"
            }
          ],
          "title": "Top 7 Services Mean Rate over Range",
          "transformations": [],
          "type": "bargauge"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "webstore-metrics"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "continuous-reds"
              },
              "decimals": 4,
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "#EAB839",
                    "value": 1
                  },
                  {
                    "color": "red",
                    "value": 15
                  }
                ]
              },
              "unit": "reqps"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 7,
            "w": 12,
            "x": 12,
            "y": 14
          },
          "id": 15,
          "interval": "5m",
          "options": {
            "displayMode": "lcd",
            "minVizHeight": 10,
            "minVizWidth": 0,
            "orientation": "vertical",
            "reduceOptions": {
              "calcs": [
                "mean"
              ],
              "fields": "",
              "values": false
            },
            "showUnfilled": true,
            "text": {}
          },
          "pluginVersion": "9.1.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "webstore-metrics"
              },
              "editorMode": "code",
              "exemplar": false,
              "expr": "topk(7,sum(rate(calls_total{status_code=\"STATUS_CODE_ERROR\",service_name=~\"$service\", span_name=~\"$span_name\"}[$__range])) by (service_name))",
              "instant": true,
              "interval": "",
              "legendFormat": "{{service_name}}",
              "range": false,
              "refId": "A"
            }
          ],
          "title": "Top 7 Services Mean ERROR Rate over Range",
          "transformations": [],
          "type": "bargauge"
        },
        {
          "collapsed": false,
          "datasource": {
            "type": "prometheus",
            "uid": "webstore-metrics"
          },
          "gridPos": {
            "h": 1,
            "w": 24,
            "x": 0,
            "y": 21
          },
          "id": 14,
          "panels": [],
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "webstore-metrics"
              },
              "refId": "A"
            }
          ],
          "title": "span_names Level - Throughput",
          "type": "row"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "webstore-metrics"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "custom": {
                "align": "auto",
                "displayMode": "auto",
                "inspect": false
              },
              "decimals": 2,
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "reqps"
            },
            "overrides": [
              {
                "matcher": {
                  "id": "byName",
                  "options": "bRate"
                },
                "properties": [
                  {
                    "id": "custom.displayMode",
                    "value": "lcd-gauge"
                  },
                  {
                    "id": "color",
                    "value": {
                      "mode": "continuous-BlYlRd"
                    }
                  }
                ]
              },
              {
                "matcher": {
                  "id": "byName",
                  "options": "eRate"
                },
                "properties": [
                  {
                    "id": "custom.displayMode",
                    "value": "lcd-gauge"
                  },
                  {
                    "id": "color",
                    "value": {
                      "mode": "continuous-RdYlGr"
                    }
                  }
                ]
              },
              {
                "matcher": {
                  "id": "byName",
                  "options": "Error Rate"
                },
                "properties": [
                  {
                    "id": "custom.width",
                    "value": 663
                  }
                ]
              },
              {
                "matcher": {
                  "id": "byName",
                  "options": "Rate"
                },
                "properties": [
                  {
                    "id": "custom.width",
                    "value": 667
                  }
                ]
              },
              {
                "matcher": {
                  "id": "byName",
                  "options": "Service"
                },
                "properties": [
                  {
                    "id": "custom.width",
                    "value": null
                  }
                ]
              }
            ]
          },
          "gridPos": {
            "h": 11,
            "w": 24,
            "x": 0,
            "y": 22
          },
          "id": 22,
          "interval": "5m",
          "options": {
            "footer": {
              "fields": "",
              "reducer": [
                "sum"
              ],
              "show": false
            },
            "showHeader": true,
            "sortBy": []
          },
          "pluginVersion": "9.1.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "webstore-metrics"
              },
              "exemplar": false,
              "expr": "topk(7, sum(rate(calls_total{service_name=~\"$service\", span_name=~\"$span_name\"}[$__range])) by (span_name,service_name)) ",
              "format": "table",
              "instant": true,
              "interval": "",
              "legendFormat": "",
              "refId": "Rate"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "webstore-metrics"
              },
              "exemplar": false,
              "expr": "topk(7, sum(rate(calls_total{status_code=\"STATUS_CODE_ERROR\",service_name=~\"$service\", span_name=~\"$span_name\"}[$__range])) by (span_name,service_name))",
              "format": "table",
              "hide": false,
              "instant": true,
              "interval": "",
              "legendFormat": "",
              "refId": "Error Rate"
            }
          ],
          "title": "Top 7 span_names and Errors  (APM Table)",
          "transformations": [
            {
              "id": "seriesToColumns",
              "options": {
                "byField": "span_name"
              }
            },
            {
              "id": "organize",
              "options": {
                "excludeByName": {
                  "Time 1": true,
                  "Time 2": true
                },
                "indexByName": {},
                "renameByName": {
                  "Value #Error Rate": "Error Rate",
                  "Value #Rate": "Rate",
                  "service_name 1": "Rate in Service",
                  "service_name 2": "Error Rate in Service"
                }
              }
            },
            {
              "id": "calculateField",
              "options": {
                "alias": "bRate",
                "mode": "reduceRow",
                "reduce": {
                  "include": [
                    "Rate"
                  ],
                  "reducer": "sum"
                }
              }
            },
            {
              "id": "calculateField",
              "options": {
                "alias": "eRate",
                "mode": "reduceRow",
                "reduce": {
                  "include": [
                    "Error Rate"
                  ],
                  "reducer": "sum"
                }
              }
            },
            {
              "id": "organize",
              "options": {
                "excludeByName": {
                  "Error Rate": true,
                  "Rate": true,
                  "bRate": false
                },
                "indexByName": {
                  "Error Rate": 4,
                  "Error Rate in Service": 6,
                  "Rate": 1,
                  "Rate in Service": 5,
                  "bRate": 2,
                  "eRate": 3,
                  "span_name": 0
                },
                "renameByName": {
                  "Rate in Service": "Service",
                  "bRate": "Rate",
                  "eRate": "Error Rate",
                  "span_name": "span_name Name"
                }
              }
            },
            {
              "id": "sortBy",
              "options": {
                "fields": {},
                "sort": [
                  {
                    "desc": true,
                    "field": "Rate"
                  }
                ]
              }
            }
          ],
          "type": "table"
        },
        {
          "collapsed": false,
          "datasource": {
            "type": "prometheus",
            "uid": "webstore-metrics"
          },
          "gridPos": {
            "h": 1,
            "w": 24,
            "x": 0,
            "y": 33
          },
          "id": 20,
          "panels": [],
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "webstore-metrics"
              },
              "refId": "A"
            }
          ],
          "title": "span_name Level - Latencies",
          "type": "row"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "webstore-metrics"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "continuous-BlYlRd"
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "blue",
                    "value": null
                  },
                  {
                    "color": "green",
                    "value": 2
                  },
                  {
                    "color": "#EAB839",
                    "value": 64
                  },
                  {
                    "color": "orange",
                    "value": 128
                  },
                  {
                    "color": "red",
                    "value": 256
                  }
                ]
              },
              "unit": "ms"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 13,
            "w": 12,
            "x": 0,
            "y": 34
          },
          "id": 25,
          "interval": "5m",
          "options": {
            "orientation": "auto",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "",
              "values": false
            },
            "showThresholdLabels": false,
            "showThresholdMarkers": true
          },
          "pluginVersion": "9.1.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "webstore-metrics"
              },
              "editorMode": "code",
              "exemplar": false,
              "expr": "topk(7,histogram_quantile(0.50, sum(rate(duration_milliseconds_bucket{service_name=~\"$service\", span_name=~\"$span_name\"}[$__rate_interval])) by (le,service_name)))",
              "format": "time_series",
              "hide": true,
              "instant": false,
              "interval": "",
              "legendFormat": "{{service_name}}-quantile_0.50",
              "range": true,
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "webstore-metrics"
              },
              "editorMode": "code",
              "exemplar": false,
              "expr": "topk(7,histogram_quantile(0.95, sum(rate(duration_milliseconds_bucket{service_name=~\"$service\", span_name=~\"$span_name\"}[$__range])) by (le,span_name)))",
              "hide": false,
              "instant": true,
              "interval": "",
              "legendFormat": "{{span_name}}",
              "range": false,
              "refId": "B"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "webstore-metrics"
              },
              "editorMode": "code",
              "exemplar": false,
              "expr": "histogram_quantile(0.99, sum(rate(duration_milliseconds_bucket{service_name=~\"$service\", span_name=~\"$span_name\"}[$__rate_interval])) by (le,service_name))",
              "hide": true,
              "interval": "",
              "legendFormat": "quantile99",
              "range": true,
              "refId": "C"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "webstore-metrics"
              },
              "editorMode": "code",
              "exemplar": false,
              "expr": "histogram_quantile(0.999, sum(rate(duration_milliseconds_bucket{service_name=~\"$service\", span_name=~\"$span_name\"}[$__rate_interval])) by (le,service_name))",
              "hide": true,
              "interval": "",
              "legendFormat": "quantile999",
              "range": true,
              "refId": "D"
            }
          ],
          "title": "Top 3x3 - span_name Latency - quantile95",
          "type": "gauge"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "webstore-metrics"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "continuous-BlYlRd"
              },
              "decimals": 2,
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "ms"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 13,
            "w": 12,
            "x": 12,
            "y": 34
          },
          "id": 10,
          "interval": "5m",
          "options": {
            "displayMode": "lcd",
            "minVizHeight": 10,
            "minVizWidth": 0,
            "orientation": "horizontal",
            "reduceOptions": {
              "calcs": [
                "mean"
              ],
              "fields": "",
              "values": false
            },
            "showUnfilled": true
          },
          "pluginVersion": "9.1.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "webstore-metrics"
              },
              "editorMode": "code",
              "exemplar": false,
              "expr": "topk(7, sum by (span_name,service_name)(increase(duration_milliseconds_sum{service_name=~\"${service}\", span_name=~\"$span_name\"}[5m]) / increase(duration_milliseconds_count{service_name=~\"${service}\",span_name=~\"$span_name\"}[5m\n])))",
              "instant": true,
              "interval": "",
              "legendFormat": "{{span_name}} [{{service_name}}]",
              "range": false,
              "refId": "A"
            }
          ],
          "title": "Top 7 Highest Endpoint Latencies  Mean Over Range ",
          "transformations": [],
          "type": "bargauge"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "webstore-metrics"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "drawStyle": "line",
                "fillOpacity": 15,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "lineInterpolation": "smooth",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "ms"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 12,
            "w": 24,
            "x": 0,
            "y": 47
          },
          "id": 16,
          "interval": "5m",
          "options": {
            "legend": {
              "calcs": [
                "mean",
                "logmin",
                "max",
                "delta"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "8.4.7",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "webstore-metrics"
              },
              "editorMode": "code",
              "exemplar": true,
              "expr": "topk(7,sum by (span_name,service_name)(increase(duration_milliseconds_sum{service_name=~\"$service\", span_name=~\"$span_name\"}[$__rate_interval]) / increase(duration_milliseconds_count{service_name=~\"$service\", span_name=~\"$span_name\"}[$__rate_interval])))",
              "instant": false,
              "interval": "",
              "legendFormat": "[{{service_name}}]  {{span_name}}",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "Top 7 Latencies Over Range ",
          "type": "timeseries"
        }
      ],
      "refresh": "5m",
      "schemaVersion": 37,
      "style": "dark",
      "tags": [],
      "templating": {
        "list": [
          {
            "allValue": ".*",
            "current": {
              "selected": false,
              "text": "All",
              "value": "$__all"
            },
            "datasource": {
              "type": "prometheus",
              "uid": "webstore-metrics"
            },
            "definition": "query_result(count by (service_name)(count_over_time(calls_total[$__range])))",
            "hide": 0,
            "includeAll": true,
            "multi": true,
            "name": "service",
            "options": [],
            "query": {
              "query": "query_result(count by (service_name)(count_over_time(calls_total[$__range])))",
              "refId": "StandardVariableQuery"
            },
            "refresh": 2,
            "regex": "/.*service_name=\"(.*)\".*/",
            "skipUrlSync": false,
            "sort": 1,
            "type": "query"
          },
          {
            "allValue": ".*",
            "current": {
              "selected": false,
              "text": "All",
              "value": "$__all"
            },
            "datasource": {
              "type": "prometheus",
              "uid": "webstore-metrics"
            },
            "definition": "query_result(sum ({__name__=~\".*calls_total\",service_name=~\"$service\"})  by (span_name))",
            "hide": 0,
            "includeAll": true,
            "multi": true,
            "name": "span_name",
            "options": [],
            "query": {
              "query": "query_result(sum ({__name__=~\".*calls_total\",service_name=~\"$service\"})  by (span_name))",
              "refId": "StandardVariableQuery"
            },
            "refresh": 2,
            "regex": "/.*span_name=\"(.*)\".*/",
            "skipUrlSync": false,
            "sort": 0,
            "type": "query"
          }
        ]
      },
      "time": {
        "from": "now-1h",
        "to": "now"
      },
      "timepicker": {},
      "timezone": "",
      "title": "Spanmetrics Demo Dashboard",
      "uid": "W2gX2zHVk48",
      "version": 1,
      "weekStart": ""
    }
kind: ConfigMap
metadata:
  labels:
    app.kubernetes.io/name: grafana
  name: dashboard-spanmetrics-k9b28kd6dc
  namespace: grafana
---
apiVersion: v1
data:
  datasources.yaml: |
    # Copyright The OpenTelemetry Authors
    # SPDX-License-Identifier: Apache-2.0

    apiVersion: 1

    datasources:
      - name: Prometheus
        uid: webstore-metrics
        type: prometheus
        url: http://prometheus.prometheus.svc.cluster.local:9090/
        editable: true
        isDefault: true
        jsonData:
          exemplarTraceIdDestinations:
            - datasourceUid: webstore-traces
              name: trace_id
      - name: loki-webhookreceiver
        uid: loki
        type: loki
        url: http://loki.loki.svc.cluster.local:3100/
        editable: true
        isDefault: false
      - name: Tempo
        type: tempo
        access: proxy
        orgId: 1
        url: http://tempo.tempo.svc.cluster.local:3200/
        basicAuth: false
        isDefault: false
        version: 1
        editable: false
        apiVersion: 1
        uid: tempo
        jsonData:
          httpMethod: GET
          serviceMap:
            datasourceUid: prometheus
kind: ConfigMap
metadata:
  labels:
    app.kubernetes.io/name: grafana
  name: datasources-f2fd7k44bc
  namespace: grafana
---
apiVersion: v1
data:
  grafana.ini: "\n\n##################### Grafana Configuration Example #####################\n\n\n####################################
    Paths ####################################\n[paths]\n\nprovisioning = /etc/grafana/provisioning\n\n####################################
    Server ####################################\n[server]\n# Protocol (http, https,
    h2, socket)\nprotocol = http\n\n# The ip address to bind to, empty will bind to
    all interfaces\n;http_addr =\n\n# The http port  to use\nhttp_port = 3000\n\n#
    The public facing domain name used to access grafana from a browser\ndomain =
    localhost\n\n# Redirect to correct domain if host header does not match domain\n#
    Prevents DNS rebinding attacks\n;enforce_domain = false\n\n# The full public facing
    url you use in browser, used for redirects and emails\n# If you use reverse proxy
    and sub path specify full url (with sub path)\nroot_url = %(protocol)s://%(domain)s:%(http_port)s/\n\n#
    Serve Grafana from subpath specified in `root_url` setting. By default it is set
    to `false` for compatibility reasons.\nserve_from_sub_path = true\n\n\n####################################
    Database ####################################\n[database]\n\n\n###################################
    Data sources #########################\n[datasources]\n\n\n####################################
    Cache server #############################\n[remote_cache]\n\n\n####################################
    Data proxy ###########################\n[dataproxy]\n\n\n####################################
    Analytics ####################################\n[analytics]\n\n####################################
    Security ####################################\n[security]\n\n\n[security.encryption]\n\n\n####################################
    Snapshots ###########################\n[snapshots]\n\n####################################
    Dashboards History ##################\n[dashboards]\n\n\n####################################
    Users ###############################\n[users]\n\n[auth]\ndisable_login_form =
    true \n\n# Set to true to disable the sign out link in the side menu. Useful if
    you use auth.proxy or auth.jwt, defaults to false\n;disable_signout_menu = false\n\n#
    URL to redirect the user to after sign out\n;signout_redirect_url =\n\n# Set to
    true to attempt login with OAuth automatically, skipping the login screen.\n#
    This setting is ignored if multiple OAuth providers are configured.\n;oauth_auto_login
    = false\n\n# OAuth state max age cookie duration in seconds. Defaults to 600 seconds.\n;oauth_state_cookie_max_age
    = 600\n\n# Skip forced assignment of OrgID 1 or 'auto_assign_org_id' for social
    logins\n;oauth_skip_org_role_update_sync = false\n\n# limit of api_key seconds
    to live before expiration\n;api_key_max_seconds_to_live = -1\n\n# Set to true
    to enable SigV4 authentication option for HTTP-based datasources.\n;sigv4_auth_enabled
    = false\n\n# Set to true to enable verbose logging of SigV4 request signing\n;sigv4_verbose_logging
    = false\n\n#################################### Anonymous Auth ######################\n[auth.anonymous]\n#
    enable anonymous access\nenabled = true \n\n# specify organization name that should
    be used for unauthenticated users\norg_name = Main Org.\n\n# specify role for
    unauthenticated users\norg_role = Admin \n\n# mask the Grafana version number
    for unauthenticated users\n;hide_version = false\n\n####################################
    GitHub Auth ##########################\n[auth.github]\n;enabled = false\n;allow_sign_up
    = true\n;client_id = some_id\n;client_secret = some_secret\n;scopes = user:email,read:org\n;auth_url
    = https://github.com/login/oauth/authorize\n;token_url = https://github.com/login/oauth/access_token\n;api_url
    = https://api.github.com/user\n;allowed_domains =\n;team_ids =\n;allowed_organizations
    =\n\n#################################### GitLab Auth #########################\n[auth.gitlab]\n;enabled
    = false\n;allow_sign_up = true\n;client_id = some_id\n;client_secret = some_secret\n;scopes
    = api\n;auth_url = https://gitlab.com/oauth/authorize\n;token_url = https://gitlab.com/oauth/token\n;api_url
    = https://gitlab.com/api/v4\n;allowed_domains =\n;allowed_groups =\n\n####################################
    Google Auth ##########################\n[auth.google]\n;enabled = false\n;allow_sign_up
    = true\n;client_id = some_client_id\n;client_secret = some_client_secret\n;scopes
    = https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email\n;auth_url
    = https://accounts.google.com/o/oauth2/auth\n;token_url = https://accounts.google.com/o/oauth2/token\n;api_url
    = https://www.googleapis.com/oauth2/v1/userinfo\n;allowed_domains =\n;hosted_domain
    =\n\n#################################### Grafana.com Auth ####################\n[auth.grafana_com]\n;enabled
    = false\n;allow_sign_up = true\n;client_id = some_id\n;client_secret = some_secret\n;scopes
    = user:email\n;allowed_organizations =\n\n####################################
    Azure AD OAuth #######################\n[auth.azuread]\n;name = Azure AD\n;enabled
    = false\n;allow_sign_up = true\n;client_id = some_client_id\n;client_secret =
    some_client_secret\n;scopes = openid email profile\n;auth_url = https://login.microsoftonline.com/<tenant-id>/oauth2/v2.0/authorize\n;token_url
    = https://login.microsoftonline.com/<tenant-id>/oauth2/v2.0/token\n;allowed_domains
    =\n;allowed_groups =\n;role_attribute_strict = false\n\n####################################
    Okta OAuth #######################\n[auth.okta]\n;name = Okta\n;enabled = false\n;allow_sign_up
    = true\n;client_id = some_id\n;client_secret = some_secret\n;scopes = openid profile
    email groups\n;auth_url = https://<tenant-id>.okta.com/oauth2/v1/authorize\n;token_url
    = https://<tenant-id>.okta.com/oauth2/v1/token\n;api_url = https://<tenant-id>.okta.com/oauth2/v1/userinfo\n;allowed_domains
    =\n;allowed_groups =\n;role_attribute_path =\n;role_attribute_strict = false\n\n####################################
    Generic OAuth ##########################\n[auth.generic_oauth]\n;enabled = false\n;name
    = OAuth\n;allow_sign_up = true\n;client_id = some_id\n;client_secret = some_secret\n;scopes
    = user:email,read:org\n;empty_scopes = false\n;email_attribute_name = email:primary\n;email_attribute_path
    =\n;login_attribute_path =\n;name_attribute_path =\n;id_token_attribute_name =\n;auth_url
    = https://foo.bar/login/oauth/authorize\n;token_url = https://foo.bar/login/oauth/access_token\n;api_url
    = https://foo.bar/user\n;teams_url =\n;allowed_domains =\n;team_ids =\n;allowed_organizations
    =\n;role_attribute_path =\n;role_attribute_strict = false\n;groups_attribute_path
    =\n;team_ids_attribute_path =\n;tls_skip_verify_insecure = false\n;tls_client_cert
    =\n;tls_client_key =\n;tls_client_ca =\n;use_pkce = false\n\n####################################
    Basic Auth ##########################\n[auth.basic]\n;enabled = true\n\n####################################
    Auth Proxy ##########################\n[auth.proxy]\n;enabled = false\n;header_name
    = X-WEBAUTH-USER\n;header_property = username\n;auto_sign_up = true\n;sync_ttl
    = 60\n;whitelist = 192.168.1.1, 192.168.2.1\n;headers = Email:X-User-Email, Name:X-User-Name\n#
    Non-ASCII strings in header values are encoded using quoted-printable encoding\n;headers_encoded
    = false\n# Read the auth proxy docs for details on what the setting below enables\n;enable_login_token
    = false\n\n#################################### Auth JWT ##########################\n[auth.jwt]\n;enabled
    = true\n;header_name = X-JWT-Assertion\n;email_claim = sub\n;username_claim =
    sub\n;jwk_set_url = https://foo.bar/.well-known/jwks.json\n;jwk_set_file = /path/to/jwks.json\n;cache_ttl
    = 60m\n;expected_claims = {\"aud\": [\"foo\", \"bar\"]}\n;key_file = /path/to/key/file\n;auto_sign_up
    = false\n\n#################################### Auth LDAP ##########################\n[auth.ldap]\n;enabled
    = false\n;config_file = /etc/grafana/ldap.toml\n;allow_sign_up = true\n\n# LDAP
    background sync (Enterprise only)\n# At 1 am every day\n;sync_cron = \"0 1 * *
    *\"\n;active_sync_enabled = true\n\n#################################### AWS ###########################\n[aws]\n#
    Enter a comma-separated list of allowed AWS authentication providers.\n# Options
    are: default (AWS SDK Default), keys (Access && secret key), credentials (Credentials
    field), ec2_iam_role (EC2 IAM Role)\n; allowed_auth_providers = default,keys,credentials\n\n#
    Allow AWS users to assume a role using temporary security credentials.\n# If true,
    assume role will be enabled for all AWS authentication providers that are specified
    in aws_auth_providers\n; assume_role_enabled = true\n\n####################################
    Azure ###############################\n[azure]\n# Azure cloud environment where
    Grafana is hosted\n# Possible values are AzureCloud, AzureChinaCloud, AzureUSGovernment
    and AzureGermanCloud\n# Default value is AzureCloud (i.e. public cloud)\n;cloud
    = AzureCloud\n\n# Specifies whether Grafana hosted in Azure service with Managed
    Identity configured (e.g. Azure Virtual Machines instance)\n# If enabled, the
    managed identity can be used for authentication of Grafana in Azure services\n#
    Disabled by default, needs to be explicitly enabled\n;managed_identity_enabled
    = false\n\n# Client ID to use for user-assigned managed identity\n# Should be
    set for user-assigned identity and should be empty for system-assigned identity\n;managed_identity_client_id
    =\n\n#################################### Role-based Access Control ###########\n[rbac]\n;enabled
    = true\n# If enabled, cache permissions in a in memory cache (Enterprise only)\n;permission_cache
    = true\n#################################### SMTP / Emailing ##########################\n[smtp]\n;enabled
    = false\n;host = localhost:25\n;user =\n# If the password contains # or ; you
    have to wrap it with triple quotes. Ex \"\"\"#password;\"\"\"\n;password =\n;cert_file
    =\n;key_file =\n;skip_verify = false\n;from_address = admin@grafana.localhost\n;from_name
    = Grafana\n# EHLO identity in SMTP dialog (defaults to instance_name)\n;ehlo_identity
    = dashboard.example.com\n# SMTP startTLS policy (defaults to 'OpportunisticStartTLS')\n;startTLS_policy
    = NoStartTLS\n\n[emails]\n;welcome_email_on_sign_up = false\n;templates_pattern
    = emails/*.html, emails/*.txt\n;content_types = text/html\n\n####################################
    Logging ##########################\n[log]\n# Either \"console\", \"file\", \"syslog\".
    Default is console and  file\n# Use space to separate multiple modes, e.g. \"console
    file\"\n;mode = console file\n\n# Either \"debug\", \"info\", \"warn\", \"error\",
    \"critical\", default is \"info\"\n;level = info\n\n# optional settings to set
    different levels for specific loggers. Ex filters = sqlstore:debug\n;filters =\n\n#
    For \"console\" mode only\n[log.console]\n;level =\n\n# log line format, valid
    options are text, console and json\n;format = console\n\n# For \"file\" mode only\n[log.file]\n;level
    =\n\n# log line format, valid options are text, console and json\n;format = text\n\n#
    This enables automated log rotate(switch of following options), default is true\n;log_rotate
    = true\n\n# Max line number of single file, default is 1000000\n;max_lines = 1000000\n\n#
    Max size shift of single file, default is 28 means 1 << 28, 256MB\n;max_size_shift
    = 28\n\n# Segment log daily, default is true\n;daily_rotate = true\n\n# Expired
    days of log file(delete after max days), default is 7\n;max_days = 7\n\n[log.syslog]\n;level
    =\n\n# log line format, valid options are text, console and json\n;format = text\n\n#
    Syslog network type and address. This can be udp, tcp, or unix. If left blank,
    the default unix endpoints will be used.\n;network =\n;address =\n\n# Syslog facility.
    user, daemon and local0 through local7 are valid.\n;facility =\n\n# Syslog tag.
    By default, the process' argv[0] is used.\n;tag =\n\n[log.frontend]\n# Should
    Sentry javascript agent be initialized\n;enabled = false\n\n# Sentry DSN if you
    want to send events to Sentry.\n;sentry_dsn =\n\n# Custom HTTP endpoint to send
    events captured by the Sentry agent to. Default will log the events to stdout.\n;custom_endpoint
    = /log\n\n# Rate of events to be reported between 0 (none) and 1 (all), float\n;sample_rate
    = 1.0\n\n# Requests per second limit enforced an extended period, for Grafana
    backend log ingestion endpoint (/log).\n;log_endpoint_requests_per_second_limit
    = 3\n\n# Max requests accepted per short interval of time for Grafana backend
    log ingestion endpoint (/log).\n;log_endpoint_burst_limit = 15\n\n####################################
    Usage Quotas ########################\n[quota]\n; enabled = false\n\n#### set
    quotas to -1 to make unlimited. ####\n# limit number of users per Org.\n; org_user
    = 10\n\n# limit number of dashboards per Org.\n; org_dashboard = 100\n\n# limit
    number of data_sources per Org.\n; org_data_source = 10\n\n# limit number of api_keys
    per Org.\n; org_api_key = 10\n\n# limit number of alerts per Org.\n;org_alert_rule
    = 100\n\n# limit number of orgs a user can create.\n; user_org = 10\n\n# Global
    limit of users.\n; global_user = -1\n\n# global limit of orgs.\n; global_org =
    -1\n\n# global limit of dashboards\n; global_dashboard = -1\n\n# global limit
    of api_keys\n; global_api_key = -1\n\n# global limit on number of logged in users.\n;
    global_session = -1\n\n# global limit of alerts\n;global_alert_rule = -1\n\n####################################
    Unified Alerting ####################\n[unified_alerting]\n#Enable the Unified
    Alerting sub-system and interface. When enabled we'll migrate all of your alert
    rules and notification channels to the new system. New alert rules will be created
    and your notification channels will be converted into an Alertmanager configuration.
    Previous data is preserved to enable backwards compatibility but new data is removed.```\n;enabled
    = true\n\n# Comma-separated list of organization IDs for which to disable unified
    alerting. Only supported if unified alerting is enabled.\n;disabled_orgs =\n\n#
    Specify the frequency of polling for admin config changes.\n# The interval string
    is a possibly signed sequence of decimal numbers, followed by a unit suffix (ms,
    s, m, h, d), e.g. 30s or 1m.\n;admin_config_poll_interval = 60s\n\n# Specify the
    frequency of polling for Alertmanager config changes.\n# The interval string is
    a possibly signed sequence of decimal numbers, followed by a unit suffix (ms,
    s, m, h, d), e.g. 30s or 1m.\n;alertmanager_config_poll_interval = 60s\n\n# Listen
    address/hostname and port to receive unified alerting messages for other Grafana
    instances. The port is used for both TCP and UDP. It is assumed other Grafana
    instances are also running on the same port. The default value is `0.0.0.0:9094`.\n;ha_listen_address
    = \"0.0.0.0:9094\"\n\n# Listen address/hostname and port to receive unified alerting
    messages for other Grafana instances. The port is used for both TCP and UDP. It
    is assumed other Grafana instances are also running on the same port. The default
    value is `0.0.0.0:9094`.\n;ha_advertise_address = \"\"\n\n# Comma-separated list
    of initial instances (in a format of host:port) that will form the HA cluster.
    Configuring this setting will enable High Availability mode for alerting.\n;ha_peers
    = \"\"\n\n# Time to wait for an instance to send a notification via the Alertmanager.
    In HA, each Grafana instance will\n# be assigned a position (e.g. 0, 1). We then
    multiply this position with the timeout to indicate how long should\n# each instance
    wait before sending the notification to take into account replication lag.\n#
    The interval string is a possibly signed sequence of decimal numbers, followed
    by a unit suffix (ms, s, m, h, d), e.g. 30s or 1m.\n;ha_peer_timeout = \"15s\"\n\n#
    The interval between sending gossip messages. By lowering this value (more frequent)
    gossip messages are propagated\n# across cluster more quickly at the expense of
    increased bandwidth usage.\n# The interval string is a possibly signed sequence
    of decimal numbers, followed by a unit suffix (ms, s, m, h, d), e.g. 30s or 1m.\n;ha_gossip_interval
    = \"200ms\"\n\n# The interval between gossip full state syncs. Setting this interval
    lower (more frequent) will increase convergence speeds\n# across larger clusters
    at the expense of increased bandwidth usage.\n# The interval string is a possibly
    signed sequence of decimal numbers, followed by a unit suffix (ms, s, m, h, d),
    e.g. 30s or 1m.\n;ha_push_pull_interval = \"60s\"\n\n# Enable or disable alerting
    rule execution. The alerting UI remains visible. This option has a legacy version
    in the `[alerting]` section that takes precedence.\n;execute_alerts = true\n\n#
    Alert evaluation timeout when fetching data from the datasource. This option has
    a legacy version in the `[alerting]` section that takes precedence.\n# The timeout
    string is a possibly signed sequence of decimal numbers, followed by a unit suffix
    (ms, s, m, h, d), e.g. 30s or 1m.\n;evaluation_timeout = 30s\n\n# Number of times
    we'll attempt to evaluate an alert rule before giving up on that evaluation. This
    option has a legacy version in the `[alerting]` section that takes precedence.\n;max_attempts
    = 3\n\n# Minimum interval to enforce between rule evaluations. Rules will be adjusted
    if they are less than this value  or if they are not multiple of the scheduler
    interval (10s). Higher values can help with resource management as we'll schedule
    fewer evaluations over time. This option has a legacy version in the `[alerting]`
    section that takes precedence.\n# The interval string is a possibly signed sequence
    of decimal numbers, followed by a unit suffix (ms, s, m, h, d), e.g. 30s or 1m.\n;min_interval
    = 10s\n\n#################################### Alerting ############################\n[alerting]\n#
    Disable legacy alerting engine & UI features\n;enabled = false\n\n# Makes it possible
    to turn off alert execution but alerting UI is visible\n;execute_alerts = true\n\n#
    Default setting for new alert rules. Defaults to categorize error and timeouts
    as alerting. (alerting, keep_state)\n;error_or_timeout = alerting\n\n# Default
    setting for how Grafana handles nodata or null values in alerting. (alerting,
    no_data, keep_state, ok)\n;nodata_or_nullvalues = no_data\n\n# Alert notifications
    can include images, but rendering many images at the same time can overload the
    server\n# This limit will protect the server from render overloading and make
    sure notifications are sent out quickly\n;concurrent_render_limit = 5\n\n# Default
    setting for alert calculation timeout. Default value is 30\n;evaluation_timeout_seconds
    = 30\n\n# Default setting for alert notification timeout. Default value is 30\n;notification_timeout_seconds
    = 30\n\n# Default setting for max attempts to sending alert notifications. Default
    value is 3\n;max_attempts = 3\n\n# Makes it possible to enforce a minimal interval
    between evaluations, to reduce load on the backend\n;min_interval_seconds = 1\n\n#
    Configures for how long alert annotations are stored. Default is 0, which keeps
    them forever.\n# This setting should be expressed as a duration. Examples: 6h
    (hours), 10d (days), 2w (weeks), 1M (month).\n;max_annotation_age =\n\n# Configures
    max number of alert annotations that Grafana stores. Default value is 0, which
    keeps all alert annotations.\n;max_annotations_to_keep =\n\n####################################
    Annotations #########################\n[annotations]\n# Configures the batch size
    for the annotation clean-up job. This setting is used for dashboard, API, and
    alert annotations.\n;cleanupjob_batchsize = 100\n\n[annotations.dashboard]\n#
    Dashboard annotations means that annotations are associated with the dashboard
    they are created on.\n\n# Configures how long dashboard annotations are stored.
    Default is 0, which keeps them forever.\n# This setting should be expressed as
    a duration. Examples: 6h (hours), 10d (days), 2w (weeks), 1M (month).\n;max_age
    =\n\n# Configures max number of dashboard annotations that Grafana stores. Default
    value is 0, which keeps all dashboard annotations.\n;max_annotations_to_keep =\n\n[annotations.api]\n#
    API annotations means that the annotations have been created using the API without
    any\n# association with a dashboard.\n\n# Configures how long Grafana stores API
    annotations. Default is 0, which keeps them forever.\n# This setting should be
    expressed as a duration. Examples: 6h (hours), 10d (days), 2w (weeks), 1M (month).\n;max_age
    =\n\n# Configures max number of API annotations that Grafana keeps. Default value
    is 0, which keeps all API annotations.\n;max_annotations_to_keep =\n\n####################################
    Explore #############################\n[explore]\n# Enable the Explore section\n;enabled
    = true\n\n#################################### Help #############################\n[help]\n#
    Enable the Help section\n;enabled = true\n\n####################################
    Profile #############################\n[profile]\n# Enable the Profile section\n;enabled
    = true\n\n#################################### Query History #############################\n[query_history]\n#
    Enable the Query history\n;enabled = true\n\n####################################
    Internal Grafana Metrics ##########################\n# Metrics available at HTTP
    URL /metrics and /metrics/plugins/:pluginId\n[metrics]\n# Disable / Enable internal
    metrics\n;enabled           = true\n# Graphite Publish interval\n;interval_seconds
    \ = 10\n# Disable total stats (stat_totals_*) metrics to be generated\n;disable_total_stats
    = false\n\n#If both are set, basic auth will be required for the metrics endpoints.\n;
    basic_auth_username =\n; basic_auth_password =\n\n# Metrics environment info adds
    dimensions to the `grafana_environment_info` metric, which\n# can expose more
    information about the Grafana instance.\n[metrics.environment_info]\n#exampleLabel1
    = exampleValue1\n#exampleLabel2 = exampleValue2\n\n# Send internal metrics to
    Graphite\n[metrics.graphite]\n# Enable by setting the address setting (ex localhost:2003)\n;address
    =\n;prefix = prod.grafana.%(instance_name)s.\n\n####################################
    Grafana.com integration  ##########################\n# Url used to import dashboards
    directly from Grafana.com\n[grafana_com]\n;url = https://grafana.com\n\n####################################
    Distributed tracing ############\n# Opentracing is deprecated use opentelemetry
    instead\n[tracing.jaeger]\n# Enable by setting the address sending traces to jaeger
    (ex localhost:6831)\n;address = localhost:6831\n# Tag that will always be included
    in when creating new spans. ex (tag1:value1,tag2:value2)\n;always_included_tag
    = tag1:value1\n# Type specifies the type of the sampler: const, probabilistic,
    rateLimiting, or remote\n;sampler_type = const\n# jaeger samplerconfig param\n#
    for \"const\" sampler, 0 or 1 for always false/true respectively\n# for \"probabilistic\"
    sampler, a probability between 0 and 1\n# for \"rateLimiting\" sampler, the number
    of spans per second\n# for \"remote\" sampler, param is the same as for \"probabilistic\"\n#
    and indicates the initial sampling rate before the actual one\n# is received from
    the mothership\n;sampler_param = 1\n# sampling_server_url is the URL of a sampling
    manager providing a sampling strategy.\n;sampling_server_url =\n# Whether or not
    to use Zipkin propagation (x-b3- HTTP headers).\n;zipkin_propagation = false\n#
    Setting this to true disables shared RPC spans.\n# Not disabling is the most common
    setting when using Zipkin elsewhere in your infrastructure.\n;disable_shared_zipkin_spans
    = false\n\n[tracing.opentelemetry.jaeger]\n# jaeger destination (ex http://localhost:14268/api/traces)\n;
    address = http://localhost:14268/api/traces\n# Propagation specifies the text
    map propagation format: w3c, jaeger\n; propagation = jaeger\n\n# This is a configuration
    for OTLP exporter with GRPC protocol\n[tracing.opentelemetry.otlp]\n# otlp destination
    (ex localhost:4317)\n; address = localhost:4317\n# Propagation specifies the text
    map propagation format: w3c, jaeger\n; propagation = w3c\n\n####################################
    External image storage ##########################\n[external_image_storage]\n#
    Used for uploading images to public servers so they can be included in slack/email
    messages.\n# you can choose between (s3, webdav, gcs, azure_blob, local)\n;provider
    =\n\n[external_image_storage.s3]\n;endpoint =\n;path_style_access =\n;bucket =\n;region
    =\n;path =\n;access_key =\n;secret_key =\n\n[external_image_storage.webdav]\n;url
    =\n;public_url =\n;username =\n;password =\n\n[external_image_storage.gcs]\n;key_file
    =\n;bucket =\n;path =\n\n[external_image_storage.azure_blob]\n;account_name =\n;account_key
    =\n;container_name =\n\n[external_image_storage.local]\n# does not require any
    configuration\n\n[rendering]\n# Options to configure a remote HTTP image rendering
    service, e.g. using https://github.com/grafana/grafana-image-renderer.\n# URL
    to a remote HTTP image renderer service, e.g. http://localhost:8081/render, will
    enable Grafana to render panels and dashboards to PNG-images using HTTP requests
    to an external service.\n;server_url =\n# If the remote HTTP image renderer service
    runs on a different server than the Grafana server you may have to configure this
    to a URL where Grafana is reachable, e.g. http://grafana.domain/.\n;callback_url
    =\n# Concurrent render request limit affects when the /render HTTP endpoint is
    used. Rendering many images at the same time can overload the server,\n# which
    this setting can help protect against by only allowing a certain amount of concurrent
    requests.\n;concurrent_render_request_limit = 30\n\n[panels]\n# If set to true
    Grafana will allow script tags in text panels. Not recommended as it enable XSS
    vulnerabilities.\n;disable_sanitize_html = false\n\n[plugins]\n;enable_alpha =
    false\n;app_tls_skip_verify_insecure = false\n# Enter a comma-separated list of
    plugin identifiers to identify plugins to load even if they are unsigned. Plugins
    with modified signatures are never loaded.\n;allow_loading_unsigned_plugins =\n#
    Enable or disable installing / uninstalling / updating plugins directly from within
    Grafana.\n;plugin_admin_enabled = false\n;plugin_admin_external_manage_enabled
    = false\n;plugin_catalog_url = https://grafana.com/grafana/plugins/\n# Enter a
    comma-separated list of plugin identifiers to hide in the plugin catalog.\n;plugin_catalog_hidden_plugins
    =\n\n#################################### Grafana Live ##########################################\n[live]\n#
    max_connections to Grafana Live WebSocket endpoint per Grafana server instance.
    See Grafana Live docs\n# if you are planning to make it higher than default 100
    since this can require some OS and infrastructure\n# tuning. 0 disables Live,
    -1 means unlimited connections.\n;max_connections = 100\n\n# allowed_origins is
    a comma-separated list of origins that can establish connection with Grafana Live.\n#
    If not set then origin will be matched over root_url. Supports wildcard symbol
    \"*\".\n;allowed_origins =\n\n# engine defines an HA (high availability) engine
    to use for Grafana Live. By default no engine used - in\n# this case Live features
    work only on a single Grafana server. Available options: \"redis\".\n# Setting
    ha_engine is an EXPERIMENTAL feature.\n;ha_engine =\n\n# ha_engine_address sets
    a connection address for Live HA engine. Depending on engine type address format
    can differ.\n# For now we only support Redis connection address in \"host:port\"
    format.\n# This option is EXPERIMENTAL.\n;ha_engine_address = \"127.0.0.1:6379\"\n\n####################################
    Grafana Image Renderer Plugin ##########################\n[plugin.grafana-image-renderer]\n#
    Instruct headless browser instance to use a default timezone when not provided
    by Grafana, e.g. when rendering panel image of alert.\n# See ICU’s metaZones.txt
    (https://cs.chromium.org/chromium/src/third_party/icu/source/data/misc/metaZones.txt)
    for a list of supported\n# timezone IDs. Fallbacks to TZ environment variable
    if not set.\n;rendering_timezone =\n\n# Instruct headless browser instance to
    use a default language when not provided by Grafana, e.g. when rendering panel
    image of alert.\n# Please refer to the HTTP header Accept-Language to understand
    how to format this value, e.g. 'fr-CH, fr;q=0.9, en;q=0.8, de;q=0.7, *;q=0.5'.\n;rendering_language
    =\n\n# Instruct headless browser instance to use a default device scale factor
    when not provided by Grafana, e.g. when rendering panel image of alert.\n# Default
    is 1. Using a higher value will produce more detailed images (higher DPI), but
    will require more disk space to store an image.\n;rendering_viewport_device_scale_factor
    =\n\n# Instruct headless browser instance whether to ignore HTTPS errors during
    navigation. Per default HTTPS errors are not ignored. Due to\n# the security risk
    it's not recommended to ignore HTTPS errors.\n;rendering_ignore_https_errors =\n\n#
    Instruct headless browser instance whether to capture and log verbose information
    when rendering an image. Default is false and will\n# only capture and log error
    messages. When enabled, debug messages are captured and logged as well.\n# For
    the verbose information to be included in the Grafana server log you have to adjust
    the rendering log level to debug, configure\n# [log].filter = rendering:debug.\n;rendering_verbose_logging
    =\n\n# Instruct headless browser instance whether to output its debug and error
    messages into running process of remote rendering service.\n# Default is false.
    This can be useful to enable (true) when troubleshooting.\n;rendering_dumpio =\n\n#
    Additional arguments to pass to the headless browser instance. Default is --no-sandbox.
    The list of Chromium flags can be found\n# here (https://peter.sh/experiments/chromium-command-line-switches/).
    Multiple arguments is separated with comma-character.\n;rendering_args =\n\n#
    You can configure the plugin to use a different browser binary instead of the
    pre-packaged version of Chromium.\n# Please note that this is not recommended,
    since you may encounter problems if the installed version of Chrome/Chromium is
    not\n# compatible with the plugin.\n;rendering_chrome_bin =\n\n# Instruct how
    headless browser instances are created. Default is 'default' and will create a
    new browser instance on each request.\n# Mode 'clustered' will make sure that
    only a maximum of browsers/incognito pages can execute concurrently.\n# Mode 'reusable'
    will have one browser instance and will create a new incognito page on each request.\n;rendering_mode
    =\n\n# When rendering_mode = clustered, you can instruct how many browsers or
    incognito pages can execute concurrently. Default is 'browser'\n# and will cluster
    using browser instances.\n# Mode 'context' will cluster using incognito pages.\n;rendering_clustering_mode
    =\n# When rendering_mode = clustered, you can define the maximum number of browser
    instances/incognito pages that can execute concurrently. Default is '5'.\n;rendering_clustering_max_concurrency
    =\n# When rendering_mode = clustered, you can specify the duration a rendering
    request can take before it will time out. Default is `30` seconds.\n;rendering_clustering_timeout
    =\n\n# Limit the maximum viewport width, height and device scale factor that can
    be requested.\n;rendering_viewport_max_width =\n;rendering_viewport_max_height
    =\n;rendering_viewport_max_device_scale_factor =\n\n# Change the listening host
    and port of the gRPC server. Default host is 127.0.0.1 and default port is 0 and
    will automatically assign\n# a port not in use.\n;grpc_host =\n;grpc_port =\n\n[enterprise]\n#
    Path to a valid Grafana Enterprise license.jwt file\n;license_path =\n\n[feature_toggles]\n#
    there are currently two ways to enable feature toggles in the `grafana.ini`.\n#
    you can either pass an array of feature you want to enable to the `enable` field
    or\n# configure each toggle by setting the name of the toggle to true/false. Toggles
    set to true/false\n# will take presidence over toggles in the `enable` list.\n\n;enable
    = feature1,feature2\n\n;feature1 = true\n;feature2 = false\n\n[date_formats]\n#
    For information on what formatting patterns that are supported https://momentjs.com/docs/#/displaying/\n\n#
    Default system date format used in time range picker and other places where full
    time is displayed\n;full_date = YYYY-MM-DD HH:mm:ss\n\n# Used by graph and other
    places where we only show small intervals\n;interval_second = HH:mm:ss\n;interval_minute
    = HH:mm\n;interval_hour = MM/DD HH:mm\n;interval_day = MM/DD\n;interval_month
    = YYYY-MM\n;interval_year = YYYY\n\n# Experimental feature\n;use_browser_locale
    = false\n\n# Default timezone for user preferences. Options are 'browser' for
    the browser local timezone or a timezone name from IANA Time Zone database, e.g.
    'UTC' or 'Europe/Amsterdam' etc.\n;default_timezone = browser\n\n[expressions]\n#
    Enable or disable the expressions functionality.\n;enabled = true\n\n[geomap]\n#
    Set the JSON configuration for the default basemap\n;default_baselayer_config
    = `{\n;  \"type\": \"xyz\",\n;  \"config\": {\n;    \"attribution\": \"Open street
    map\",\n;    \"url\": \"https://tile.openstreetmap.org/{z}/{x}/{y}.png\"\n;  }\n;}`\n\n#
    Enable or disable loading other base map layers\n;enable_custom_baselayers = true"
kind: ConfigMap
metadata:
  labels:
    app.kubernetes.io/name: grafana
  name: grafana-ini-7598d852h9
  namespace: grafana
---
apiVersion: v1
data:
  providers.yaml: |
    # Copyright The OpenTelemetry Authors
    # SPDX-License-Identifier: Apache-2.0

    apiVersion: 1
    providers:
      - name: "OpenTelemetry Demo"
        orgId: 1
        folder: "Demo"
        type: file
        disableDeletion: false
        editable: true
        options:
          path: /etc/grafana/provisioning/dashboards/demo
      - name: "OpenTelemetry GitProviderReceiver Demo"
        orgId: 1
        folder: "GitProviderReceiver"
        type: file
        disableDeletion: false
        editable: true
        options:
          path: /etc/grafana/provisioning/dashboards/gpr
kind: ConfigMap
metadata:
  labels:
    app.kubernetes.io/name: grafana
  name: providers-ddgcc2d588
  namespace: grafana
---
apiVersion: v1
data:
  config.yaml: |
    auth_enabled: false
    server:
      http_listen_port: 3100
    common:
      path_prefix: /loki
      storage:
        filesystem:
          chunks_directory: /loki/chunks
          rules_directory: /loki/rules
      replication_factor: 1
      ring:
        kvstore:
          store: inmemory
    schema_config:
      configs:
        - from: 2020-10-24
          store: tsdb
          object_store: filesystem
          schema: v13
          index:
            prefix: index_
            period: 24h
    query_scheduler:
      max_outstanding_requests_per_tenant: 4096
    frontend:
      max_outstanding_per_tenant: 4096
    query_range:
      parallelise_shardable_queries: true
    limits_config:
      allow_structured_metadata: true # This is required to allow Loki to handle OpenTelemetry data https://grafana.com/docs/loki/latest/send-data/otel/#loki-configuration
      split_queries_by_interval: 15m # This setting dictates how many parallel queries will be ran. If you are often searching over large time spans having this too low will result in excessive parallel overhead which can work against you depending on resources of the container
      max_query_length: 0 # This allows you to query data over any time range. Default is 30d1h
      tsdb_max_query_parallelism: 32
      otlp_config:
        resource_attributes:
          ignore_defaults: true # ignores any default resource attributes listed in default_resource_attributes_as_index_labels
          attributes_config:
            - action: index_label
              attributes:
                - environment.name

    #ruler:
    #  alertmanager_url: http://localhost:9093
    # By default, Loki will send anonymous, but uniquely-identifiable usage and configuration
    # analytics to Grafana Labs. These statistics are sent to https://stats.grafana.org/
    #
    # Statistics help us better understand how Loki is used, and they show us performance
    # levels for most users. This helps us prioritize features and documentation.
    # For more information on what's sent, look at
    # https://github.com/grafana/loki/blob/main/pkg/usagestats/stats.go
    # Refer to the buildReport method to see what goes into a report.
    #
    # If you would like to disable reporting, uncomment the following lines:
    analytics:
      reporting_enabled: false
kind: ConfigMap
metadata:
  labels:
    app.kubernetes.io/name: loki
  name: config-4bbf72649f
  namespace: loki
---
apiVersion: v1
data:
  config.yaml: |
    global:
      scrape_interval: 15s
      evaluation_interval: 15s

    scrape_configs:
      - job_name: "prometheus"
        static_configs:
          - targets: ["localhost:9090"]
kind: ConfigMap
metadata:
  labels:
    app.kubernetes.io/name: prometheus
  name: config-64mbkd76gh
  namespace: prometheus
---
apiVersion: v1
data:
  config.yaml: |
    stream_over_http_enabled: true
    server:
      http_listen_port: 3200
      log_level: info

    query_frontend:
      search:
        duration_slo: 5s
        throughput_bytes_slo: 1.073741824e+09
      trace_by_id:
        duration_slo: 5s

    distributor:
      receivers: # this configuration will listen on all ports and protocols that tempo is capable of.
        jaeger: # the receives all come from the OpenTelemetry collector.  more configuration information can
          protocols: # be found there: https://github.com/open-telemetry/opentelemetry-collector/tree/main/receiver
            thrift_http: #
            grpc: # for a production deployment you should only enable the receivers you need!
            thrift_binary:
            thrift_compact:
        zipkin:
        otlp:
          protocols:
            http:
            grpc:
        opencensus:

    ingester:
      max_block_duration: 5m # cut the headblock when this much time passes. this is being set for demo purposes and should probably be left alone normally

    compactor:
      compaction:
        block_retention: 1h # overall Tempo trace retention. set for demo purposes

    metrics_generator:
      registry:
        external_labels:
          source: tempo
          cluster: k3d
      storage:
        path: /tmp/tempo/generator/wal
        remote_write:
          - url: http://prometheus.prometheus.svc.cluster.local:9090/api/v1/write
            send_exemplars: true

    storage:
      trace:
        backend: local # backend configuration to use
        wal:
          path: /tmp/tempo/wal # where to store the the wal locally
        local:
          path: /tmp/tempo/blocks

    overrides:
      defaults:
        metrics_generator:
          processors: [service-graphs, span-metrics] # enables metrics generator
kind: ConfigMap
metadata:
  labels:
    app.kubernetes.io/name: tempo
  name: config-76mdk7g9tk
  namespace: tempo
---
apiVersion: v1
kind: Service
metadata:
  name: grafana
  namespace: grafana
spec:
  ports:
  - port: 3000
    protocol: TCP
    targetPort: http-grafana
  selector:
    app.kubernetes.io/name: grafana
  sessionAffinity: None
  type: LoadBalancer
---
apiVersion: v1
kind: Service
metadata:
  name: loki
  namespace: loki
spec:
  ports:
  - port: 3100
    protocol: TCP
    targetPort: loki
  selector:
    app.kubernetes.io/name: loki
  sessionAffinity: None
  type: LoadBalancer
---
apiVersion: v1
kind: Service
metadata:
  name: prometheus
  namespace: prometheus
spec:
  ports:
  - port: 9090
    protocol: TCP
    targetPort: prometheus
  selector:
    app.kubernetes.io/name: prometheus
  sessionAffinity: None
  type: LoadBalancer
---
apiVersion: v1
kind: Service
metadata:
  name: tempo
  namespace: tempo
spec:
  ports:
  - name: grpc
    port: 4317
    protocol: TCP
    targetPort: grpc
  - name: http
    port: 4318
    protocol: TCP
    targetPort: http
  - name: tempo
    port: 3200
    protocol: TCP
    targetPort: tempo
  selector:
    app.kubernetes.io/name: tempo
  sessionAffinity: None
  type: LoadBalancer
---
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: pvc
  namespace: grafana
spec:
  accessModes:
  - ReadWriteOnce
  resources:
    requests:
      storage: 1Gi
---
apiVersion: apps/v1
kind: Deployment
metadata:
  labels:
    app.kubernetes.io/name: grafana
  name: grafana
  namespace: grafana
spec:
  selector:
    matchLabels:
      app.kubernetes.io/name: grafana
  template:
    metadata:
      labels:
        app.kubernetes.io/name: grafana
    spec:
      containers:
      - env:
        - name: GF_PATHS_CONFIG
          value: /etc/grafana/provisioning/grafana.ini
        image: grafana/grafana:latest
        imagePullPolicy: IfNotPresent
        livenessProbe:
          failureThreshold: 3
          initialDelaySeconds: 30
          periodSeconds: 10
          successThreshold: 1
          tcpSocket:
            port: 3000
          timeoutSeconds: 1
        name: grafana
        ports:
        - containerPort: 3000
          name: http-grafana
          protocol: TCP
        readinessProbe:
          failureThreshold: 3
          httpGet:
            path: /robots.txt
            port: 3000
            scheme: HTTP
          initialDelaySeconds: 10
          periodSeconds: 30
          successThreshold: 1
          timeoutSeconds: 2
        resources:
          requests:
            cpu: 250m
            memory: 750Mi
        volumeMounts:
        - mountPath: /var/lib/grafana
          name: pv
        - mountPath: /etc/grafana/provisioning/datasources
          name: datasources
        - mountPath: /etc/grafana/provisioning
          name: grafana-ini
        - mountPath: /etc/grafana/provisioning/dashboards
          name: providers
        - mountPath: /etc/grafana/provisioning/dashboards/demo/demo.json
          name: dashboard-demo
        - mountPath: /etc/grafana/provisioning/dashboards/demo/opentelemetry-collector-data-flow.json
          name: dashboard-opentelemetry-collector-data-flow
        - mountPath: /etc/grafana/provisioning/dashboards/demo/opentelemetry-collector.json
          name: dashboard-opentelemetry-collector
        - mountPath: /etc/grafana/provisioning/dashboards/demo/spanmetrics.json
          name: dashboard-spanmetrics
        - mountPath: /etc/grafana/provisioning/dashboards/gpr/delivery-metrics.json
          name: dashboard-gpr-delivery-metrics
        - mountPath: /etc/grafana/provisioning/dashboards/gpr/dora-metrics.json
          name: dashboard-gpr-dora-metrics
        - mountPath: /etc/grafana/provisioning/dashboards/gpr/vcs-trunk-based-development.json
          name: dashboard-gpr-vcs-trunk-based-development
      securityContext:
        fsGroup: 472
        supplementalGroups:
        - 0
      volumes:
      - name: pv
        persistentVolumeClaim:
          claimName: pvc
      - configMap:
          name: grafana-ini-7598d852h9
        name: grafana-ini
      - configMap:
          name: datasources-f2fd7k44bc
        name: datasources
      - configMap:
          name: providers-ddgcc2d588
        name: providers
      - configMap:
          name: dashboard-demo-bc9g6bfth2
        name: dashboard-demo
      - configMap:
          name: dashboard-opentelemetry-collector-data-flow-9t9kck8d7g
        name: dashboard-opentelemetry-collector-data-flow
      - configMap:
          name: dashboard-opentelemetry-collector-2bmbg4bb5b
        name: dashboard-opentelemetry-collector
      - configMap:
          name: dashboard-spanmetrics-k9b28kd6dc
        name: dashboard-spanmetrics
      - configMap:
          name: dashboard-gpr-delivery-metrics-mhtmt7g69d
        name: dashboard-gpr-delivery-metrics
      - configMap:
          name: dashboard-gpr-dora-metrics-9tgdd45m7k
        name: dashboard-gpr-dora-metrics
      - configMap:
          name: dashboard-gpr-engineering-effectiveness-metrics-hdb9bgtgc4
        name: dashboard-gpr-engineering-effectiveness-metrics
      - configMap:
          name: dashboard-gpr-vcs-trunk-based-development-266bh879gg
        name: dashboard-gpr-vcs-trunk-based-development
---
apiVersion: apps/v1
kind: Deployment
metadata:
  labels:
    app.kubernetes.io/name: loki
  name: loki
  namespace: loki
spec:
  selector:
    matchLabels:
      app.kubernetes.io/name: loki
  template:
    metadata:
      labels:
        app.kubernetes.io/name: loki
    spec:
      containers:
      - args:
        - -config.file=/etc/loki/config.yaml
        image: grafana/loki:3.1.1
        imagePullPolicy: IfNotPresent
        name: loki
        ports:
        - containerPort: 3100
          name: loki
          protocol: TCP
        volumeMounts:
        - mountPath: /etc/loki/config.yaml
          name: config
          subPath: config.yaml
      volumes:
      - configMap:
          name: config-4bbf72649f
        name: config
---
apiVersion: apps/v1
kind: Deployment
metadata:
  labels:
    app.kubernetes.io/name: prometheus
  name: prometheus
  namespace: prometheus
spec:
  replicas: 1
  selector:
    matchLabels:
      app.kubernetes.io/name: prometheus
  template:
    metadata:
      labels:
        app.kubernetes.io/name: prometheus
    spec:
      containers:
      - args:
        - --web.enable-remote-write-receiver
        - --config.file=/etc/prometheus/config.yaml
        - --storage.tsdb.path=/prometheus/
        image: prom/prometheus
        imagePullPolicy: IfNotPresent
        name: prometheus
        ports:
        - containerPort: 9090
          name: prometheus
          protocol: TCP
        volumeMounts:
        - mountPath: /etc/prometheus/config.yaml
          name: config
          subPath: config.yaml
        - mountPath: /prometheus
          name: storage
      volumes:
      - configMap:
          name: config-64mbkd76gh
        name: config
      - emptyDir: {}
        name: storage
---
apiVersion: apps/v1
kind: Deployment
metadata:
  labels:
    app.kubernetes.io/name: tempo
  name: tempo
  namespace: tempo
spec:
  selector:
    matchLabels:
      app.kubernetes.io/name: tempo
  template:
    metadata:
      labels:
        app.kubernetes.io/name: tempo
    spec:
      containers:
      - args:
        - -config.file=/conf/config.yaml
        image: grafana/tempo:latest
        imagePullPolicy: IfNotPresent
        name: tempo
        ports:
        - containerPort: 4317
          name: grpc
          protocol: TCP
        - containerPort: 4318
          name: http
          protocol: TCP
        - containerPort: 3200
          name: tempo
          protocol: TCP
        volumeMounts:
        - mountPath: /conf
          name: config
      volumes:
      - configMap:
          name: config-76mdk7g9tk
        name: config
---
apiVersion: jaegertracing.io/v1
kind: Jaeger
metadata:
  name: jaeger-all-in-one
  namespace: jaeger
---
apiVersion: opentelemetry.io/v1beta1
kind: OpenTelemetryCollector
metadata:
  name: gateway
  namespace: collector
spec:
  config:
    connectors:
      spanmetrics: {}
    exporters:
      debug:
        sampling_initial: 2
        sampling_thereafter: 500
        verbosity: basic
      otlphttp/jaeger:
        endpoint: http://jaeger-all-in-one-collector.jaeger.svc.cluster.local:4318
        tls:
          insecure: true
      otlphttp/loki:
        endpoint: http://loki.loki.svc.cluster.local:3100/otlp
      otlphttp/tempo:
        endpoint: http://tempo.tempo.svc.cluster.local:4318
        tls:
          insecure: true
      prometheusremotewrite:
        endpoint: http://prometheus.prometheus.svc.cluster.local:9090/api/v1/write
        resource_to_telemetry_conversion:
          enabled: true
    extensions:
      health_check:
        endpoint: 0.0.0.0:13133
      pprof:
        endpoint: 0.0.0.0:1777
      zpages:
        endpoint: 0.0.0.0:55679
    processors:
      batch:
        send_batch_size: 100
        timeout: 10s
      memory_limiter:
        check_interval: 1s
        limit_percentage: 75
        spike_limit_percentage: 15
      resource/env:
        attributes:
        - action: upsert
          key: environment.name
          value: local
    receivers:
      otlp:
        protocols:
          grpc: {}
          http: {}
      prometheus:
        config:
          scrape_configs:
          - job_name: dev-otel-gateway-collector
            scrape_interval: 10s
            static_configs:
            - targets:
              - 0.0.0.0:8888
    service:
      extensions:
      - health_check
      - pprof
      - zpages
      pipelines:
        logs:
          exporters:
          - debug
          - otlphttp/loki
          processors:
          - memory_limiter
          - batch
          - resource/env
          receivers:
          - otlp
        metrics:
          exporters:
          - debug
          - prometheusremotewrite
          processors:
          - memory_limiter
          - batch
          - resource/env
          receivers:
          - otlp
          - spanmetrics
        traces:
          exporters:
          - debug
          - otlphttp/tempo
          - spanmetrics
          - otlphttp/jaeger
          processors:
          - memory_limiter
          - batch
          - resource/env
          receivers:
          - otlp
  image: ghcr.io/liatrio/liatrio-otel-collector:0.75.1-amd64
  mode: deployment
  serviceAccount: otel-collector
